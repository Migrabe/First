<!DOCTYPE html>
<!-- saved from url=(0098)file:///C:/Users/TOT/Documents/Grav4/VPE%20Prompt%20Builder%202026%20%E2%80%94%20v3.1%20Fixed.html -->
<html lang="ru">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">





  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VPE Prompt Builder 2026 ‚Äî v4.0</title>
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
  <link id="css2LocalLink" href="./VideoPrompt/css2" rel="stylesheet">
  <style>
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --bg: #080a0f;
      --surface: #0d111a;
      --surface2: #131929;
      --border: #1e2a3a;
      --border2: #243245;
      --text: #e8edf5;
      --muted: #5a6a80;
      --accent-k: #00d4ff;
      --accent-v: #7c3aff;
      --accent-s: #ff6b35;
      --active: #00d4ff;
      --glow: rgba(0, 212, 255, 0.15);

      /* Mapping old vars to new theme to prevent breakage */
      --bg-deep: var(--bg);
      --bg-card: var(--surface);
      --bg-card-hover: var(--surface2);
      --bg-section: var(--surface);
      --accent: var(--accent-v);
      /* Using Violet as primary accent */
      --accent-light: #a78bfa;
      --accent-glow: rgba(124, 58, 255, 0.25);
      --green: var(--accent-k);
      /* Mapping Green to Cyan */
      --green-glow: var(--glow);
      --orange: var(--accent-s);
      --orange-glow: rgba(255, 107, 53, 0.15);
      --red: #ff7675;
      --text-primary: var(--text);
      --text-secondary: var(--muted);
      --text-muted: #4a5a70;
      --radius: 12px;
      --radius-lg: 16px;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Syne', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.5;
      position: relative;
      overflow-x: hidden;
    }

    /* Background grid */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
      background-size: 40px 40px;
      pointer-events: none;
      z-index: -1;
    }

    /* Ambient orbs */
    .orb {
      position: fixed;
      border-radius: 50%;
      filter: blur(100px);
      pointer-events: none;
      z-index: -1;
    }

    .orb1 {
      width: 500px;
      height: 500px;
      background: rgba(0, 212, 255, 0.06);
      top: -100px;
      right: -100px;
    }

    .orb2 {
      width: 400px;
      height: 400px;
      background: rgba(124, 58, 255, 0.06);
      bottom: 100px;
      left: -100px;
    }

    .wrap {
      position: relative;
      z-index: 1;
      max-width: 1600px;
      /* Increased for 2-panel layout */
      margin: 0 auto;
      padding: 20px;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Old layout classes removal / override */
    .app {
      display: flex;
      flex-direction: column;
      flex: 1;
      overflow: hidden;
    }

    .header {
      background: transparent;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      padding: 10px 20px;
      position: relative;
      backdrop-filter: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 0;
    }

    .header-right {
      display: flex;
      gap: 10px;
    }

    .logo {
      width: 40px;
      height: 40px;
      margin: 0;
      box-shadow: 0 0 15px var(--accent-glow);
    }

    .header h1 {
      font-family: 'Syne', sans-serif;
      font-size: 1.5em;
      text-align: left;
      margin-bottom: 0;
      line-height: 1.2;
    }

    .main-grid {
      display: grid;
      grid-template-columns: 1fr 420px;
      gap: 24px;
      flex: 1;
      overflow: hidden;
      padding-top: 20px;
    }

    .left-panel {
      padding: 0 10px 40px 0;
      height: 100%;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .right-panel {
      border-left: 1px solid var(--border);
      padding: 0 0 40px 20px;
      height: 100%;
      overflow-y: auto;
      background: transparent;
      margin-top: 0;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    /* Scrollbar for panels */
    .left-panel::-webkit-scrollbar,
    .right-panel::-webkit-scrollbar {
      width: 6px;
    }

    .left-panel::-webkit-scrollbar-track,
    .right-panel::-webkit-scrollbar-track {
      background: transparent;
    }

    .left-panel::-webkit-scrollbar-thumb,
    .right-panel::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 3px;
    }

    /* === SECTIONS === */
    .section {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 18px;
      transition: border-color .2s;
    }

    .section:hover {
      border-color: #3a3a4f
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 14px;
    }

    .section-header h2 {
      font-size: 1em;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-primary);
    }

    .section-header h2 .icon {
      width: 28px;
      height: 28px;
      border-radius: 8px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      flex-shrink: 0;
    }

    .icon-purple {
      background: rgba(108, 92, 231, .15);
      color: var(--accent-light)
    }

    .icon-blue {
      background: rgba(100, 180, 246, .15);
      color: #64b5f6;
    }

    .icon-green {
      background: var(--green-glow);
      color: var(--green)
    }

    .icon-orange {
      background: var(--orange-glow);
      color: var(--orange)
    }

    .icon-red {
      background: rgba(255, 118, 117, .15);
      color: var(--red)
    }

    .mode-badge {
      font-size: .7em;
      font-weight: 600;
      padding: 3px 8px;
      border-radius: 6px;
      background: rgba(108, 92, 231, .12);
      color: var(--accent-light);
      border: 1px solid rgba(108, 92, 231, .2);
      letter-spacing: .03em;
      text-transform: uppercase;
    }

    .mode-badge.multi {
      background: var(--green-glow);
      color: var(--green);
      border-color: rgba(0, 206, 201, .25)
    }

    .mode-badge.pa {
      background: var(--orange-glow);
      color: var(--orange);
      border-color: rgba(253, 203, 110, .25)
    }

    .sub-label {
      display: block;
      font-size: .85em;
      font-weight: 700;
      color: var(--text-secondary);
      margin: 12px 0 8px;
    }

    /* === BUTTONS === */
    .option-group {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 8px;
    }

    .option-btn {
      padding: 10px 12px;
      border: 1px solid var(--border);
      background: var(--bg-card);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all .2s;
      font-size: .85em;
      text-align: left;
      position: relative;
      color: var(--text-primary);
      font-family: inherit;
      line-height: 1.3;
    }

    .option-btn:hover {
      border-color: var(--accent);
      background: var(--bg-card-hover);
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, .3);
    }

    .option-btn.active {
      background: var(--accent);
      color: #fff;
      border-color: var(--accent);
      font-weight: 700;
      box-shadow: 0 0 20px var(--accent-glow);
    }

    .option-btn:disabled {
      opacity: .4;
      cursor: not-allowed;
      transform: none !important
    }

    /* Section-level disable when Quick Style preset is active */
    .disabled-section {
      position: relative;
      opacity: .35;
      pointer-events: none;
      user-select: none;
    }

    .disabled-section::after {
      content: 'üîí –°–Ω–∏–º–∏—Ç–µ –ø—Ä–µ—Å–µ—Ç –¥–ª—è —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏';
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: .72em;
      color: var(--orange);
      background: rgba(15, 15, 20, .85);
      padding: 3px 10px;
      border-radius: 6px;
      pointer-events: none;
      z-index: 5;
    }

    .slot-tag {
      position: absolute;
      top: 6px;
      right: 6px;
      padding: 1px 6px;
      border-radius: 6px;
      font-size: .65em;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: .04em;
    }

    .slot-tag.primary {
      background: var(--green);
      color: #000
    }

    .slot-tag.accent {
      background: var(--orange);
      color: #000
    }

    /* === INPUTS === */
    .input-field {
      width: 100%;
      padding: 11px 14px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: .92em;
      transition: all .2s;
      background: var(--bg-deep);
      color: var(--text-primary);
      font-family: inherit;
    }

    .input-field:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-glow);
    }

    .input-field::placeholder {
      color: var(--text-muted)
    }

    textarea.input-field {
      resize: vertical;
      min-height: 80px
    }

    /* Tooltip ? */
    .help-tip {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: rgba(108, 92, 231, .18);
      color: var(--accent-light);
      font-size: .65em;
      font-weight: 800;
      cursor: help;
      position: relative;
      flex-shrink: 0;
      border: 1px solid rgba(108, 92, 231, .3);
      margin-left: 4px;
      line-height: 1
    }

    .help-tip .tip-text {
      visibility: hidden;
      opacity: 0;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: calc(100% + 8px);
      width: 320px;
      background: #1f1f2e;
      color: var(--text-primary);
      border: 1px solid var(--accent);
      border-radius: 10px;
      padding: 12px 14px;
      font-size: 12px;
      font-weight: 400;
      line-height: 1.5;
      z-index: 200;
      box-shadow: 0 8px 32px rgba(0, 0, 0, .6);
      pointer-events: none;
      transition: opacity .2s;
      text-align: left
    }

    .help-tip .tip-text::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: var(--accent)
    }

    .help-tip:hover .tip-text {
      visibility: visible;
      opacity: 1
    }

    /* Ref extract */
    .ref-extract-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px
    }

    .ref-extract-label {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: .78em;
      color: var(--text-secondary);
      background: var(--bg-deep);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 4px 8px;
      cursor: pointer;
      transition: all .2s;
      user-select: none
    }

    .ref-extract-label:has(input:checked),
    .ref-extract-label.ext-checked {
      border-color: var(--accent);
      color: var(--accent-light);
      background: rgba(108, 92, 231, .08)
    }

    .ref-extract-label input {
      width: 13px;
      height: 13px;
      accent-color: var(--accent)
    }

    .warn-box {
      background: rgba(253, 203, 110, .08);
      border-left: 3px solid var(--orange);
      padding: 10px 14px;
      border-radius: 0 var(--radius) var(--radius) 0;
      font-size: .82em;
      color: var(--orange);
      margin-top: 8px;
      display: none
    }

    .hint {
      color: var(--text-muted);
      font-size: .8em;
      margin-top: 6px;
      line-height: 1.4
    }

    /* === SCROLLBAR (Safari/Chrome) === */
    .output-box::-webkit-scrollbar,
    .json-box::-webkit-scrollbar {
      width: 6px;
    }

    .output-box::-webkit-scrollbar-track,
    .json-box::-webkit-scrollbar-track {
      background: transparent;
    }

    .output-box::-webkit-scrollbar-thumb,
    .json-box::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 3px;
    }

    /* === TOUCH (iOS) === */
    .left-panel,
    .right-panel {
      -webkit-overflow-scrolling: touch;
    }

    textarea,
    input[type="text"],
    input[type="number"] {
      font-size: 16px !important;
    }

    /* Prevent iOS zoom on focus */

    /* === RANGE INPUT (iOS) === */
    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      background: var(--border);
      border-radius: 3px;
      outline: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
    }

    input[type="range"]::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      border: none;
    }

    /* === TOGGLES === */
    .toggle-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap
    }

    .toggle-label {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      user-select: none;
      background: var(--bg-deep);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 9px 12px;
      font-size: .85em;
      color: var(--text-secondary);
      transition: all .2s;
    }

    .toggle-label:has(input:checked),
    .toggle-label.checked {
      border-color: var(--accent);
      color: var(--text-primary);
      background: rgba(108, 92, 231, .08);
    }

    .toggle-label input {
      width: 16px;
      height: 16px;
      accent-color: var(--accent);
    }

    /* === REFERENCE IMAGES === */
    .ref-upload {
      width: 100%;
      padding: 24px;
      border: 2px dashed var(--border);
      border-radius: var(--radius-lg);
      cursor: pointer;
      background: var(--bg-deep);
      text-align: center;
      color: var(--text-muted);
      font-size: .9em;
      transition: all .2s;
    }

    .ref-upload:hover {
      border-color: var(--accent);
      color: var(--text-secondary)
    }

    .image-preview-card {
      position: relative;
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      overflow: hidden;
      background: var(--bg-deep);
      display: grid;
      grid-template-columns: 140px 1fr;
      gap: 12px;
      padding: 12px;
      margin-top: 10px;
    }

    .image-preview-card img {
      width: 140px;
      height: 100px;
      object-fit: cover;
      border-radius: 8px;
    }

    .image-preview-details {
      display: flex;
      flex-direction: column;
      gap: 8px
    }

    .image-preview-info {
      font-size: .8em;
      color: var(--text-muted)
    }

    .image-remove-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--red);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 26px;
      height: 26px;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all .2s;
    }

    .image-remove-btn:hover {
      transform: scale(1.1);
      filter: brightness(1.1)
    }

    .image-description-input {
      width: 100%;
      padding: 8px 10px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: .82em;
      font-family: inherit;
      resize: vertical;
      min-height: 50px;
      background: var(--bg-card);
      color: var(--text-primary);
      transition: border .2s;
    }

    .image-description-input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px var(--accent-glow)
    }

    /* Slider */
    input[type=range] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 4px;
      background: var(--border);
      outline: none;
      margin: 8px 0;
    }

    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      box-shadow: 0 0 8px var(--accent-glow);
    }

    /* === RIGHT PANEL === */
    .stats-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .stat-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px;
      text-align: center;
    }

    .stat-value {
      font-size: 1.8em;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent-light), var(--green));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .stat-label {
      font-size: .75em;
      color: var(--text-muted);
      margin-top: 2px;
      text-transform: uppercase;
      letter-spacing: .05em
    }

    /* Active tags */
    .tag-area {
      min-height: 60px;
      background: var(--bg-deep);
      border: 1px dashed var(--border);
      border-radius: var(--radius);
      padding: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-content: flex-start;
    }

    .tag-item {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: .75em;
      font-weight: 600;
      background: rgba(108, 92, 231, .12);
      color: var(--accent-light);
      border: 1px solid rgba(108, 92, 231, .2);
    }

    .tag-item.primary {
      background: var(--green-glow);
      color: var(--green);
      border-color: rgba(0, 206, 201, .25)
    }

    .tag-item.accent {
      background: var(--orange-glow);
      color: var(--orange);
      border-color: rgba(253, 203, 110, .25)
    }

    .tag-item .remove {
      cursor: pointer;
      font-weight: 900;
      color: var(--red);
      line-height: 1;
      user-select: none;
      font-size: 1.1em;
    }

    .tag-item .remove:hover {
      filter: brightness(1.2)
    }

    /* Output box */
    .output-box {
      background: var(--bg-deep);
      color: var(--green);
      padding: 16px;
      border-radius: var(--radius);
      font-family: 'JetBrains Mono', ui-monospace, monospace;
      font-size: .82em;
      line-height: 1.7;
      overflow: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
      border: 1px solid var(--border);
      min-height: 200px;
      max-height: 400px;
      flex: 1;
    }

    .output-box.empty {
      color: var(--text-muted);
      font-style: italic
    }

    .json-box {
      background: var(--bg-deep);
      color: var(--accent-light);
      padding: 16px;
      border-radius: var(--radius);
      font-family: 'JetBrains Mono', ui-monospace, monospace;
      font-size: .78em;
      line-height: 1.6;
      overflow: auto;
      white-space: pre;
      border: 1px solid var(--border);
      max-height: 300px;
    }

    /* Format tabs */
    .format-tabs {
      display: flex;
      gap: 4px;
      background: var(--bg-deep);
      border-radius: 8px;
      padding: 3px;
      border: 1px solid var(--border);
      margin-bottom: 12px;
    }

    .format-tab {
      flex: 1;
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      font-size: .82em;
      font-weight: 700;
      cursor: pointer;
      background: transparent;
      color: var(--text-muted);
      font-family: inherit;
      transition: all .2s;
    }

    .format-tab.active {
      background: var(--accent);
      color: #fff
    }

    .format-tab:hover:not(.active) {
      color: var(--text-primary)
    }

    /* Action buttons */
    .action-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap
    }

    .btn {
      flex: 1;
      padding: 12px 16px;
      border: none;
      border-radius: var(--radius);
      font-size: .88em;
      font-weight: 700;
      cursor: pointer;
      font-family: inherit;
      transition: all .2s;
      min-width: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .btn:hover {
      transform: translateY(-1px)
    }

    .btn:active {
      transform: translateY(0)
    }

    .btn-accent {
      background: var(--accent);
      color: #fff
    }

    .btn-accent:hover {
      box-shadow: 0 4px 20px var(--accent-glow);
      filter: brightness(1.1)
    }

    .btn-green {
      background: var(--green);
      color: #000
    }

    .btn-green:hover {
      filter: brightness(1.1)
    }

    .btn-ghost {
      background: var(--bg-card);
      color: var(--text-primary);
      border: 1px solid var(--border)
    }

    .btn-ghost:hover {
      border-color: var(--text-muted)
    }

    .btn-red {
      background: rgba(255, 118, 117, .12);
      color: var(--red);
      border: 1px solid rgba(255, 118, 117, .2)
    }

    .btn-red:hover {
      background: rgba(255, 118, 117, .2)
    }

    /* Notification */
    .notification {
      position: fixed;
      bottom: 24px;
      right: 24px;
      padding: 12px 20px;
      border-radius: var(--radius);
      font-size: .88em;
      font-weight: 700;
      box-shadow: 0 8px 32px rgba(0, 0, 0, .4);
      opacity: 0;
      transform: translateY(20px);
      transition: all .3s;
      z-index: 1000;
      font-family: inherit;
    }

    .notification.show {
      opacity: 1;
      transform: translateY(0)
    }

    .notification.success {
      background: var(--green);
      color: #000
    }

    .notification.warn {
      background: var(--orange);
      color: #000
    }

    .notification.err {
      background: var(--red);
      color: #fff
    }

    /* Warning/info boxes */
    .info-box {
      background: rgba(108, 92, 231, .08);
      border-left: 3px solid var(--accent);
      padding: 10px 14px;
      border-radius: 0 var(--radius) var(--radius) 0;
      font-size: .85em;
      color: var(--accent-light);
      margin-top: 8px;
    }

    /* Prompt format indicator */
    .format-indicator {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: .75em;
      color: var(--text-muted);
      padding: 4px 10px;
      border-radius: 6px;
      background: var(--bg-deep);
      border: 1px solid var(--border);
    }

    .format-indicator .dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--green);
    }

    /* Responsive */
    @media (max-width: 1100px) {
      .main-grid {
        grid-template-columns: 1fr
      }

      .right-panel {
        border-left: none;
        border-top: 1px solid var(--border);
        height: auto;
        max-height: none
      }

      .left-panel {
        height: auto;
        max-height: none
      }

      .image-preview-card {
        grid-template-columns: 1fr
      }

      .image-preview-card img {
        width: 100%;
        height: 180px
      }
    }

    @media (max-width: 600px) {
      .header {
        padding: 14px 16px;
        flex-direction: column;
        gap: 10px
      }

      .left-panel,
      .right-panel {
        padding: 14px
      }

      .option-group {
        grid-template-columns: repeat(auto-fill, minmax(130px, 1fr))
      }

      .stats-row {
        grid-template-columns: 1fr 1fr 1fr
      }
    }

    /* Disabled section style ‚Äî generation mode */
    .disabled-section {
      opacity: 0.4;
      pointer-events: none;
      filter: grayscale(100%);
      position: relative;
    }

    .disabled-section::after {
      content: "üîí –°–Ω–∏–º–∏—Ç–µ –ø—Ä–µ—Å–µ—Ç –¥–ª—è —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏";
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: .72em;
      color: var(--orange);
      background: rgba(15, 15, 20, .85);
      padding: 3px 10px;
      border-radius: 6px;
      pointer-events: none;
      z-index: 5;
    }

    /* Conflict-disabled buttons */
    .option-btn.conflict-disabled {
      opacity: 0.25;
      cursor: not-allowed;
      transform: none !important;
      pointer-events: none;
      position: relative;
    }

    .option-btn.conflict-disabled::after {
      content: "‚ö†";
      position: absolute;
      top: 2px;
      right: 4px;
      font-size: 0.65em;
      opacity: 0.7;
    }

    /* === UX FIXES (visibility + stability) === */
    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    .option-btn:focus-visible,
    .format-tab:focus-visible,
    .btn:focus-visible,
    .toggle-label:focus-within {
      outline: 2px solid var(--accent-light);
      outline-offset: 2px;
    }

    /* Make selected buttons more obvious (extra ring) */
    .option-btn.active {
      box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.12), 0 0 20px var(--accent-glow);
    }

    /* Prevent horizontal drift while dragging sliders / trackpads */
    html,
    body {
      width: 100%;
      overflow-x: hidden;
    }

    .main-grid {
      width: 100%;
      max-width: 100vw;
    }

    .left-panel,
    .right-panel {
      overflow-x: hidden;
      min-width: 0;
    }

    input[type="range"] {
      touch-action: pan-y;
    }
  </style>
  <style type="text/css">
    /* === 2026 REDESIGN LAYER (VideoPrompt based, logic-safe) === */
    .wrap {
      max-width: 1500px;
      padding: 28px 20px 24px;
      height: 100vh;
    }

    .app {
      gap: 16px;
    }

    .header {
      background: linear-gradient(120deg, rgba(13, 17, 26, 0.92), rgba(19, 25, 41, 0.86));
      border: 1px solid var(--border2);
      border-radius: 16px;
      padding: 16px 18px;
      backdrop-filter: blur(10px);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .logo {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-family: 'Space Mono', monospace;
      font-weight: 700;
      color: var(--accent-k);
      background: rgba(0, 212, 255, 0.1);
      border: 1px solid rgba(0, 212, 255, 0.25);
      box-shadow: 0 0 0 1px rgba(0, 212, 255, 0.04), 0 0 20px rgba(0, 212, 255, 0.16);
    }

    .brand-line {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .header h1 {
      font-size: clamp(20px, 3vw, 28px);
      line-height: 1.05;
      letter-spacing: -0.4px;
    }

    .build-note {
      color: var(--muted);
      font-family: 'Space Mono', monospace;
      font-size: 11px;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      margin-top: 4px;
    }

    .main-grid {
      grid-template-columns: minmax(760px, 1fr) 420px;
      gap: 18px;
      padding-top: 0;
    }

    .left-panel,
    .right-panel {
      border: 1px solid var(--border);
      border-radius: 16px;
      background: linear-gradient(180deg, rgba(13, 17, 26, 0.8), rgba(13, 17, 26, 0.58));
      padding: 16px;
    }

    .left-panel {
      padding-right: 16px;
      gap: 14px;
    }

    .right-panel {
      border-left: 1px solid var(--border);
      padding-left: 16px;
      gap: 14px;
      position: sticky;
      top: 0;
      align-self: start;
      max-height: calc(100vh - 130px);
    }

    .section {
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(8, 10, 15, 0.7);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.03);
      padding: 14px;
      margin-bottom: 0;
    }

    .section-header {
      border-radius: 10px;
      padding: 8px 30px 8px 8px;
    }

    .section-header h2 {
      font-size: 0.93rem;
      letter-spacing: 0.1px;
    }

    .section-header h2 .icon {
      width: 24px;
      height: 24px;
      border-radius: 7px;
      font-size: 12px;
    }

    .section-content {
      margin-top: 12px;
    }

    .option-group {
      gap: 8px;
    }

    .option-btn,
    .preset-btn,
    .quick-preset-btn,
    .format-tab {
      border-radius: 9px;
      border: 1px solid var(--border2);
      background: var(--surface);
      color: var(--muted);
      font-family: 'Space Mono', monospace;
      font-size: 11px;
      transition: all .2s ease;
    }

    .option-btn:hover,
    .preset-btn:hover,
    .quick-preset-btn:hover,
    .format-tab:hover {
      background: var(--surface2);
      color: var(--text);
      border-color: rgba(0, 212, 255, 0.32);
      transform: translateY(-1px);
    }

    .option-btn.active,
    .format-tab.active,
    .preset-btn.active,
    .quick-preset-btn.active {
      background: rgba(0, 212, 255, 0.1);
      color: var(--accent-k);
      border-color: rgba(0, 212, 255, 0.38);
      box-shadow: 0 0 0 1px rgba(0, 212, 255, 0.08) inset;
    }

    .input-field,
    textarea.input-field,
    select,
    input[type="text"],
    input[type="number"] {
      background: var(--surface);
      border: 1px solid var(--border2);
      border-radius: 10px;
      color: var(--text);
      font-family: 'Space Mono', monospace;
    }

    .input-field:focus,
    textarea.input-field:focus,
    select:focus,
    input[type="text"]:focus,
    input[type="number"]:focus {
      outline: none;
      border-color: rgba(0, 212, 255, 0.38);
      box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.12);
    }

    .stats-row {
      gap: 8px;
    }

    .stat-card {
      border: 1px solid var(--border2);
      background: rgba(13, 17, 26, 0.9);
      border-radius: 10px;
    }

    .output-box,
    .json-box {
      background: #090d16;
      border: 1px solid var(--border2);
      border-radius: 10px;
      font-family: 'Space Mono', monospace;
      line-height: 1.5;
    }

    .action-row .btn {
      border-radius: 10px;
      border: 1px solid var(--border2);
      font-family: 'Space Mono', monospace;
      font-size: 12px;
    }

    .mode-badge {
      font-family: 'Space Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.8px;
      text-transform: uppercase;
      border: 1px solid var(--border2);
      background: rgba(19, 25, 41, 0.8);
      color: var(--muted);
      padding: 2px 7px;
      border-radius: 999px;
    }

    .main-grid {
      grid-template-columns: 1fr;
      display: block;
      /* Ensure it stacks */
      height: auto;
      overflow: visible;
    }

    .left-panel,
    .right-panel {
      height: auto;
      max-height: none;
      overflow: visible;
      margin-bottom: 20px;
    }

    .right-panel {
      position: static;
      border-left: 1px solid var(--border);
      /* Maintain border */
    }

    .wrap {
      height: auto;
      /* Allow wrap to grow */
      min-height: 100vh;
      overflow-y: auto;
    }

    body {
      overflow-y: auto;
      /* Force scroll on body */
    }
  </style>
  <style type="text/css" id="operaUserStyle"></style>
  <style type="text/css">
    /* === COLLAPSIBLE SECTIONS === */
    .section-header {
      cursor: pointer;
      position: relative;
      transition: background 0.2s;
    }

    .section-header:hover {
      background: rgba(255, 255, 255, 0.03);
    }

    /* Chevron Icon (Arrow) */
    .section-header::after {
      content: '';
      position: absolute;
      right: 20px;
      top: 50%;
      width: 8px;
      height: 8px;
      border-right: 2px solid var(--text-muted);
      border-bottom: 2px solid var(--text-muted);
      transform: translateY(-60%) rotate(45deg);
      /* Points Down (Open) */
      transition: transform 0.3s ease;
    }

    /* Collapsed State: Arrow Points Right */
    .section.collapsed .section-header::after {
      transform: translateY(-60%) rotate(-45deg);
    }

    /* Content Transition */
    .section-content {
      overflow: hidden;
      transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease, margin 0.3s ease;
      max-height: 5000px;
      /* Large enough for any content */
      opacity: 1;
    }

    .section.collapsed .section-content {
      max-height: 0 !important;
      opacity: 0;
      margin-top: 0;
      margin-bottom: 0;
      pointer-events: none;
    }

    /* === MOBILE LAYOUT FIX === */
    html,
    body {
      overflow-x: hidden;
      width: 100%;
      position: relative;
    }

    /* Universal fix for button wrapping */
    .option-btn,
    .preset-btn,
    .quick-preset-btn {
      min-width: 0;
      white-space: normal;
      word-break: break-word;
      height: auto;
      /* allow growth */
    }

    @media (max-width: 900px) {
      .main-grid {
        display: flex;
        flex-direction: column;
        grid-template-columns: 1fr;
        height: auto;
        overflow: visible;
      }

      .left-panel,
      .right-panel {
        width: 100%;
        height: auto;
        overflow-y: visible;
        padding: 12px;
      }

      .right-panel {
        border-left: none;
        border-top: 1px solid var(--border);
      }

      .header {
        padding: 12px 14px;
      }

      .header h1 {
        font-size: 1.1em;
      }

      /* Force single column for option groups on very small screens */
      .option-group {
        grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
        /* ensure fluid */
      }

      /* Fix 3-column specific grids if any */
      .stats-row {
        grid-template-columns: 1fr;
      }

      /* Ensure presets wrap */
      #presetGrid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 480px) {

      /* Tighter mobile layout */
      .option-group {
        grid-template-columns: repeat(2, 1fr);
        /* Force 2 cols */
      }

      /* Lens & Quick Style specific override for readability */
      #quickStyleSection .option-group,
      #lensSectionV2 .option-group {
        grid-template-columns: 1fr;
        /* 1 col for long text items? or 2? Let's try 2 for presets, 1 for long lenses if needed */
        grid-template-columns: repeat(2, 1fr);
      }

      /* Fix font sizes */
      .option-btn {
        font-size: 0.8em;
        padding: 8px;
        word-wrap: break-word;
      }

      /* STRICT MOBILE OVERFLOW FIX */
      body,
      html {
        overflow-x: hidden !important;
        width: 100% !important;
        position: relative;
      }

      .app {
        width: 100%;
        overflow-x: hidden;
      }

      .json-box {
        white-space: pre-wrap !important;
        /* Force wrap on mobile */
        word-break: break-all !important;
        max-width: 100%;
      }

      .output-box {
        word-break: break-word;
      }

      /* Ensure no element exceeds viewport */
      img,
      video,
      iframe,
      input,
      textarea,
      select,
      button {
        max-width: 100%;
      }
    }
  </style>
</head>

<body>
  <div class="orb orb1"></div>
  <div class="orb orb2"></div>

  <div class="wrap">
    <div class="app">
      <!-- HEADER -->
      <!-- HEADER -->
      <header class="header">
        <div class="header-left">
          <div class="logo">VPE</div>
          <div>
            <div class="brand-line">
              <h1>VPE Prompt Builder 2026</h1>
              <span style="color:var(--accent-k); font-family:'Space Mono', monospace; font-size:0.8em;">v4.0</span>
            </div>
            <div class="build-note">Kling/Veo/Seedance inspired layout ‚Ä¢ Full prompt logic preserved</div>
          </div>
        </div>
        <div class="header-right">
          <button class="option-btn" onclick="resetAll()"
            style="border-color:var(--red); color:var(--red); background:rgba(255,118,117,0.1);">‚Ü∫ –°–±—Ä–æ—Å</button>
        </div>
      </header>

      <div class="main-grid">
        <!-- Main Content Area -->
        <div class="left-panel">

          <!-- Quick Style Presets (moved to top for priority access) -->
          <div class="section" id="quickStyleSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-purple">üé®</span> –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–µ—Å–µ—Ç—ã <span class="help-tip">?<span
                    class="tip-text">–°—Ç–∏–ª–µ–≤—ã–µ –ø—Ä–µ—Å–µ—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç –ø–æ–ª–Ω—ã–π –±–ª–æ–∫ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∏–ª—è –≤ –ø—Ä–æ–º–ø—Ç. –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω ‚Äî
                    –æ–Ω
                    –∑–∞–¥–∞—Å—Ç –æ—Å–≤–µ—â–µ–Ω–∏–µ, —Ü–≤–µ—Ç, —Ç–µ–∫—Å—Ç—É—Ä—É –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –ø—Ä–µ—Å–µ—Ç–∞ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ–Ω—é (–∫—Ä–æ–º–µ
                    –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è
                    —Å—Ç–æ—Ä–æ–Ω) –æ—Ç–∫–ª—é—á–∞—é—Ç—Å—è. –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –∞–≤—Ç–æ—Ä—Å–∫–∏–º–∏ —Å—Ç–∏–ª—è–º–∏ (–§–æ—Ç–æ/–ö–∏–Ω–æ/–†–µ–∂–∏—Å—Å—ë—Ä).</span></span></h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group">
                <button class="option-btn" data-group="quickStyle" data-value="true-detective"
                  title="–≠—Å—Ç–µ—Ç–∏–∫–∞ –Ω—É–∞—Ä–∞ HBO, –∂—ë—Å—Ç–∫–æ–µ —Å–æ–ª–Ω—Ü–µ, –±–æ–ª–æ—Ç–∏—Å—Ç—ã–µ –∑–µ–ª—ë–Ω—ã–µ —Ç–æ–Ω–∞">üïµÔ∏è True Detective</button>
                <button class="option-btn" data-group="quickStyle" data-value="game-of-thrones"
                  title="–≠–ø–∏—á–µ—Å–∫–æ–µ —Ñ—ç–Ω—Ç–µ–∑–∏, —Ö–æ–ª–æ–¥–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ, –ø—Ä–∏–≥–ª—É—à—ë–Ω–Ω—ã–µ —Å—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—ã–µ —Ç–æ–Ω–∞">‚öîÔ∏è Game of
                  Thrones</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-last-of-us"
                  title="–ü–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å, —Ä–∞–∑—Ä–æ—Å—à–∞—è—Å—è –ø—Ä–∏—Ä–æ–¥–∞, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–≤–µ—Ç">üåø The Last of Us</button>
                <button class="option-btn" data-group="quickStyle" data-value="stranger-things"
                  title="–ù–æ—Å—Ç–∞–ª—å–≥–∏—è –ø–æ 80-–º, –Ω–µ–æ–Ω–æ–≤—ã–π —Ç—É–º–∞–Ω, —Ç—ë–ø–ª—ã–µ –∏–Ω—Ç–µ—Ä—å–µ—Ä—ã –ø—Ä–∏–≥–æ—Ä–æ–¥–∞">üö≤ Stranger Things</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-crown"
                  title="–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∞—è —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ—Å—Ç—å, –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ —é–≤–µ–ª–∏—Ä–Ω—ã–µ —Ç–æ–Ω–∞, –º—è–≥–∫–∏–π –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–µ—Ç">üëë The
                  Crown</button>
                <button class="option-btn" data-group="quickStyle" data-value="wednesday"
                  title="–ì–æ—Ç–∏—á–µ—Å–∫–∞—è —Ç—ë–º–Ω–∞—è –∞–∫–∞–¥–µ–º–∏—è, —Å—Ç–∏–ª—å –¢–∏–º–∞ –ë—ë—Ä—Ç–æ–Ω–∞, —Ö–æ–ª–æ–¥–Ω—ã–µ —Ç–æ–Ω–∞">üï∑Ô∏è Wednesday</button>
                <button class="option-btn" data-group="quickStyle" data-value="blade-runner-2049"
                  title="–ù–µ–æ-–Ω—É–∞—Ä –∫–∏–±–µ—Ä–ø–∞–Ω–∫, –æ–±—ä—ë–º–Ω—ã–π —Ç—É–º–∞–Ω, –æ—Ä–∞–Ω–∂–µ–≤—ã–π/–±–∏—Ä—é–∑–æ–≤—ã–π">ü§ñ Blade Runner 2049</button>
                <button class="option-btn" data-group="quickStyle" data-value="dune"
                  title="–≠–ø–∏—á–µ—Å–∫–∞—è –ø—É—Å—Ç—ã–Ω–Ω–∞—è –º–æ–Ω—É–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å, –º–∏–Ω–∏–º–∞–ª–∏–∑–º, –ø–µ—Å–æ—á–Ω—ã–µ —Ç–æ–Ω–∞ –∏ –º–∞—Å—à—Ç–∞–±">üèúÔ∏è Dune</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-matrix"
                  title="–¢–µ—Ö–Ω–æ-–Ω—É–∞—Ä, –∑–µ–ª—ë–Ω—ã–π —Ü–∏—Ñ—Ä–æ–≤–æ–π —Ç–∏–Ω—Ç, —á—ë—Ä–Ω—ã–π –≤–∏–Ω–∏–ª –∏ –∂—ë—Å—Ç–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç">üü¢ The Matrix</button>
                <button class="option-btn" data-group="quickStyle" data-value="grand-budapest-hotel"
                  title="–°–∏–º–º–µ—Ç—Ä–∏—è –£—ç—Å–∞ –ê–Ω–¥–µ—Ä—Å–æ–Ω–∞, –ø–∞—Å—Ç–µ–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞, –ø—Ä–∏—á—É–¥–ª–∏–≤–æ—Å—Ç—å">üè® Grand Budapest</button>
                <button class="option-btn" data-group="quickStyle" data-value="in-the-mood-for-love"
                  title="–†–æ–º–∞–Ω—Ç–∏–∫–∞ –í–æ–Ω–≥ –ö–∞—Ä-–≤–∞—è, —Å–æ—á–Ω—ã–µ –∫—Ä–∞—Å–Ω—ã–µ, –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–µ —Ç–µ–Ω–∏">üèÆ In the Mood for Love</button>
                <button class="option-btn" data-group="quickStyle" data-value="mad-max-fury-road"
                  title="–í—ã—Å–æ–∫–æ–∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π —ç–∫—à–µ–Ω –≤ –ø—É—Å—Ç—ã–Ω–µ, –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π –±–∏—Ä—é–∑–æ–≤—ã–π –∏ –æ—Ä–∞–Ω–∂–µ–≤—ã–π">üèéÔ∏è Mad Max Fury</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-revenant"
                  title="–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–µ—Ç –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥—ã, —Ö–æ–ª–æ–¥–Ω–∞—è –∑–∏–º–∞, –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ">‚ùÑÔ∏è The Revenant</button>
                <button class="option-btn" data-group="quickStyle" data-value="hero"
                  title="–ü–æ—ç–∑–∏—è —É—Å—è, —Å–º–µ–ª—ã–µ –º–æ–Ω–æ—Ö—Ä–æ–º–Ω—ã–µ —Ü–≤–µ—Ç–æ–≤—ã–µ —Ç–µ–º—ã">üó°Ô∏è Hero</button>
                <button class="option-btn" data-group="quickStyle" data-value="la-la-land"
                  title="–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º—é–∑–∏–∫–ª, –æ—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞ Technicolor, –º–∞–≥–∏—á–µ—Å–∫–∏–π —Ä–µ–∞–ª–∏–∑–º">üíÉ La La Land</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-fall"
                  title="–°—é—Ä—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –º–∞–∫—Å–∏–º–∞–ª–∏–∑–º, –∂–∏–≤–æ–ø–∏—Å–Ω—ã–µ —Ü–≤–µ—Ç–∞, —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–∫–∞—Ü–∏–∏">üë≥ The Fall</button>
                <button class="option-btn" data-group="quickStyle" data-value="1917"
                  title="–†–µ–∞–ª–∏–∑–º –æ–¥–Ω–æ–≥–æ –∫–∞–¥—Ä–∞ –ü–µ—Ä–≤–æ–π –º–∏—Ä–æ–≤–æ–π, –ø–∞—Å–º—É—Ä–Ω—ã–π –¥–µ–Ω—å, —Å–≤–µ—Ç –æ–≥–Ω—è –Ω–æ—á—å—é">üí£ 1917</button>
                <button class="option-btn" data-group="quickStyle" data-value="life-of-pi"
                  title="–í–∏–∑—É–∞–ª—å–Ω–∞—è –ø–æ—ç–∑–∏—è –æ–∫–µ–∞–Ω–∞, –±–∏–æ–ª—é–º–∏–Ω–µ—Å—Ü–µ–Ω—Ü–∏—è, –º–∞–≥–∏—á–µ—Å–∫–∏–π —Ä–µ–∞–ª–∏–∑–º">üêÖ Life of Pi</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-shape-of-water"
                  title="–†–µ—Ç—Ä–æ-—Å–∫–∞–∑–∫–∞ –¥–µ–ª—å –¢–æ—Ä–æ, –∞–∫–≤–∞-–∑–µ–ª—ë–Ω—ã–µ —Ç–æ–Ω–∞, —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –º–∏—Å—Ç–∏–∫–∞">üß™ The Shape of
                  Water</button>
                <button class="option-btn" data-group="quickStyle" data-value="pans-labyrinth"
                  title="–ú—Ä–∞—á–Ω–æ–µ —Ñ—ç–Ω—Ç–µ–∑–∏ –ò—Å–ø–∞–Ω–∏–∏, —Å–≤–µ—á–∏ –∏ –ª—É–Ω–Ω—ã–π —Å–≤–µ—Ç, –±–∞—Ä–æ—á–Ω–∞—è —Ñ–∞–∫—Ç—É—Ä–∞">üåÄ Pan's Labyrinth</button>
                <button class="option-btn" data-group="quickStyle" data-value="skyfall"
                  title="–ë–æ–Ω–¥-—ç—Å—Ç–µ—Ç–∏–∫–∞ –†–æ–¥–∂–µ—Ä–∞ –î–∏–∫–∏–Ω—Å–∞, –Ω–µ–æ–Ω –®–∞–Ω—Ö–∞—è, —Å–∏–ª—É—ç—Ç–Ω—ã–π –¥—Ä–∞–º–∞—Ç–∏–∑–º">üéØ Skyfall</button>
                <button class="option-btn" data-group="quickStyle" data-value="parasite"
                  title="–ö–æ—Ä–µ–π—Å–∫–∏–π –Ω–µ–æ-—Ä–µ–∞–ª–∏–∑–º, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è –ø–∞–ª–∏—Ç—Ä–∞">üè† Parasite</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-lighthouse"
                  title="–ß—ë—Ä–Ω–æ-–±–µ–ª–∞—è –º–æ—Ä—Å–∫–∞—è –∫–ª–∞—É—Å—Ç—Ä–æ—Ñ–æ–±–∏—è, –∂—ë—Å—Ç–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –≤–∏–Ω—Ç–∞–∂–Ω–∞—è –æ–ø—Ç–∏–∫–∞">üïØÔ∏è The
                  Lighthouse</button>
                <button class="option-btn" data-group="quickStyle" data-value="inception"
                  title="–ì–æ—Ä–æ–¥—Å–∫–∞—è —Å—é—Ä—Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å, —Ö–æ–ª–æ–¥–Ω—ã–π –º–æ–¥–µ—Ä–Ω–∏–∑–º, —Å–Ω–æ–≤–∏–¥—á–µ—Å–∫–∞—è —Ñ–∏–∑–∏–∫–∞">üåÄ Inception</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-lord-of-the-rings"
                  title="–≠–ø–∏—á–µ—Å–∫–æ–µ —Ñ—ç–Ω—Ç–µ–∑–∏ –ù–æ–≤–æ–π –ó–µ–ª–∞–Ω–¥–∏–∏, –∑–æ–ª–æ—Ç–æ–π –≥–µ—Ä–æ–∏–∑–º, –¥—Ä–µ–≤–Ω—è—è –º–∏—Ñ–æ–ª–æ–≥–∏—è">üíç The Lord of the
                  Rings</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-dark-knight"
                  title="–ì–æ—Ä–æ–¥—Å–∫–æ–π –∫—Ä–∏–º–∏–Ω–∞–ª—å–Ω—ã–π –Ω—É–∞—Ä, IMAX-—Ä–µ–∞–ª–∏–∑–º, —Ö–æ–ª–æ–¥–Ω–∞—è —Å—Ç–∞–ª—å –ì–æ—Ç—ç–º–∞">ü¶á The Dark Knight</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-martian"
                  title="–ù–∞—É—á–Ω—ã–π —Ä–µ–∞–ª–∏–∑–º –ú–∞—Ä—Å–∞, –æ—Ä–∞–Ω–∂–µ–≤—ã–µ –ø—ã–ª–µ–≤—ã–µ –±—É—Ä–∏, –∏–Ω–∂–µ–Ω–µ—Ä–Ω–∞—è —á–∏—Å—Ç–æ—Ç–∞">üöÄ The Martian</button>
                <button class="option-btn" data-group="quickStyle" data-value="the-city-of-lost-children"
                  title="–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π —Å—Ç–∏–º–ø–∞–Ω–∫-—Å—é—Ä—Ä–µ–∞–ª–∏–∑–º, –∑–µ–ª—ë–Ω–æ-—è–Ω—Ç–∞—Ä–Ω—ã–π —Ç—É–º–∞–Ω, —Å–∫–∞–∑–æ—á–Ω—ã–π –º—Ä–∞–∫">‚öôÔ∏è The City of Lost
                  Children</button>
                <button class="option-btn" data-group="quickStyle" data-value="stardust"
                  title="–°–∫–∞–∑–æ—á–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, –∑–æ–ª–æ—Ç–æ–µ –≤–æ–ª—à–µ–±—Å—Ç–≤–æ, —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π —Ñ—ç–Ω—Ç–µ–∑–∏-–±–ª–µ—Å–∫">‚≠ê Stardust</button>
                <button class="option-btn" data-group="quickStyle" data-value="once-upon-a-time-in-hollywood"
                  title="–ù–æ—Å—Ç–∞–ª—å–≥–∏—è –õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å–∞ 1969, —Ç—ë–ø–ª–∞—è –ø–ª—ë–Ω–∫–∞, –Ω–µ–æ–Ω–æ–≤–∞—è –Ω–æ—á—å">üé¨ Once Upon a Time In
                  Hollywood</button>
                <button class="option-btn" data-group="quickStyle" data-value="amelie"
                  title="–ü—Ä–∏—á—É–¥–ª–∏–≤—ã–π –ü–∞—Ä–∏–∂, —Ç—ë–ø–ª–∞—è –∑–µ–ª—ë–Ω–æ-–∫—Ä–∞—Å–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞, –∂–∏–≤–æ–ø–∏—Å–Ω–æ—Å—Ç—å">ü•Ñ Am√©lie</button>
                <button class="option-btn" data-group="quickStyle" data-value="shinkai-vibes"
                  title="–°—Ç–∏–ª—å –ú–∞–∫–æ—Ç–æ –°–∏–Ω–∫–∞—è, —è—Ä–∫–∏–µ –æ–±–ª–∞–∫–∞, –±–ª–∏–∫–∏ –æ–±—ä–µ–∫—Ç–∏–≤–∞">‚òÅÔ∏è Modern Anime</button>
                <button class="option-btn" data-group="quickStyle" data-value="90s-anime"
                  title="–†–µ—Ç—Ä–æ 90-—Ö, —Ü–µ–ª-–∞–Ω–∏–º–∞—Ü–∏—è, –∑–µ—Ä–Ω–∏—Å—Ç–æ—Å—Ç—å –ø–ª—ë–Ω–∫–∏, –ø—Ä–∏–≥–ª—É—à—ë–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞">üìº 90s Cel Style</button>
                <button class="option-btn" data-group="quickStyle" data-value="dark-fantasy-anime"
                  title="–°—Ç–∏–ª—å –ë–µ—Ä—Å–µ—Ä–∫/Elden Ring, —Ç—ë–º–Ω–æ–µ —Ñ—ç–Ω—Ç–µ–∑–∏, –º—Ä–∞—á–Ω–æ—Å—Ç—å">‚öîÔ∏è Dark Fantasy</button>
                <button class="option-btn" data-group="quickStyle" data-value="ghibli-style"
                  title="–≠—Å—Ç–µ—Ç–∏–∫–∞ —Ä—É—á–Ω–æ–π —Ä–∏—Å–æ–≤–∫–∏ Studio Ghibli, –º—è–≥–∫–∞—è –ø—Ä–∏—Ä–æ–¥–∞">üé® Ghibli Style</button>
              </div>
              <div class="hint">–°—Ç–∏–ª–µ–≤–æ–π –ø—Ä–µ—Å–µ—Ç –∑–∞–¥–∞—ë—Ç –ø–æ–ª–Ω—É—é –≤–∏–∑—É–∞–ª—å–Ω—É—é —ç—Å—Ç–µ—Ç–∏–∫—É: –æ—Å–≤–µ—â–µ–Ω–∏–µ, —Ü–≤–µ—Ç, —Ç–µ–∫—Å—Ç—É—Ä—É. –ü—Ä–∏
                –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
                –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ–Ω—é.</div>
            </div>
          </div>

          <!-- Generation Modes Master Toggle -->
          <div class="section" id="generationModeSection"
            style="border: 2px solid var(--accent); background: rgba(108, 92, 231, 0.05);">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-orange">‚ú®</span> –†–µ–∂–∏–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ <span class="help-tip">?<span
                    class="tip-text"><b>Generate 4</b> ‚Äî —Å–æ–∑–¥–∞—ë—Ç 4 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏
                    —Ä–∞–∫—É—Ä—Å–∞–º–∏: Low Angle, Cowboy Shot, Dutch Angle, Three-Quarter. –ë–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç–∏–≤, —É–≥–æ–ª –∏ –ø–ª–∞–Ω (–æ–Ω–∏
                    –∑–∞–¥–∞–Ω—ã –≤ –≤–∞—Ä–∏–∞—Ü–∏—è—Ö). –ï—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ ¬´–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã¬ª, —Å–ª–æ–≤–æ subject –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –≤–∞—à
                    —Ç–µ–∫—Å—Ç.<br><br><b>3√ó3 Contact Sheet</b> ‚Äî –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–∞–∫—Ç-–ª–∏—Å—Ç –∏–∑ 9 –∫–∞–¥—Ä–æ–≤ (–æ—Ç ELS –¥–æ ECU
                    +
                    –≤–∏–¥ —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É) –≤ –µ–¥–∏–Ω–æ–π —Å–µ—Ç–∫–µ. –ë–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç–∏–≤, –¥–∏–∞—Ñ—Ä–∞–≥–º—É, —É–≥–æ–ª, –ø–ª–∞–Ω.<br><br><b>üîí –ú–∞–∫—Å.
                      –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å</b> ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª Identity Lock: –≤—Å–µ —á–µ—Ä—Ç—ã –ª–∏—Ü–∞, –≤–æ–ª–æ—Å, –∫–æ–∂–∏, —Ç–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏—è
                    –∏
                    –æ–¥–µ–∂–¥—ã —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –∏ –Ω–µ –º–µ–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Å–µ—Ä–∏–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ–¥–Ω–æ–≥–æ
                    –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.<br><br>–í—Å–µ —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞ –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–æ–º–µ Generate 4 + 3√ó3
                    (–≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ).</span></span></h2>
            </div>
            <div class="section-content">
              <div class="toggle-row">
                <label class="toggle-label" id="generateFourModeLabel"
                  style="flex:1; display:flex; justify-content:space-between; font-weight:bold; color:var(--accent-light);"
                  title="">
                  <span>üé¨ 4 –í–∞—Ä–∏–∞—Ü–∏–∏ (Gen 4)</span>
                  <input type="checkbox" id="generateFourMode">
                </label>
                <label class="toggle-label" id="grid3x3ModeLabel"
                  style="flex:1; display:flex; justify-content:space-between; font-weight:bold; color:var(--green);"
                  title="">
                  <span>üìê –ö–æ–Ω—Ç–∞–∫—Ç-–ª–∏—Å—Ç 3√ó3</span>
                  <input type="checkbox" id="grid3x3Mode">
                </label>
                <label class="toggle-label" id="maxConsistencyLabel"
                  style="flex:1; display:flex; justify-content:space-between; font-weight:bold; color:var(--orange);"
                  title="">
                  <span>üîí –ú–∞–∫—Å. –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å</span>
                  <input type="checkbox" id="maxConsistency">
                </label>
              </div>
            </div>
          </div>

          <!-- Presets -->
          <div class="section" id="presetsSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-green">‚ö°</span> –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ –ø—Ä–µ—Å–µ—Ç—ã <span class="help-tip">?<span
                    class="tip-text">–ü—Ä–µ—Å–µ—Ç—ã
                    ‚Äî
                    –≥–æ—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —Ç–∏–ø–æ–≤—ã—Ö –∑–∞–¥–∞—á. –û–¥–Ω–∏–º –∫–ª–∏–∫–æ–º –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –≤—Å–µ
                    –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø–æ–¥–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª—é–±–æ–π –ø—É–Ω–∫—Ç.</span></span></h2>
            </div>
            <div class="section-content">
              <div class="option-group" id="presetGrid"><button class="option-btn" data-preset-index="0"
                  style="border-color: var(--green); border-width: 2px;">üé¨ –ö–∏–Ω–æ–ø–æ—Ä—Ç—Ä–µ—Ç</button><button
                  class="option-btn" data-preset-index="1" style="border-color: var(--green); border-width: 2px;">üì¶
                  –ü—Ä–µ–¥–º–µ—Ç–Ω–∞—è —Å—ä—ë–º–∫–∞</button><button class="option-btn" data-preset-index="2"
                  style="border-color: var(--green); border-width: 2px;">üåÉ –ù–µ–æ–Ω–æ–≤—ã–π –∫–∏–±–µ—Ä–ø–∞–Ω–∫</button><button
                  class="option-btn" data-preset-index="3" style="border-color: var(--green); border-width: 2px;">üé®
                  –ö–æ–Ω—Ü–µ–ø—Ç-–∞—Ä—Ç</button><button class="option-btn" data-preset-index="4"
                  style="border-color: var(--green); border-width: 2px;">üíº –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è —Å—ä—ë–º–∫–∞</button><button
                  class="option-btn" data-preset-index="5" style="border-color: var(--green); border-width: 2px;">üì∫
                  –†–µ–∫–ª–∞–º–Ω—ã–π —Ä–æ–ª–∏–∫</button><button class="option-btn" data-preset-index="6"
                  style="border-color: var(--green); border-width: 2px;">üî¨ –ú–∞–∫—Ä–æ —Ä–µ–∫–ª–∞–º–∞</button><button
                  class="option-btn" data-preset-index="7" style="border-color: var(--green); border-width: 2px;">üß© UI
                  –î–∏–∑–∞–π–Ω</button><button class="option-btn" data-preset-index="8"
                  style="border-color: var(--green); border-width: 2px;">üìä –ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞</button><button
                  class="option-btn" data-preset-index="9" style="border-color: var(--green); border-width: 2px;">‚ú≥Ô∏è
                  –õ–æ–≥–æ—Ç–∏–ø</button><button class="option-btn" data-preset-index="10"
                  style="border-color: var(--green); border-width: 2px;">üßç –õ–∏—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</button><button
                  class="option-btn" data-preset-index="11" style="border-color: var(--green); border-width: 2px;">üì∑
                  –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç</button><button class="option-btn" data-preset-index="12"
                  style="border-color: var(--green); border-width: 2px;">üèôÔ∏è –£–ª–∏—á–Ω—ã–π —Ñ–æ—Ç–æ—Ä–µ–∞–ª–∏–∑–º</button><button
                  class="option-btn" data-preset-index="13" style="border-color: var(--green); border-width: 2px;">üíé
                  Beauty / –ö–æ—Å–º–µ—Ç–∏–∫–∞</button></div>
              <div class="hint">–ü—Ä–µ—Å–µ—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞ –æ–¥–∏–Ω –∫–ª–∏–∫. –ú–æ–∂–Ω–æ –ø–æ–¥–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ.</div>
            </div>
          </div>

          <!-- Fashion -->
          <div class="section collapsed" id="fashionFoodSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-green">üëó</span> Fashion Editorial <span class="help-tip">?<span
                    class="tip-text">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è Fashion-—Å—ä—ë–º–æ–∫. –ó–∞–¥–∞—é—Ç –ø–æ–ª–Ω—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å
                    (—Å–≤–µ—Ç, —Ü–≤–µ—Ç, –∫–æ–º–ø–æ–∑–∏—Ü–∏—é). –ë–ª–æ–∫–∏—Ä—É—é—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫—Ä–æ–º–µ —Ñ–æ—Ä–º–∞—Ç–∞ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.</span></span>
              </h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <span class="sub-label">Fashion / Editorial</span>
              <div class="option-group">
                <button class="option-btn" data-group="fashionFoodStyle" data-value="gucci-retro"
                  title="–ö–∞–º–ø–∞–Ω–∏—è Gucci, —Ä–µ—Ç—Ä–æ-–º–∞–∫—Å–∏–º–∞–ª–∏–∑–º, –∂—ë—Å—Ç–∫–∞—è –≤—Å–ø—ã—à–∫–∞">üëú Gucci Retro</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="balenciaga-dystopian"
                  title="–ü–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏–∫–∞ Balenciaga, —Ö–æ–ª–æ–¥–Ω—ã–π –∏–Ω–¥–∞—Å—Ç—Ä–∏–∞–ª">üï∂Ô∏è Balenciaga</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="vogue-polished"
                  title="–û–±–ª–æ–∂–∫–∞ Vogue, —Å—Ç–∏–ª—å –≠–Ω–Ω–∏ –õ–µ–π–±–æ–≤–∏—Ü, –∏–¥–µ–∞–ª—å–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ">üì∏ Vogue US</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="saint-laurent-noir"
                  title="–†–æ–∫-—à–∏–∫ Saint Laurent, —á—ë—Ä–Ω–æ-–±–µ–ª–æ–µ, –∫–æ–Ω—Ç—Ä–∞—Å—Ç">üé∏ Saint Laurent</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="dior-romance"
                  title="Dior –≤—ã—Å–æ–∫–∞—è –º–æ–¥–∞, —ç—Ñ–∏—Ä–Ω–æ—Å—Ç—å, –ø–∞—Å—Ç–µ–ª—å, –º–µ—á—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å">üå∏ Dior Romance</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="chanel-parisian-minimal"
                  title="–¢–∏—Ö–∞—è —Ä–æ—Å–∫–æ—à—å Chanel, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞, —á–∏—Å—Ç–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è">üñ§ Chanel Minimal</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="prada-intellectual-cool"
                  title="Prada: –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π minimal chic, –ø—Ä–æ—Ö–ª–∞–¥–Ω–∞—è —Å—Ç—Ä–æ–≥–æ—Å—Ç—å">üßä Prada Cool</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="versace-baroque-flash"
                  title="Versace: –±–∞—Ä–æ—á–Ω—ã–π –≥–ª—è–Ω–µ—Ü, –∑–æ–ª–æ—Ç–æ, –¥—Ä–∞–º–∞—Ç–∏—á–Ω–∞—è –≤—Å–ø—ã—à–∫–∞">‚öúÔ∏è Versace Baroque</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="calvin-klein-clean-90s"
                  title="Calvin Klein 90s: —á–∏—Å—Ç—ã–π —Å–≤–µ—Ç, –∫–æ–∂–∞, –º–∏–Ω–∏–º–∞–ª–∏–∑–º">ü§ç CK 90s Clean</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="ysl-smoke-neon-night"
                  title="YSL night editorial: –Ω–µ–æ–Ω, –¥—ã–º, –∫–ª—É–±–Ω–∞—è –¥–µ—Ä–∑–æ—Å—Ç—å">üåô YSL Night</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="valentino-red-opera"
                  title="Valentino Red: –¥—Ä–∞–º–∞—Ç–∏—á–Ω—ã–π –∫—Ä–∞—Å–Ω—ã–π, —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω–∞—è —Ä–æ—Å–∫–æ—à—å">‚ù§Ô∏è Valentino Red</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="loewe-art-house"
                  title="Loewe art-house: —Å—é—Ä—Ä–µ–∞–ª–∏–∑–º, –æ–±—ä–µ–∫—Ç–Ω–æ—Å—Ç—å, –º—É–∑–µ–π–Ω–∞—è –ø–æ–¥–∞—á–∞">üåÄ Loewe Art House</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="miu-miu-youth-film"
                  title="Miu Miu: —é–Ω–æ—Å—Ç—å, –ø–ª—ë–Ω–æ—á–Ω–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞, –≤–∏–Ω—Ç–∞–∂–Ω–∞—è —Ä–æ–º–∞–Ω—Ç–∏–∫–∞">üéûÔ∏è Miu Miu Youth</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="alexander-mcqueen-gothic-romance"
                  title="McQueen: –≥–æ—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ–º–∞–Ω—Ç–∏–∫–∞, –¥—Ä–∞–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–Ω–∏">üïØÔ∏è McQueen Gothic</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="jacquemus-sun-bleached"
                  title="Jacquemus: —é–∂–Ω–æ–µ —Å–æ–ª–Ω—Ü–µ, –≤—ã—Ü–≤–µ—Ç—à–∏–µ –ø–∞—Å—Ç–µ–ª–∏, –æ—Ç–ø—É—Å–∫–Ω–æ–π luxe">‚òÄÔ∏è Jacquemus Sun</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="bottega-veneta-tactile-luxury"
                  title="Bottega: —Ç–∞–∫—Ç–∏–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –ø—Ä–∏–≥–ª—É—à—ë–Ω–Ω—ã–π luxe, —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–æ—Å—Ç—å">üßµ Bottega Tactile</button>
              </div>
            </div>
          </div>

          <!-- Food Commercial -->
          <div class="section collapsed" id="foodCommercialSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-green">üçú</span> Food Commercial <span class="help-tip">?<span
                    class="tip-text">–ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–µ food-–ø—Ä–µ—Å–µ—Ç—ã –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω–æ–π –∏ editorial —Å—ä—ë–º–∫–∏ –µ–¥—ã. –ó–∞–¥–∞—é—Ç –ø–æ–ª–Ω—ã–π —Å—Ç–∏–ª—å
                    (—Å–≤–µ—Ç, —Ü–≤–µ—Ç, –∫–æ–º–ø–æ–∑–∏—Ü–∏—é) –∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.</span></span>
              </h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group">
                <button class="option-btn" data-group="fashionFoodStyle" data-value="fast-food-pop"
                  title="–°—Ç–∏–ª—å McDonald&#39;s, –ø–æ–ø-—Ü–≤–µ—Ç–∞, –≤—ã—Å–æ–∫–∏–π –∫–ª—é—á">üçî Fast Food Pop</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="fine-dining"
                  title="–ú–∏—à–ª–µ–Ω–æ–≤—Å–∫–∞—è –∑–≤–µ–∑–¥–∞, —Ç—ë–º–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞, –ø—Ä–æ–∂–µ–∫—Ç–æ—Ä">üçΩÔ∏è Fine Dining</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="rustic-lifestyle"
                  title="–°—Ç–∏–ª—å Bon App√©tit, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–µ—Ç, —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –±–µ—Å–ø–æ—Ä—è–¥–æ–∫">ü•ñ Rustic Home</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="cafe-moody"
                  title="–ö–æ—Ñ–µ–π–Ω—è, –ø–∞—Ä, —Ç—ë–ø–ª—ã–π –ª–∞–º–ø–æ–≤—ã–π —Å–≤–µ—Ç, —É—é—Ç">‚òï Moody Caf√©</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="beverage-splash"
                  title="–í—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –≤—Å–ø–ª–µ—Å–∫, —Å–≤–µ–∂–µ—Å—Ç—å, —Ö–æ–ª–æ–¥, —Ä–µ–∫–ª–∞–º–∞">üçπ Beverage Ad</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="food-dark-moody-luxury"
                  title="–ú—Ä–∞—á–Ω–∞—è —Ä–æ—Å–∫–æ—à—å: chiaroscuro, –±–∞—Ä—Ö–∞—Ç–Ω—ã–µ —Ç–µ–Ω–∏, –ø—Ä–µ–º–∏—É–º-–æ–±—Ä–∞–∑">üñ§ Dark Luxury</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="food-high-key-airy"
                  title="–£—Ç—Ä–µ–Ω–Ω–∏–π high-key: —á–∏—Å—Ç–æ, –≤–æ–∑–¥—É—à–Ω–æ, —Å–≤–µ—Ç–ª–æ">ü§ç Morning Airy</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="food-golden-hour-rustic"
                  title="–¢—ë–ø–ª—ã–π –∑–æ–ª–æ—Ç–æ–π —á–∞—Å, –≤–∏–Ω—Ç–∞–∂–Ω–æ–µ –¥–µ—Ä–µ–≤–æ, —É—é—Ç–Ω–∞—è –¥–æ–º–∞—à–Ω—è—è –ø–æ–¥–∞—á–∞">üåÖ Rustic Warmth</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="food-modern-geometric"
                  title="–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–∏–Ω–∏–º–∞–ª–∏–∑–º: –≥–µ–æ–º–µ—Ç—Ä–∏—è, –±–∞–ª–∞–Ω—Å, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ">‚¨ú Modern
                  Minimal</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="food-neon-gloss"
                  title="–ù–µ–æ–Ω–æ–≤—ã–π –≥–ª—è–Ω–µ—Ü: teal/magenta, –æ—Ç—Ä–∞–∂–µ–Ω–∏—è, night vibes">üåÉ Neon Gloss</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="food-ethereal-dreamy"
                  title="–≠—Ñ–∏—Ä–Ω–∞—è —Å–∫–∞–∑–∫–∞: –∫–æ–Ω—Ç—Ä–æ–≤–æ–π –æ—Ä–µ–æ–ª, –º—è–≥–∫–∏–π —Ç—É–º–∞–Ω, –ø–∞—Å—Ç–µ–ª—å">ü´ß Ethereal Dream</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="food-macro-texture"
                  title="–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–µ –º–∞–∫—Ä–æ: —Ä–µ–ª—å–µ—Ñ, –º–∏–∫—Ä–æ–¥–µ—Ç–∞–ª–∏, —Ç–∞–∫—Ç–∏–ª—å–Ω–æ—Å—Ç—å">üîç Macro Texture</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="food-floating-hero"
                  title="Hero Shot: –ø—Ä–µ–¥–º–µ—Ç –ø–∞—Ä–∏—Ç –≤ –≤–æ–∑–¥—É—Ö–µ, –¥–∏–Ω–∞–º–∏–∫–∞ —Ä–µ–∫–ª–∞–º—ã">üöÄ Floating Hero</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="food-botanical-garden"
                  title="–°–≤–µ–∂–∞—è –ø—Ä–∏—Ä–æ–¥–Ω–∞—è –ø–æ–¥–∞—á–∞: –∑–µ–ª–µ–Ω—å, —Å–∞–¥, farm-to-table">üåø Botanical Garden</button>
                <button class="option-btn" data-group="fashionFoodStyle" data-value="food-romantic-candlelit"
                  title="–ò–Ω—Ç–∏–º–Ω—ã–π –≤–µ—á–µ—Ä: —Å–≤–µ—á–∏, —Ç—ë–ø–ª—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω–Ω—ã–π —Å–≤–µ—Ç, –ª—é–∫—Å">üïØÔ∏è Romantic Dinner</button>
              </div>
            </div>
          </div>

          <!-- Quick Style Presets ‚Äî moved to top of sidebar -->

          <!-- AI Model -->
          <div class="section collapsed" id="aiModelSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-purple">ü§ñ</span> AI –ú–æ–¥–µ–ª—å <span class="help-tip">?<span
                    class="tip-text">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–π—Ä–æ—Å–µ—Ç—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –ö–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å –∏–º–µ–µ—Ç —Å–≤–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–æ–º–ø—Ç–æ–≤.
                    Midjourney —Ç—Ä–µ–±—É–µ—Ç ¬´--¬ª –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, DALL¬∑E –∏ Flux ‚Äî –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫.</span></span></h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group">
                <button class="option-btn" data-group="aiModel" data-value="midjourney" title="">Midjourney</button>
                <button class="option-btn" data-group="aiModel" data-value="dall-e-3" title="">DALL¬∑E 3</button>
                <button class="option-btn" data-group="aiModel" data-value="stable-diffusion" title="">Stable
                  Diffusion</button>
                <button class="option-btn" data-group="aiModel" data-value="flux" title="">Flux</button>
                <button class="option-btn" data-group="aiModel" data-value="ideogram" title="">Ideogram</button>
                <button class="option-btn" data-group="aiModel" data-value="gemini-imagen" title="">Gemini
                  Imagen</button>
                <button class="option-btn" data-group="aiModel" data-value="chatgpt-image" title="">ChatGPT
                  Image</button>
                <button class="option-btn" data-group="aiModel" data-value="nano-banana-pro" title="">Nano Banana
                  Pro</button>
              </div>
              <div id="modelHint" class="hint" style="display: none;">SD: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤—ã, –≤–µ—Å–∞ —Ç–æ–∫–µ–Ω–æ–≤
                (word:1.3),
                LoRA. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç Flat.</div>
            </div>
          </div>

          <!-- Scene Description -->
          <div class="section collapsed" id="descriptionSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-purple">üéØ</span> –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã <span class="help-tip">?<span
                    class="tip-text">–ì–ª–∞–≤–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –ø—Ä–æ–º–ø—Ç–∞ ‚Äî —è–¥—Ä–æ –≤–∞—à–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ü–∏—à–∏—Ç–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –¥–ª—è
                    –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.<br><br><b>–°—Ç—Ä—É–∫—Ç—É—Ä–∞:</b><br>1. ¬´–ö—Ç–æ/–ß—Ç–æ¬ª ‚Äî –æ–ø–∏—à–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–≤–æ–∑—Ä–∞—Å—Ç,
                    –≤–Ω–µ—à–Ω–æ—Å—Ç—å,
                    –æ–¥–µ–∂–¥–∞)<br>2. ¬´–ì–¥–µ¬ª ‚Äî –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –ª–æ–∫–∞—Ü–∏—è<br>3. ¬´–î–µ–π—Å—Ç–≤–∏–µ/–ü–æ–∑–∞¬ª ‚Äî —á—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂<br>4. ¬´–î–µ—Ç–∞–ª–∏¬ª
                    ‚Äî
                    –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞, –ø–æ–≥–æ–¥–∞, —Ü–≤–µ—Ç–∞<br><br><b>–ü—Ä–∏–º–µ—Ä:</b> A woman in her 30s with auburn hair, wearing a
                    vintage
                    floral dress, standing at the edge of a misty lake at dawn, looking at the reflection</span></span>
              </h2>
            </div>
            <div class="section-content">
              <textarea class="input-field" id="mainSubject"
                placeholder="–ú—É–∂—á–∏–Ω–∞ 30 –ª–µ—Ç —Å—Ç–æ–∏—Ç –Ω–∞ –±–∞–ª–∫–æ–Ω–µ –Ω–µ–±–æ—Å–∫—Ä—ë–±–∞ —Å –≤–∏–¥–æ–º –Ω–∞ –Ω–µ–æ–Ω–æ–≤—ã–π –≥–æ—Ä–æ–¥ –≤ —Å—É–º–µ—Ä–∫–∞—Ö..."
                oninput="handleInput()"></textarea>
              <div style="display:flex;gap:8px;align-items:center;margin-top:6px;flex-wrap:wrap;">
                <button type="button" id="translateBtn" class="btn btn-ghost"
                  style="min-width:auto;padding:6px 14px;font-size:.82em;" onclick="translateScene()">
                  üåê –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ EN
                </button>
                <button type="button" id="enhanceBtn" class="btn btn-ghost"
                  style="min-width:auto;padding:6px 14px;font-size:.82em; color:var(--accent-k); border-color:rgba(0,212,255,0.3);"
                  onclick="enhancePrompt()">
                  <span>‚ú¶</span> –£–ª—É—á—à–∏—Ç—å AI
                </button>
                <span id="translateStatus" style="font-size:.78em;color:var(--text-muted);"></span>
              </div>

              <div class="hint">–ú–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º ‚Äî –Ω–∞–∂–º–∏—Ç–µ ¬´–ü–µ—Ä–µ–≤–µ—Å—Ç–∏¬ª –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π. –°–Ω–∞—á–∞–ª–∞
                ¬´–∫—Ç–æ/—á—Ç–æ¬ª, –∑–∞—Ç–µ–º ¬´–≥–¥–µ¬ª, –ø–æ—Ç–æ–º ¬´—Å—Ç–∏–ª—å¬ª.
              </div>
            </div>
          </div>

          <!-- Emotions -->
          <div class="section collapsed" id="emotionSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-orange">üé≠</span> –≠–º–æ—Ü–∏–∏ <span class="help-tip">?<span
                    class="tip-text"><b>–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–ª–æ–π</b> ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –≥–ª—É–±–æ–∫—É—é –ø—Ä–æ—Ä–∞–±–æ—Ç–∫—É –º–∏–º–∏–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
                    –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.<br><br><b>–í–ª–∏—è–µ—Ç –Ω–∞:</b> –º–∏–∫—Ä–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—è –ª–∏—Ü–∞, —Ä–∞–±–æ—Ç—É –º—ã—à—Ü, –≤–∑–≥–ª—è–¥, –∞ —Ç–∞–∫–∂–µ –Ω–∞ –æ—Å–≤–µ—â–µ–Ω–∏–µ
                    (–¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è).<br><br><b>–°–æ–≤–µ—Ç:</b> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–ë–µ–∑–º—è—Ç–µ–∂–Ω–æ–µ –°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ" (Serene),
                    —á—Ç–æ–±—ã
                    —É–±—Ä–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ —ç–º–æ—Ü–∏–∏ AI –∏ –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –ª–∏—Ü–æ.</span></span></h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <span class="sub-label">–°–∏–ª—å–Ω—ã–µ</span>
              <div class="option-group">
                <button class="option-btn" data-group="emotion" data-value="Euphoria"
                  title="–ù–µ–ø–æ–¥–¥–µ–ª—å–Ω–∞—è —ç–π—Ñ–æ—Ä–∏—è, —Å–º–µ—Ö –≥–ª–∞–∑–∞–º–∏, Duchenne smile">–ò—Å–∫—Ä–µ–Ω–Ω—è—è –≠–π—Ñ–æ—Ä–∏—è</button>
                <button class="option-btn" data-group="emotion" data-value="Grief"
                  title="–ì–ª—É–±–æ–∫–æ–µ –≥–æ—Ä–µ, –æ–º–µ–≥–∞ –Ω–∞ –ª–±—É, —Å—Ç–µ–∫–ª—è–Ω–Ω—ã–µ –≥–ª–∞–∑–∞">–ì–ª—É–±–æ–∫–æ–µ –ì–æ—Ä–µ</button>
                <button class="option-btn" data-group="emotion" data-value="Rage"
                  title="–°–∫—Ä—ã—Ç–∞—è —è—Ä–æ—Å—Ç—å, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –ø—É–ª—å—Å–∏—Ä—É—é—â–∞—è –≤–µ–Ω–∞">–°–∫—Ä—ã—Ç–∞—è –Ø—Ä–æ—Å—Ç—å</button>
                <button class="option-btn" data-group="emotion" data-value="Terror"
                  title="–ñ–∏–≤–æ—Ç–Ω—ã–π —É–∂–∞—Å, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∑—Ä–∞—á–∫–∏, —Å–≤–µ—Ç —Å–Ω–∏–∑—É">–ñ–∏–≤–æ—Ç–Ω—ã–π –£–∂–∞—Å</button>
                <button class="option-btn" data-group="emotion" data-value="Disgust"
                  title="–û—Ç–≤—Ä–∞—â–µ–Ω–∏–µ, —Å–º–æ—Ä—â–µ–Ω–Ω—ã–π –Ω–æ—Å, –∑–µ–ª—ë–Ω—ã–π –ø–æ–¥—Ç–æ–Ω">–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –û—Ç–≤—Ä–∞—â–µ–Ω–∏–µ</button>
                <button class="option-btn" data-group="emotion" data-value="Shock"
                  title="–ü–æ–ª–Ω—ã–π —à–æ–∫, –æ—Ç–≤–∏—Å—à–∞—è —á–µ–ª—é—Å—Ç—å, –∑–∞—Å—Ç—ã–≤—à–∏–π –≤–∑–≥–ª—è–¥">–ü–æ–ª–Ω—ã–π –®–æ–∫</button>
                <button class="option-btn" data-group="emotion" data-value="Contempt"
                  title="–ü—Ä–µ–∑—Ä–µ–Ω–∏–µ, —É—Ö–º—ã–ª–∫–∞, –∞—Å–∏–º–º–µ—Ç—Ä–∏—è –ª–∏—Ü–∞">–°–∫–µ–ø—Ç–∏—á–µ—Å–∫–æ–µ –ü—Ä–µ–∑—Ä–µ–Ω–∏–µ</button>
                <button class="option-btn" data-group="emotion" data-value="Pain"
                  title="–ú—É—á–∏—Ç–µ–ª—å–Ω–∞—è –±–æ–ª—å, –∫—Ä–∏–∫, –ø–æ—Ç, –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π —Å–≤–µ—Ç">–ú—É—á–∏—Ç–µ–ª—å–Ω–∞—è –ë–æ–ª—å</button>
              </div>

              <span class="sub-label">–°–¥–µ—Ä–∂–∞–Ω–Ω—ã–µ</span>
              <div class="option-group">
                <button class="option-btn" data-group="emotion" data-value="Pensive"
                  title="–ó–∞–¥—É–º—á–∏–≤–æ—Å—Ç—å, –≤–∑–≥–ª—è–¥ –≤–¥–∞–ª—å, —Ä—É–∫–∞ —É –ª–∏—Ü–∞">–ó–∞–¥—É–º—á–∏–≤–æ—Å—Ç—å</button>
                <button class="option-btn" data-group="emotion" data-value="Curious"
                  title="–õ—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ, –ª–µ–≥–∫–∏–π –Ω–∞–∫–ª–æ–Ω –≥–æ–ª–æ–≤—ã, –∂–∏–≤–æ–π –∏–Ω—Ç–µ—Ä–µ—Å">–õ—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ</button>
                <button class="option-btn" data-group="emotion" data-value="Melancholic"
                  title="–ú–µ–ª–∞–Ω—Ö–æ–ª–∏—è, –º—è–≥–∫–∞—è –≥—Ä—É—Å—Ç—å, –¥–æ–∂–¥–ª–∏–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ">–ú–µ–ª–∞–Ω—Ö–æ–ª–∏—è</button>
                <button class="option-btn" data-group="emotion" data-value="Hopeful"
                  title="–ù–∞–¥–µ–∂–¥–∞, –≤–∑–≥–ª—è–¥ –≤–≤–µ—Ä—Ö, –º—è–≥–∫–∞—è —É–ª—ã–±–∫–∞">–ù–∞–¥–µ–∂–¥–∞</button>
                <button class="option-btn" data-group="emotion" data-value="Skeptical"
                  title="–°–∫–µ–ø—Å–∏—Å, –ø—Ä–∏–ø–æ–¥–Ω—è—Ç–∞—è –±—Ä–æ–≤—å, –Ω–µ–¥–æ–≤–µ—Ä–∏–µ">–°–∫–µ–ø—Å–∏—Å</button>
                <button class="option-btn" data-group="emotion" data-value="Amused"
                  title="–õ–µ–≥–∫–∞—è —É—Å–º–µ—à–∫–∞, —Å–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Å–º–µ—Ö, –∏—Å–∫–æ—Ä–∫–∞ –≤ –≥–ª–∞–∑–∞—Ö">–£—Å–º–µ—à–∫–∞</button>
                <button class="option-btn" data-group="emotion" data-value="Determined"
                  title="–†–µ—à–∏–º–æ—Å—Ç—å, —Ç–≤–µ—Ä–¥—ã–π –≤–∑–≥–ª—è–¥, —Å–∂–∞—Ç—ã–µ –≥—É–±—ã">–†–µ—à–∏–º–æ—Å—Ç—å</button>
                <button class="option-btn" data-group="emotion" data-value="Wistful"
                  title="–¢–æ—Å–∫–∞, –º–µ—á—Ç–∞—Ç–µ–ª—å–Ω—ã–π –≤–∑–≥–ª—è–¥, —Ä–æ–º–∞–Ω—Ç–∏—á–Ω–∞—è –≥—Ä—É—Å—Ç—å">–°–≤–µ—Ç–ª–∞—è –¢–æ—Å–∫–∞</button>
                <button class="option-btn" data-group="emotion" data-value="Relieved"
                  title="–û–±–ª–µ–≥—á–µ–Ω–∏–µ, –≤—ã–¥–æ—Ö, —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω—ã–µ –ø–ª–µ—á–∏">–û–±–ª–µ–≥—á–µ–Ω–∏–µ</button>
                <button class="option-btn" data-group="emotion" data-value="Intrigued"
                  title="–ò–Ω—Ç—Ä–∏–≥–∞, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏—â—É—Ä, —Ñ–æ–∫—É—Å">–ò–Ω—Ç—Ä–∏–≥–∞</button>
                <button class="option-btn" data-group="emotion" data-value="Nostalgia"
                  title="–°–≤–µ—Ç–ª–∞—è –≥—Ä—É—Å—Ç—å, —É–ª—ã–±–∫–∞ —Å–∫–≤–æ–∑—å —Å–ª—ë–∑—ã, –º—è–≥–∫–∏–π —Ñ–æ–∫—É—Å">–ù–æ—Å—Ç–∞–ª—å–≥–∏—è</button>
                <button class="option-btn" data-group="emotion" data-value="Serene"
                  title="–ü–æ–ª–Ω–æ–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ, deadpan, –ø–∞—Å–ø–æ—Ä—Ç–Ω–æ–µ —Ñ–æ—Ç–æ">–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ</button>
              </div>

            </div>
          </div>

          <!-- Aspect Ratio -->
          <div class="section collapsed" id="aspectRatioSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-purple">üìê</span> –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω <span class="help-tip">?<span
                    class="tip-text">1:1 ‚Äî Instagram. 16:9 ‚Äî YouTube, –∫–∏–Ω–æ. 9:16 ‚Äî Stories/Reels. 21:9 ‚Äî —É–ª—å—Ç—Ä–∞-—à–∏—Ä–æ–∫–∏–π
                    –∫–∏–Ω–æ–∫–∞–¥—Ä. 3:4 ‚Äî Pinterest, –ø–æ—Ä—Ç—Ä–µ—Ç—ã. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.</span></span></h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group" id="aspectRatioGroup">
                <button class="option-btn" data-group="aspectRatio" data-value="1:1" title="">1:1 –ö–≤–∞–¥—Ä–∞—Ç</button>
                <button class="option-btn" data-group="aspectRatio" data-value="16:9" title="">16:9 –®–∏—Ä–æ–∫–∏–π</button>
                <button class="option-btn" data-group="aspectRatio" data-value="9:16" title="">9:16
                  –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π</button>
                <button class="option-btn" data-group="aspectRatio" data-value="4:3" title="">4:3 –°—Ç–∞–Ω–¥–∞—Ä—Ç</button>
                <button class="option-btn" data-group="aspectRatio" data-value="3:4" title="">3:4 –ü–æ—Ä—Ç—Ä–µ—Ç</button>
                <button class="option-btn" data-group="aspectRatio" data-value="21:9" title="">21:9 –ö–∏–Ω–æ</button>
                <button class="option-btn" data-group="aspectRatio" data-value="2:3" title="">2:3 –ö–ª–∞—Å—Å–∏–∫–∞</button>
                <button class="option-btn" data-group="aspectRatio" data-value="3:2" title="">3:2 –ü–µ–π–∑–∞–∂</button>
              </div>
            </div>
          </div>

          <!-- Resolution -->
          <div class="section collapsed" id="resolutionSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-purple">üìè</span> –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ <span class="help-tip">?<span
                    class="tip-text">–†–∞–∑–º–µ—Ä –≤ –ø–∏–∫—Å–µ–ª—è—Ö. –î–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π ‚Äî Full HD. –î–ª—è –ø–µ—á–∞—Ç–∏ ‚Äî 4K –∏ –≤—ã—à–µ. –ó–∞–≤–∏—Å–∏—Ç –æ—Ç
                    –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω.</span></span></h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div id="resolutionInfo" class="info-box" style="display: block;">–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω.
              </div>
              <div id="resolutionOptions" class="option-group" style="display: none;"></div>
            </div>
          </div>
          <div class="section collapsed" id="cameraSectionV2">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-blue">üì∑</span> –ö–∞–º–µ—Ä–∞ <span class="help-tip">?<span class="tip-text">–í—ã–±–æ—Ä
                    –∫–∞–º–µ—Ä—ã –∑–∞–¥–∞—ë—Ç —Ç–µ–≥–∏ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ/–ø–ª—ë–Ω–æ—á–Ω–æ–≥–æ –∫–∏–Ω–æ–±–æ–¥–∏, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —Ç–µ–∫—Å—Ç—É—Ä—É, –∑–µ—Ä–Ω–æ –∏ —Ü–≤–µ—Ç.</span></span>
              </h2><span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group" id="cameraBodyGroup"><button class="option-btn" data-group="cameraBody"
                  data-value="shot on ARRI Alexa 35, digital cinema, organic textures, high dynamic range"
                  title="–ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –∫–∏–Ω–æ, 17 —Å—Ç–æ–ø–æ–≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞">ARRI Alexa
                  35</button><button class="option-btn" data-group="cameraBody"
                  data-value="shot on Panavision Panaflex Gold II, 35mm film, classic film look, organic grain"
                  title="–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è 35–º–º –∫–∞–º–µ—Ä–∞ –ì–æ–ª–ª–∏–≤—É–¥–∞">Panavision Panaflex Gold II</button><button
                  class="option-btn" data-group="cameraBody"
                  data-value="shot on IMAX MKIV, imax 70mm, 15/70mm film, massive resolution, expansive scale"
                  title="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 15/70–º–º –¥–ª—è –∏–º–º–µ—Ä—Å–∏–≤–Ω–æ–≥–æ –∫–∏–Ω–æ">IMAX MKIV</button><button
                  class="option-btn" data-group="cameraBody"
                  data-value="shot on Sony Venice 2, full frame, dual base iso, rich colors"
                  title="–ü–æ–ª–Ω–æ–∫–∞–¥—Ä–æ–≤–∞—è, –æ—Ç–ª–∏—á–Ω–∞—è —Ü–≤–µ—Ç–æ–ø–µ—Ä–µ–¥–∞—á–∞ (Top Gun: Maverick)">Sony Venice 2</button><button
                  class="option-btn" data-group="cameraBody"
                  data-value="shot on RED V-RAPTOR, 8k resolution, high frame rate, sharp detail"
                  title="8K VV —Å–µ–Ω—Å–æ—Ä, –≤—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤">RED V-RAPTOR</button><button class="option-btn"
                  data-group="cameraBody"
                  data-value="shot on Blackmagic URSA Mini Pro 12K, 12k raw, film-like color science"
                  title="12K RAW, –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω–∞—è —Ü–≤–µ—Ç–æ–ø–µ—Ä–µ–¥–∞—á–∞">BMD URSA Mini Pro 12K</button><button
                  class="option-btn" data-group="cameraBody"
                  data-value="shot on Aaton XTR Prod, super 16mm, organic film grain, vintage aesthetic"
                  title="–ö–ª–∞—Å—Å–∏–∫–∞ Super 16–º–º, –≤–∏–Ω—Ç–∞–∂–Ω–∞—è —ç—Å—Ç–µ—Ç–∏–∫–∞">Aaton XTR Prod</button><button class="option-btn"
                  data-group="cameraBody"
                  data-value="shot on Technicolor 3-Strip, 1930s cinema, saturated colors, vibrant palette"
                  title="–í–∏–Ω—Ç–∞–∂ 1930-—Ö, –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞">Technicolor 3-Strip</button><button
                  class="option-btn" data-group="cameraBody"
                  data-value="shot on Bolex H16, 16mm film, mechanical feel, vintage home movie"
                  title="–ö—É–ª—å—Ç–æ–≤–∞—è 16–º–º, –∞–≤–∞–Ω–≥–∞—Ä–¥–Ω—ã–π –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ">Bolex H16</button><button class="option-btn"
                  data-group="cameraBody" data-value="shot on Super 8 film, nostalgic, heavy grain, warm tones"
                  title="–ù–æ—Å—Ç–∞–ª—å–≥–∏—è, –∫—Ä—É–ø–Ω–æ–µ –∑–µ—Ä–Ω–æ, —Ç—ë–ø–ª—ã–µ —Ç–æ–Ω–∞">Super 8</button><button class="option-btn"
                  data-group="cameraBody" data-value="shot on Mitchell BNC, golden age hollywood, classic cinema"
                  title="–†–∞–±–æ—á–∞—è –ª–æ—à–∞–¥–∫–∞ –ó–æ–ª–æ—Ç–æ–≥–æ –≤–µ–∫–∞ –ì–æ–ª–ª–∏–≤—É–¥–∞">Mitchell BNC</button><button class="option-btn"
                  data-group="cameraBody"
                  data-value="shot on Panavision System 65, 65mm film, epic vistas, extreme detail"
                  title="65–º–º –ø–ª—ë–Ω–∫–∞, —ç–ø–∏—á–µ—Å–∫–∏–µ –ø–∞–Ω–æ—Ä–∞–º—ã">Panavision System 65</button><button class="option-btn"
                  data-group="cameraBody"
                  data-value="shot on ARRIFLEX 765, 65mm film, visual clarity, shallow depth of field"
                  title="–°–∫–æ—Ä–æ—Å—Ç–Ω–∞—è 65–º–º, –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è —á—ë—Ç–∫–æ—Å—Ç—å">ARRIFLEX 765</button><button class="option-btn"
                  data-group="cameraBody"
                  data-value="shot on GoPro HERO 12, action camera, ultra wide, pov, fisheye distortion"
                  title="–≠–∫—à–Ω-–∫–∞–º–µ—Ä–∞, —É–ª—å—Ç—Ä–∞-—à–∏—Ä–æ–∫–∏–π —É–≥–æ–ª, POV">GoPro HERO 12</button><button class="option-btn"
                  data-group="cameraBody"
                  data-value="shot on iPhone 15 Pro Log, mobile cinematography, sharp digital look"
                  title="–ú–æ–±–∏–ª—å–Ω–∞—è –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—è, Log-–ø—Ä–æ—Ñ–∏–ª—å">iPhone 15 Pro Log</button><button class="option-btn"
                  data-group="cameraBody"
                  data-value="shot on Panasonic Lumix GH6, mft sensor, cinematic micro four thirds"
                  title="Micro Four Thirds, –æ—Ç–ª–∏—á–Ω–∞—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è">Panasonic Lumix GH6</button><button
                  class="option-btn" data-group="cameraBody"
                  data-value="shot through Canon K35 look, vintage glass, soft highlights, warm flares"
                  title="–í–∏–Ω—Ç–∞–∂–Ω—ã–π —Å—Ç–∏–ª—å 70-—Ö, –º—è–≥–∫–∏–µ –±–ª–∏–∫–∏">Canon K35 Look</button><button class="option-btn"
                  data-group="cameraBody"
                  data-value="shot through Cooke S4 look, the cooke look, dimensional images, smooth falloff"
                  title="–ó–Ω–∞–º–µ–Ω–∏—Ç—ã–π &#39;Cooke Look&#39;, –æ–±—ä—ë–º –∏ –º—è–≥–∫–æ—Å—Ç—å">Cooke S4 Look</button></div>
            </div>
          </div>
          <div class="section collapsed" id="lensSectionV2">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-blue">üî≠</span> –û–±—ä–µ–∫—Ç–∏–≤ / –û–ø—Ç–∏–∫–∞ <span class="help-tip">?<span
                    class="tip-text">–õ–∏–Ω–∑–∞
                    –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –±–æ–∫–µ, –±–ª–∏–∫–∏, –¥–∏—Å—Ç–æ—Ä—Å–∏—é, —Ü–≤–µ—Ç–æ–ø–µ—Ä–µ–¥–∞—á—É.</span></span></h2><span
                class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group" id="lensSystemGroup"><button class="option-btn" data-group="lens"
                  data-value="shot on Panavision Primo Primes, rich color saturation, smooth focus roll-off, hollywood blockbuster look, high fidelity texture"
                  title="–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –°—Ç–∞–Ω–¥–∞—Ä—Ç –∏–Ω–¥—É—Å—Ç—Ä–∏–∏, –∫—Ä–µ–º–æ–≤–æ–µ –±–æ–∫–µ">Panavision Primo Primes</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Arri Signature Primes, velvety bokeh, magnetic skin tones, ultra-smooth background separation, warm and natural atmosphere"
                  title="–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –¢—ë–ø–ª—ã–µ —Ç–æ–Ω–∞, –±–∞—Ä—Ö–∞—Ç–Ω–æ–µ –±–æ–∫–µ">Arri Signature Primes</button><button
                  class="option-btn" data-group="lens"
                  data-value="Shot on Cooke S4/i prime lens, The Cooke Look, warm cinematic color tone, extremely pleasing skin tones, smooth focus falloff, spherical lens, gentle contrast"
                  title="–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –ó–Ω–∞–º–µ–Ω–∏—Ç—ã–π &#39;Cooke Look&#39;">Cooke S4/i</button><button class="option-btn"
                  data-group="lens"
                  data-value="Shot on Panavision Primo Anamorphic lenses, 2x squeeze, horizontal blue lens flares, high contrast, sharp resolution, negligible distortion, oval bokeh"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –°–∏–Ω–∏–µ –±–ª–∏–∫–∏, –æ–≤–∞–ª—å–Ω–æ–µ –±–æ–∫–µ">Panavision Primo Anamorphic</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Panavision C-Series Anamorphic, vintage sci-fi aesthetic, distinct blue streak flares, oval bokeh shapes, soft edges, organic imperfections"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –í–∏–Ω—Ç–∞–∂, —Å–∏–Ω–∏–µ –ø–æ–ª–æ—Å—ã">Panavision C-Series</button><button class="option-btn"
                  data-group="lens"
                  data-value="Shot on Atlas Orion Anamorphic lenses, distinctive blue streak lens flares, organic barrel distortion, painterly watercolor bokeh, 2x anamorphic squeeze"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ñ–∏–≤–æ–ø–∏—Å–Ω–æ–µ –±–æ–∫–µ, –±–æ—á–∫–æ–æ–±—Ä–∞–∑–Ω–∞—è –¥–∏—Å—Ç–æ—Ä—Å–∏—è">Atlas Orion Anamorphic</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Panavision E-Series Anamorphic, classic 80s action movie look, sharp but organic, controlled horizontal flares, elegant depth of field"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ö–ª–∞—Å—Å–∏–∫–∞ 80-—Ö">Panavision E-Series</button><button class="option-btn"
                  data-group="lens"
                  data-value="shot on Zeiss Master Anamorphics, distortion-free wide screen, futuristic clean look, precise blue lens flares, sharp corner-to-corner"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ë–µ–∑ –¥–∏—Å—Ç–æ—Ä—Å–∏–∏, —Ñ—É—Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π">Zeiss Master Anamorphics</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Hawk Class-X Anamorphic, retro crystal clear look, punchy contrast, distinctive anamorphic character"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –†–µ—Ç—Ä–æ, –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç">Hawk Class-X</button><button class="option-btn"
                  data-group="lens"
                  data-value="shot on Canon K-35 vintage lenses, dreamy golden halation, soft glowing highlights, low contrast vintage vibe, warm retro color palette"
                  title="–í–∏–Ω—Ç–∞–∂–Ω—ã–µ / –ó–æ–ª–æ—Ç–∞—è –≥–∞–ª–∞—Ü–∏—è, –º—è–≥–∫–∏–µ –±–ª–∏–∫–∏ 70-—Ö">Canon K-35</button><button class="option-btn"
                  data-group="lens"
                  data-value="shot on Laowa Probe lens, bug-eye perspective, extreme close-up macro, unusual wide angle depth, immersive texture details"
                  title="–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ / –ú–∞–∫—Ä–æ-–∑–æ–Ω–¥, —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π –º–∞–∫—Ä–æ">Laowa Macro Probe</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Lensbaby, selective focus sweet spot, heavy radial blur, dreamlike distorted atmosphere, miniature effect tilt-shift"
                  title="–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ / –¢–∏–ª—Ç-—à–∏—Ñ—Ç, –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–æ–∫—É—Å">Lensbaby</button><button class="option-btn"
                  data-group="lens"
                  data-value="shot on Arri ALFA lenses, textured cinematic image, dreamy atmosphere, soft edges, unique large format character"
                  title="–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ / –¢–µ–∫—Å—Ç—É—Ä–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∫—Ä—É–ø–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞">Arri ALFA</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Panavision H-Series Anamorphic, glamorous soft focus, warm cinematic tones, organic film-like texture, restrained flares"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ì–ª–∞–º—É—Ä–Ω–∞—è –º—è–≥–∫–æ—Å—Ç—å, –≤–∏–Ω—Ç–∞–∂–Ω–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞">Panavision H-Series</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Panavision Ultra Vista, ultra-wide anamorphic format, expansive cinematic scope, soft lighting gradients, high resolution details"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –£–ª—å—Ç—Ä–∞-—à–∏—Ä–æ–∫–∏–π —Ñ–æ—Ä–º–∞—Ç">Panavision Ultra Vista</button><button class="option-btn"
                  data-group="lens"
                  data-value="shot on Panavision T-Series Anamorphic, huge oval lens flares, high speed cinematic look, rich color saturation, modern anamorphic clarity"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –û–≥—Ä–æ–º–Ω—ã–µ –æ–≤–∞–ª—å–Ω—ã–µ –±–ª–∏–∫–∏">Panavision T-Series</button><button class="option-btn"
                  data-group="lens"
                  data-value="shot on Hawk Vantage One, ultra-shallow depth of field, T1.0 aperture look, soft vintage coating, creamy background separation"
                  title="–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / T1.0, —É–ª—å—Ç—Ä–∞-–º–∞–ª–∞—è –ì–†–ò–ü">Hawk Vantage One</button><button class="option-btn"
                  data-group="lens"
                  data-value="shot on Zeiss Super Speed, 70s grit aesthetic, glowing light sources, soft but detailed sharpness, iconic fast lens character"
                  title="–í–∏–Ω—Ç–∞–∂–Ω—ã–µ / –°—Ç–∏–ª—å &#39;–¢–∞–∫—Å–∏—Å—Ç–∞&#39;, —Ç—Ä–µ—É–≥–æ–ª—å–Ω–æ–µ –±–æ–∫–µ">Zeiss Super Speed</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Panavision Primo Zooms, high-end blockbuster look, punchy contrast, crisp details, 90s/00s feature film texture"
                  title="–ó—É–º / –ì–æ–ª–ª–∏–≤—É–¥—Å–∫–∏–π –±–ª–æ–∫–±–∞—Å—Ç–µ—Ä">Panavision Primo Zooms</button><button class="option-btn"
                  data-group="lens"
                  data-value="shot on Sigma Cine Lenses, clinical sharpness, modern digital clarity, neutral color palette, technical precision"
                  title="–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –ö–ª–∏–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∑–∫–æ—Å—Ç—å, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞">Sigma Cine Lenses</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Panavision Primo 70, ultra-clean digital rendering, edge-to-edge sharpness, high contrast, perfect for 8K sensors"
                  title="–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –î–ª—è 8K —Å–µ–Ω—Å–æ—Ä–æ–≤, –∞–±—Å–æ–ª—é—Ç–Ω–∞—è —Ä–µ–∑–∫–æ—Å—Ç—å">Panavision Primo 70</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Zeiss Ultra Prime, distortion-free wide angle, perfect geometric lines, high micro-contrast, clinical yet cinematic precision"
                  title="–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –ë—Ä—É—Ç–∞–ª—å–Ω–∞—è —á–µ—Å—Ç–Ω–æ—Å—Ç—å, —Å—Ç–∞–Ω–¥–∞—Ä—Ç VFX">Zeiss Ultra Prime</button><button
                  class="option-btn" data-group="lens"
                  data-value="shot on Hawk V-Lite Anamorphic, intimate bokeh character, natural and realistic colors, classic 2x squeeze, compact cinematic feel"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ò–Ω—Ç–∏–º–Ω–æ–µ –±–æ–∫–µ, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞">Hawk V-Lite</button><button class="option-btn"
                  data-group="lens"
                  data-value="shot on JDC Xtal Xpress Anamorphic, heavy barrel distortion, intense golden flares, thick cinematic texture, gritty 80s character"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ó–æ–ª–æ—Ç—ã–µ –±–ª–∏–∫–∏, —Ö–∞—Ä–∞–∫—Ç–µ—Ä 80-—Ö">JDC Xtal Xpress</button></div>
            </div>
          </div>

          <div class="section collapsed" id="artStyleSectionV2">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-purple">üñºÔ∏è</span> –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ –º–µ–¥–∏—É–º</h2><span
                class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group" id="artStyleGroup"><button class="option-btn" data-group="artStyle"
                  data-value="–§–æ—Ç–æ—Ä–µ–∞–ª–∏–∑–º"
                  title="photorealistic, ultra-detailed, sharp focus, natural skin texture, 8K resolution">–§–æ—Ç–æ—Ä–µ–∞–ª–∏–∑–º</button><button
                  class="option-btn" data-group="artStyle" data-value="–ö–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–π"
                  title="cinematic film still, anamorphic lens flare, shallow DOF, color graded">–ö–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–π</button><button
                  class="option-btn" data-group="artStyle" data-value="–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è"
                  title="digital illustration, clean vector-like linework, cel-shaded, vibrant flat colors">–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è</button><button
                  class="option-btn" data-group="artStyle" data-value="–ú–∞—Å–ª–æ (–ö–∞—Ä—Ç–∏–Ω–∞)"
                  title="oil painting on linen canvas, visible impasto brushstrokes, layered glazing, rich pigment">–ú–∞—Å–ª–æ
                  (–ö–∞—Ä—Ç–∏–Ω–∞)</button><button class="option-btn" data-group="artStyle" data-value="–ê–Ω–∏–º–µ"
                  title="anime cel animation style, bold outlines, flat color fills, dramatic speed lines, large expressive eyes">–ê–Ω–∏–º–µ</button><button
                  class="option-btn" data-group="artStyle" data-value="–ö–æ–Ω—Ü–µ–ø—Ç-–∞—Ä—Ç"
                  title="concept art, painterly digital rendering, environment design, matte painting technique, atmospheric perspective">–ö–æ–Ω—Ü–µ–ø—Ç-–∞—Ä—Ç</button><button
                  class="option-btn" data-group="artStyle" data-value="–§–ª—ç—Ç / –í–µ–∫—Ç–æ—Ä"
                  title="flat vector design, solid color fills, no gradients, geometric shapes, scalable clean edges">–§–ª—ç—Ç
                  / –í–µ–∫—Ç–æ—Ä</button><button class="option-btn" data-group="artStyle" data-value="–ö–∞—Ä–∞–Ω–¥–∞—à–Ω—ã–π —Å–∫–µ—Ç—á"
                  title="graphite pencil sketch on textured paper, cross-hatching shading, visible paper grain, HB to 6B range">–ö–∞—Ä–∞–Ω–¥–∞—à–Ω—ã–π
                  —Å–∫–µ—Ç—á</button><button class="option-btn" data-group="artStyle" data-value="–ü–∏–∫—Å–µ–ª—å-–∞—Ä—Ç"
                  title="pixel art, 16-bit retro palette, dithering, anti-aliased edges, limited color count">–ü–∏–∫—Å–µ–ª—å-–∞—Ä—Ç</button><button
                  class="option-btn" data-group="artStyle" data-value="–ö–æ–º–∏–∫—Å"
                  title="comic book style, bold ink outlines, Ben-Day dot halftone shading, dynamic panel layout">–ö–æ–º–∏–∫—Å</button><button
                  class="option-btn" data-group="artStyle" data-value="3D –†–µ–Ω–¥–µ—Ä (–û–∫—Ç–∞–Ω)"
                  title="3D render, Octane render engine, subsurface scattering, PBR materials, global illumination">3D
                  –†–µ–Ω–¥–µ—Ä (–û–∫—Ç–∞–Ω)</button><button class="option-btn" data-group="artStyle" data-value="–í–∏–Ω—Ç–∞–∂ / –†–µ—Ç—Ä–æ"
                  title="vintage retro style, Kodak Portra 400 film emulation, grain, faded warm tones, light leaks">–í–∏–Ω—Ç–∞–∂
                  / –†–µ—Ç—Ä–æ</button><button class="option-btn" data-group="artStyle" data-value="–ú–∏–Ω–∏–º–∞–ª–∏–∑–º"
                  title="minimalist style, ample negative space, single focal point, muted two-tone palette, clean geometry">–ú–∏–Ω–∏–º–∞–ª–∏–∑–º</button><button
                  class="option-btn" data-group="artStyle" data-value="–ò–º–ø—Ä–µ—Å—Å–∏–æ–Ω–∏–∑–º"
                  title="Impressionist painting, short visible brushstrokes, en plein air, shifting natural light, Monet-inspired palette">–ò–º–ø—Ä–µ—Å—Å–∏–æ–Ω–∏–∑–º</button><button
                  class="option-btn" data-group="artStyle" data-value="–≠–∫—Å–ø—Ä–µ—Å—Å–∏–æ–Ω–∏–∑–º"
                  title="Expressionist style, distorted angular forms, intense saturated colors, emotional raw brushwork, Kirchner-inspired">–≠–∫—Å–ø—Ä–µ—Å—Å–∏–æ–Ω–∏–∑–º</button><button
                  class="option-btn" data-group="artStyle" data-value="–°—é—Ä—Ä–µ–∞–ª–∏–∑–º"
                  title="surrealist painting, impossible architecture, melting forms, Dali-inspired dreamscape, juxtaposed scale">–°—é—Ä—Ä–µ–∞–ª–∏–∑–º</button><button
                  class="option-btn" data-group="artStyle" data-value="–ú–æ–¥–µ—Ä–Ω (–ê—Ä-–Ω—É–≤–æ)"
                  title="Art Nouveau style, sinuous organic whiplash curves, floral motifs, Mucha-inspired decorative border">–ú–æ–¥–µ—Ä–Ω
                  (–ê—Ä-–Ω—É–≤–æ)</button><button class="option-btn" data-group="artStyle" data-value="–ê—Ä-–¥–µ–∫–æ"
                  title="Art Deco style, geometric chevron patterns, gold and black palette, chrome accents, 1920s glamour">–ê—Ä-–¥–µ–∫–æ</button><button
                  class="option-btn" data-group="artStyle" data-value="–ë–∞—Ä–æ–∫–∫–æ"
                  title="Baroque painting, Caravaggio-style tenebrism, rich velvet textures, dramatic chiaroscuro, gilded details">–ë–∞—Ä–æ–∫–∫–æ</button><button
                  class="option-btn" data-group="artStyle" data-value="–†–µ–Ω–µ—Å—Å–∞–Ω—Å"
                  title="Renaissance painting, sfumato technique, classical proportion, linear perspective, tempera-like matte finish">–†–µ–Ω–µ—Å—Å–∞–Ω—Å</button><button
                  class="option-btn" data-group="artStyle" data-value="–ü–æ–ø-–∞—Ä—Ç"
                  title="Pop Art style, Warhol-inspired screen print, bold primary colors, repeated motifs, halftone overlay">–ü–æ–ø-–∞—Ä—Ç</button><button
                  class="option-btn" data-group="artStyle" data-value="–ö–∏–±–µ—Ä–ø–∞–Ω–∫"
                  title="cyberpunk style, neon-drenched rain-slicked streets, holographic HUD overlays, teal-magenta palette">–ö–∏–±–µ—Ä–ø–∞–Ω–∫</button><button
                  class="option-btn" data-group="artStyle" data-value="–°—Ç–∏–º–ø–∞–Ω–∫"
                  title="steampunk style, brass clockwork mechanisms, Victorian riveted iron, steam vents, sepia-copper palette">–°—Ç–∏–º–ø–∞–Ω–∫</button><button
                  class="option-btn" data-group="artStyle" data-value="–§—ç–Ω—Ç–µ–∑–∏"
                  title="epic fantasy art, magical particle effects, enchanted glow, mythical creatures, rich saturated palette">–§—ç–Ω—Ç–µ–∑–∏</button><button
                  class="option-btn" data-group="artStyle" data-value="–ì–æ—Ç–∏–∫–∞"
                  title="Gothic art style, pointed arch architecture, stained glass light, dark stone textures, blood-red accents">–ì–æ—Ç–∏–∫–∞</button><button
                  class="option-btn" data-group="artStyle" data-value="–í–µ–π–ø–æ—Ä–≤–µ–π–≤"
                  title="vaporwave aesthetic, pastel neon pink-cyan gradient, Roman bust, VHS scanlines, retro grid floor">–í–µ–π–ø–æ—Ä–≤–µ–π–≤</button><button
                  class="option-btn" data-group="artStyle" data-value="–ò–∑–æ–º–µ—Ç—Ä–∏—è"
                  title="isometric 3D illustration, 30-degree projection, no perspective distortion, clean edges, dimetric view">–ò–∑–æ–º–µ—Ç—Ä–∏—è</button><button
                  class="option-btn" data-group="artStyle" data-value="–õ–æ—É-–ø–æ–ª–∏"
                  title="low poly 3D art, flat-shaded triangular facets, limited polygon count, geometric minimalism">–õ–æ—É-–ø–æ–ª–∏</button><button
                  class="option-btn" data-group="artStyle" data-value="–£–∫–∏—ë-—ç"
                  title="ukiyo-e woodblock print, flat perspective, bold black outlines, limited earth-tone palette, Hokusai-inspired">–£–∫–∏—ë-—ç</button><button
                  class="option-btn" data-group="artStyle" data-value="–ë–∞—É—Ö–∞—É—Å"
                  title="Bauhaus design, primary color triad, geometric sans-serif typography, functional grid layout">–ë–∞—É—Ö–∞—É—Å</button><button
                  class="option-btn" data-group="artStyle" data-value="–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è"
                  title="abstract non-representational art, bold gestural marks, color field composition, Rothko-inspired luminous layers">–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è</button><button
                  class="option-btn" data-group="artStyle" data-value="–ü—É–∞–Ω—Ç–∏–ª–∏–∑–º"
                  title="pointillism style, composed entirely of small distinct dots, Seurat-inspired optical mixing">–ü—É–∞–Ω—Ç–∏–ª–∏–∑–º</button><button
                  class="option-btn" data-group="artStyle" data-value="–ö—É–±–∏–∑–º"
                  title="Cubist style, simultaneous multiple viewpoints, fragmented geometric planes, muted browns and grays">–ö—É–±–∏–∑–º</button><button
                  class="option-btn" data-group="artStyle" data-value="–ù–µ–æ-–ù—É–∞—Ä"
                  title="neo-noir style, high-contrast side lighting, wet reflective streets, venetian blind shadows, desaturated teal">–ù–µ–æ-–ù—É–∞—Ä</button><button
                  class="option-btn" data-group="artStyle" data-value="–ì—Ä–∞—Ñ—Ñ–∏—Ç–∏"
                  title="graffiti street art, spray paint texture, drip marks, wildstyle lettering, concrete wall background">–ì—Ä–∞—Ñ—Ñ–∏—Ç–∏</button><button
                  class="option-btn" data-group="artStyle" data-value="–ú–∞–Ω–≥–∞"
                  title="manga style, screentone shading, dynamic panel composition, speed lines, detailed ink linework">–ú–∞–Ω–≥–∞</button><button
                  class="option-btn" data-group="artStyle" data-value="–ß–∏–±–∏"
                  title="chibi style, 2:1 head-to-body ratio, round simplified features, cute exaggerated expressions">–ß–∏–±–∏</button><button
                  class="option-btn" data-group="artStyle" data-value="–î–≤–æ–π–Ω–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è"
                  title="double exposure effect, two overlapping silhouette layers, forest-inside-portrait, blended transparency">–î–≤–æ–π–Ω–∞—è
                  —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è</button><button class="option-btn" data-group="artStyle" data-value="–ì–ª–∏—Ç—á-–∞—Ä—Ç"
                  title="glitch art, RGB channel shift, pixel sorting artifacts, data moshing, corrupted scanlines">–ì–ª–∏—Ç—á-–∞—Ä—Ç</button><button
                  class="option-btn" data-group="artStyle" data-value="–í–∏—Ç—Ä–∞–∂"
                  title="stained glass art, lead came divisions, backlit translucent jewel-tone panels, Gothic rose window">–í–∏—Ç—Ä–∞–∂</button><button
                  class="option-btn" data-group="artStyle" data-value="–ë—É–º–∞–∂–Ω—ã–π –∞—Ä—Ç"
                  title="paper cut-out art, layered paper depth, cast shadows between layers, torn textured edges">–ë—É–º–∞–∂–Ω—ã–π
                  –∞—Ä—Ç</button><button class="option-btn" data-group="artStyle" data-value="–ü–ª–∞—Å—Ç–∏–ª–∏–Ω (Claymation)"
                  title="claymation style, visible fingerprint clay texture, stop-motion frame, handcrafted imperfections">–ü–ª–∞—Å—Ç–∏–ª–∏–Ω
                  (Claymation)</button><button class="option-btn" data-group="artStyle" data-value="–ß–µ—Ä—Ç–µ–∂ (Blueprint)"
                  title="technical blueprint schematic, white lines on navy background, annotation labels, cross-section view">–ß–µ—Ä—Ç–µ–∂
                  (Blueprint)</button></div>
              <span id="mergedMediumLabel" class="sub-label">–ú–µ–¥–∏—É–º</span>
              <div id="mergedMediumGroup" class="option-group"><button class="option-btn" data-group="medium"
                  data-value="photograph, DSLR capture, natural grain, accurate color reproduction"
                  title="photograph, DSLR capture, natural grain, accurate color reproduction">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è</button><button
                  class="option-btn" data-group="medium"
                  data-value="digital art, Wacom tablet rendering, smooth blending, crisp edges"
                  title="digital art, Wacom tablet rendering, smooth blending, crisp edges">–¶–∏—Ñ—Ä–æ–≤–æ–π –∞—Ä—Ç</button><button
                  class="option-btn" data-group="medium"
                  data-value="oil on canvas, thick impasto texture, layered glazing, visible weave"
                  title="oil on canvas, thick impasto texture, layered glazing, visible weave">–ú–∞—Å–ª–æ –Ω–∞
                  —Ö–æ–ª—Å—Ç–µ</button><button class="option-btn" data-group="medium"
                  data-value="watercolor on Arches cold-pressed paper, wet-on-wet bleeds, pigment granulation"
                  title="watercolor on Arches cold-pressed paper, wet-on-wet bleeds, pigment granulation">–ê–∫–≤–∞—Ä–µ–ª—å</button><button
                  class="option-btn" data-group="medium"
                  data-value="ink drawing on vellum, Micron pen linework, high-contrast stippling"
                  title="ink drawing on vellum, Micron pen linework, high-contrast stippling">–ß–µ—Ä–Ω–∏–ª—å–Ω—ã–π
                  —Ä–∏—Å—É–Ω–æ–∫</button><button class="option-btn" data-group="medium"
                  data-value="compressed charcoal on toned paper, smudged soft gradients, gritty texture"
                  title="compressed charcoal on toned paper, smudged soft gradients, gritty texture">–£–≥–æ–ª—å</button><button
                  class="option-btn" data-group="medium"
                  data-value="acrylic painting, quick-dry matte finish, bold opaque coverage, palette knife marks"
                  title="acrylic painting, quick-dry matte finish, bold opaque coverage, palette knife marks">–ê–∫—Ä–∏–ª</button><button
                  class="option-btn" data-group="medium"
                  data-value="mixed media collage, layered paper textures, paint splatter, found objects"
                  title="mixed media collage, layered paper textures, paint splatter, found objects">–ú–∏–∫—Å-–º–µ–¥–∏–∞</button><button
                  class="option-btn" data-group="medium"
                  data-value="marble sculpture, carved chisel marks, smooth polished surface, directional studio light"
                  title="marble sculpture, carved chisel marks, smooth polished surface, directional studio light">–°–∫—É–ª—å–ø—Ç—É—Ä–∞</button><button
                  class="option-btn" data-group="medium"
                  data-value="collage artwork, torn magazine cutouts, visible glue edges, overlapping layers"
                  title="collage artwork, torn magazine cutouts, visible glue edges, overlapping layers">–ö–æ–ª–ª–∞–∂</button><button
                  class="option-btn" data-group="medium"
                  data-value="gouache on illustration board, opaque matte finish, flat even coats"
                  title="gouache on illustration board, opaque matte finish, flat even coats">–ì—É–∞—à—å</button><button
                  class="option-btn" data-group="medium"
                  data-value="soft pastel on Mi-Teintes paper, powdery blended strokes, visible tooth texture"
                  title="soft pastel on Mi-Teintes paper, powdery blended strokes, visible tooth texture">–ü–∞—Å—Ç–µ–ª—å</button><button
                  class="option-btn" data-group="medium"
                  data-value="graphite pencil 2B‚Äì6B range, fine cross-hatching, subtle tonal gradation"
                  title="graphite pencil 2B‚Äì6B range, fine cross-hatching, subtle tonal gradation">–ì—Ä–∞—Ñ–∏—Ç
                  (–ö–∞—Ä–∞–Ω–¥–∞—à)</button><button class="option-btn" data-group="medium"
                  data-value="Prismacolor colored pencil, burnished layered strokes, waxy smooth blending"
                  title="Prismacolor colored pencil, burnished layered strokes, waxy smooth blending">–¶–≤–µ—Ç–Ω—ã–µ
                  –∫–∞—Ä–∞–Ω–¥–∞—à–∏</button><button class="option-btn" data-group="medium"
                  data-value="wax crayon on construction paper, childlike strokes, heavy texture lines"
                  title="wax crayon on construction paper, childlike strokes, heavy texture lines">–í–æ—Å–∫–æ–≤—ã–µ
                  –º–µ–ª–∫–∏</button><button class="option-btn" data-group="medium"
                  data-value="Montana spray paint on concrete, aerosol overspray halo, drip textures"
                  title="Montana spray paint on concrete, aerosol overspray halo, drip textures">–°–ø—Ä–µ–π-–∞—Ä—Ç</button><button
                  class="option-btn" data-group="medium"
                  data-value="buon fresco on wet lime plaster, muted mineral pigments, craquelure aging"
                  title="buon fresco on wet lime plaster, muted mineral pigments, craquelure aging">–§—Ä–µ—Å–∫–∞</button><button
                  class="option-btn" data-group="medium"
                  data-value="Byzantine mosaic, gold smalti tesserae, visible grout lines, fixed frontal pose"
                  title="Byzantine mosaic, gold smalti tesserae, visible grout lines, fixed frontal pose">–ú–æ–∑–∞–∏–∫–∞</button><button
                  class="option-btn" data-group="medium"
                  data-value="woodcut relief print, carved parallel lines, visible wood grain, bold black ink"
                  title="woodcut relief print, carved parallel lines, visible wood grain, bold black ink">–ì—Ä–∞–≤—é—Ä–∞
                  (–î–µ—Ä–µ–≤–æ)</button><button class="option-btn" data-group="medium"
                  data-value="linocut print, crisp carved edges, flat ink coverage, two-color registration"
                  title="linocut print, crisp carved edges, flat ink coverage, two-color registration">–õ–∏–Ω–æ–≥—Ä–∞–≤—é—Ä–∞</button><button
                  class="option-btn" data-group="medium"
                  data-value="copper plate etching, fine aquatint tones, cross-hatched shadows, acid-bitten lines"
                  title="copper plate etching, fine aquatint tones, cross-hatched shadows, acid-bitten lines">–û—Ñ–æ—Ä—Ç</button><button
                  class="option-btn" data-group="medium"
                  data-value="Warhol-style screen print, layered flat CMYK inks, slight registration offset"
                  title="Warhol-style screen print, layered flat CMYK inks, slight registration offset">–®–µ–ª–∫–æ–≥—Ä–∞—Ñ–∏—è</button><button
                  class="option-btn" data-group="medium"
                  data-value="encaustic painting, melted beeswax pigment, translucent layered depth, textured surface"
                  title="encaustic painting, melted beeswax pigment, translucent layered depth, textured surface">–≠–Ω–∫–∞—É—Å—Ç–∏–∫–∞</button><button
                  class="option-btn" data-group="medium"
                  data-value="egg tempera on wood panel, fine hatched brushwork, luminous matte glow"
                  title="egg tempera on wood panel, fine hatched brushwork, luminous matte glow">–¢–µ–º–ø–µ—Ä–∞</button><button
                  class="option-btn" data-group="medium"
                  data-value="batik wax-resist dyed fabric, crackle vein pattern, indigo and earth tones"
                  title="batik wax-resist dyed fabric, crackle vein pattern, indigo and earth tones">–ë–∞—Ç–∏–∫</button><button
                  class="option-btn" data-group="medium"
                  data-value="embroidered textile art, visible thread stitching, satin and chain stitch detail"
                  title="embroidered textile art, visible thread stitching, satin and chain stitch detail">–í—ã—à–∏–≤–∫–∞</button><button
                  class="option-btn" data-group="medium"
                  data-value="blown glass art, translucent organic forms, internal bubble inclusions, Murano-style"
                  title="blown glass art, translucent organic forms, internal bubble inclusions, Murano-style">–°—Ç–µ–∫–ª–æ–¥—É–≤–Ω–æ–µ
                  –∏—Å–∫—É—Å—Å—Ç–≤–æ</button><button class="option-btn" data-group="medium"
                  data-value="lost-wax bronze cast, green verdigris patina, polished highlight ridges"
                  title="lost-wax bronze cast, green verdigris patina, polished highlight ridges">–ë—Ä–æ–Ω–∑–æ–≤–æ–µ
                  –ª–∏—Ç—å–µ</button><button class="option-btn" data-group="medium"
                  data-value="3D render, physically based rendering (PBR), ray-traced global illumination, realistic materials, studio-grade reflections"
                  title="3D render, physically based rendering (PBR), ray-traced global illumination, realistic materials, studio-grade reflections">3D
                  –†–µ–Ω–¥–µ—Ä</button><button class="option-btn" data-group="medium"
                  data-value="vector illustration, clean bezier curves, infinite scalability, flat color blocks, print-ready crisp edges"
                  title="vector illustration, clean bezier curves, infinite scalability, flat color blocks, print-ready crisp edges">–í–µ–∫—Ç–æ—Ä–Ω–∞—è
                  –≥—Ä–∞—Ñ–∏–∫–∞</button></div>
            </div>
          </div>


          <!-- Film Stocks -->
          <div class="section collapsed" id="filmStockSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-yellow">üéûÔ∏è</span> –ö–∏–Ω–æ–ø–ª—ë–Ω–∫–∞ <span class="help-tip">?<span
                    class="tip-text">–≠–º—É–ª—è—Ü–∏—è –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã—Ö —Ñ–æ—Ç–æ- –∏ –∫–∏–Ω–æ–ø–ª—ë–Ω–æ–∫. –í–ª–∏—è–µ—Ç –Ω–∞ —Ü–≤–µ—Ç, –∑–µ—Ä–Ω–æ –∏
                    –∫–æ–Ω—Ç—Ä–∞—Å—Ç.</span></span></h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group">
                <button class="option-btn" data-group="filmStock" data-value="Kodak Vision3 500T"
                  title="–°—Ç–∞–Ω–¥–∞—Ä—Ç –Ω–æ—á–Ω–æ–π —Å—ä—ë–º–∫–∏, –∑–µ—Ä–Ω–∏—Å—Ç–æ—Å—Ç—å, –≤–æ–ª—å—Ñ—Ä–∞–º–æ–≤—ã–π –±–∞–ª–∞–Ω—Å">Kodak Vision3 500T</button>
                <button class="option-btn" data-group="filmStock" data-value="Kodak Vision3 250D"
                  title="–î–Ω–µ–≤–Ω–∞—è –ø–ª—ë–Ω–∫–∞, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞, –∏–¥–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å">Kodak Vision3 250D</button>
                <button class="option-btn" data-group="filmStock" data-value="Kodak Vision3 50D"
                  title="–ß–∏—Å—Ç–µ–π—à–∞—è –ø–ª—ë–Ω–∫–∞, –ø–æ—á—Ç–∏ –±–µ–∑ –∑–µ—Ä–Ω–∞, –æ—á–µ–Ω—å —è—Ä–∫–∏–µ —Ü–≤–µ—Ç–∞">Kodak Vision3 50D</button>
                <button class="option-btn" data-group="filmStock" data-value="Fujifilm Eterna 500T"
                  title="–ú—è–≥–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –ø–∞—Å—Ç–µ–ª—å–Ω—ã–µ —Ç–æ–Ω–∞, —Ç–µ–Ω–∏ –≤ –∑–µ–ª—ë–Ω—ã–π">Fujifilm Eterna 500T</button>
                <button class="option-btn" data-group="filmStock" data-value="Kodak Tri-X 400"
                  title="–ß/–± –∫–ª–∞—Å—Å–∏–∫–∞, –≤—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –∑–µ—Ä–Ω–∏—Å—Ç–∞—è –¥—Ä–∞–º–∞">Kodak Tri-X 400 (–ß/–ë)</button>
                <button class="option-btn" data-group="filmStock" data-value="Kodachrome 64"
                  title="–†–µ—Ç—Ä–æ 60-70-–µ, –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ reds/yellows, National Geographic">Kodachrome 64</button>
                <button class="option-btn" data-group="filmStock" data-value="ARRI Alexa 35 Sensor"
                  title="–¶–∏—Ñ—Ä–æ–≤–æ–π –∫–æ—Ä–æ–ª—å, –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–π –î–î, –º—è–≥–∫–∏–µ —Ö–∞–π–ª–∞–π—Ç—ã">ARRI Alexa 35 Sensor</button>
                <button class="option-btn" data-group="filmStock" data-value="RED V-Raptor / Monstro"
                  title="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∑–∫–æ—Å—Ç—å, –≥–∏–ø–µ—Ä—Ä–µ–∞–ª–∏–∑–º, –≥–ª—É–±–æ–∫–∏–µ —Ç–µ–Ω–∏">RED V-Raptor / Monstro</button>
                <button class="option-btn" data-group="filmStock" data-value="Sony Venice 2"
                  title="–û—Ç–ª–∏—á–Ω–∞—è –≤ —Å–ª–∞–±–æ–º —Å–≤–µ—Ç–µ (Dual ISO), —á–∏—Å—Ç—ã–µ —Ç–æ–Ω–∞">Sony Venice 2</button>
                <button class="option-btn" data-group="filmStock" data-value="VHS / MiniDV"
                  title="–≠—Å—Ç–µ—Ç–∏–∫–∞ 90-—Ö: –≥–ª–∏—Ç—á–∏, —Å–∫–∞–Ω-–ª–∏–Ω–∏–∏, —Ö—Ä–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–±–µ—Ä—Ä–∞—Ü–∏–∏">VHS / MiniDV</button>
              </div>
            </div>
          </div>

          <!-- Aperture & Angle & Composition & Focal Length -->
          <div class="section collapsed" id="apertureSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-orange">üé•</span> –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—ä—ë–º–∫–∏ <span class="help-tip">?<span
                    class="tip-text">¬´–î–∏–∞—Ñ—Ä–∞–≥–º–∞¬ª ‚Äî –≥–ª—É–±–∏–Ω–∞. ¬´–§–æ–∫—É—Å–Ω–æ–µ¬ª ‚Äî –∑—É–º. ¬´–£–≥–æ–ª¬ª ‚Äî —Ä–∞–∫—É—Ä—Å. ¬´–ü–ª–∞–Ω¬ª ‚Äî –∫—Ä—É–ø–Ω–æ—Å—Ç—å. –í—Å–µ
                    –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã.</span></span></h2>
            </div>
            <div class="section-content">

              <span class="sub-label">–î–∏–∞—Ñ—Ä–∞–≥–º–∞ <span class="mode-badge" style="margin-left:6px">single</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="aperture"
                  data-value="f/0.95, Noctilux rendering, paper-thin depth of field, extreme light gathering, dreamy ethereal look"
                  title="–£–ª—å—Ç—Ä–∞-—Å–≤–µ—Ç–æ—Å–∏–ª—å–Ω—ã–π, –±—Ä–∏—Ç–≤–µ–Ω–Ω–∞—è –ì–†–ò–ü">f/0.95 Noctilux</button>
                <button class="option-btn" data-group="aperture"
                  data-value="f/1.4, shallow depth of field, creamy bokeh, subject isolation, soft background blur"
                  title="–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –ø–æ—Ä—Ç—Ä–µ—Ç–Ω–æ–µ –±–æ–∫–µ">f/1.4 –ë–æ–∫–µ</button>
                <button class="option-btn" data-group="aperture"
                  data-value="f/2.0, gentle depth of field, balanced bokeh, slightly more context than f/1.4"
                  title="–ú—è–≥–∫–æ–µ –±–æ–∫–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º">f/2.0 –ú—è–≥–∫–æ–µ –±–æ–∫–µ</button>
                <button class="option-btn" data-group="aperture"
                  data-value="f/2.8, balanced depth of field, professional portrait look, controlled background separation"
                  title="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å">f/2.8 –ë–∞–ª–∞–Ω—Å</button>
                <button class="option-btn" data-group="aperture"
                  data-value="f/4.0, moderate depth of field, environmental portrait, sharp subject with soft background context"
                  title="–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Ä–µ–∑–∫–æ—Å—Ç—å">f/4.0 –ö–æ–Ω—Ç–µ–∫—Å—Ç</button>
                <button class="option-btn" data-group="aperture"
                  data-value="f/5.6, deep depth of field, group photo sharpness, landscape with foreground interest"
                  title="–ì—Ä—É–ø–ø–æ–≤—ã–µ —Ñ–æ—Ç–æ, –ø–µ–π–∑–∞–∂–∏">f/5.6 –ì—Ä—É–ø–ø–∞</button>
                <button class="option-btn" data-group="aperture"
                  data-value="f/8.0, deep focus, optimal lens sharpness, landscape photography sweet spot"
                  title="–°–ª–∞–¥–∫–∞—è —Ç–æ—á–∫–∞ –æ–±—ä–µ–∫—Ç–∏–≤–∞">f/8 –ú–∞–∫—Å—Ä–µ–∑–∫–æ—Å—Ç—å</button>
                <button class="option-btn" data-group="aperture"
                  data-value="f/11, maximum sharpness, architectural precision, infinite depth of field"
                  title="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å">f/11 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</button>
                <button class="option-btn" data-group="aperture"
                  data-value="f/16, hyperfocal distance, everything in focus, extreme depth of field, landscape mastery"
                  title="–ì–∏–ø–µ—Ä—Ñ–æ–∫–∞–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è">f/16 –ì–∏–ø–µ—Ä—Ñ–æ–∫–∞–ª</button>
                <button class="option-btn" data-group="aperture"
                  data-value="f/22, pinhole-like rendering, starburst light effects, maximum depth of field, slight diffraction softness"
                  title="–õ—É—á–∏ –∑–≤—ë–∑–¥ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–≤–µ—Ç–∞">f/22 –ó–≤—ë–∑–¥–Ω—ã–µ –ª—É—á–∏</button>
              </div>

              <span class="sub-label">–§–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ <span class="mode-badge"
                  style="margin-left:6px">single</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 8mm lens, fisheye perspective, extreme barrel distortion, ultra-wide field of view"
                  title="–†—ã–±–∏–π –≥–ª–∞–∑, –∏—Å–∫–∞–∂–µ–Ω–∏—è">8mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 12mm lens, ultra-wide angle, slight barrel distortion, exaggerated perspective, massive environment scale"
                  title="–£–ª—å—Ç—Ä–∞-—à–∏—Ä–æ–∫–∏–π">12mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 16mm lens, wide field of view, expansive background, immersive perspective, epic scale"
                  title="–®–∏—Ä–æ–∫–∏–π">16mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 24mm lens, environmental storytelling, context-heavy composition, slight perspective exaggeration"
                  title="–°—é–∂–µ—Ç–Ω—ã–π">24mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 35mm lens, classic cinematographic perspective, perfect balance of subject and environment, documentary feel"
                  title="–ö–ª–∞—Å—Å–∏–∫–∞ –∫–∏–Ω–æ">35mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 50mm lens, human eye perspective, zero distortion, natural proportions, realistic look"
                  title="–ì–ª–∞–∑ —á–µ–ª–æ–≤–µ–∫–∞">50mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 70mm lens, natural background compression, cinematic subject isolation, clean focus fall-off"
                  title="–ö–∏–Ω–æ-–ø–æ—Ä—Ç—Ä–µ—Ç">70mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 85mm lens, flattering portrait perspective, facial features compression, elegant subject separation"
                  title="–ò–¥–µ–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç">85mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 100mm lens, strong background compression, flattened facial features, intimacy"
                  title="–ú–∞–∫—Ä–æ / –ü–æ—Ä—Ç—Ä–µ—Ç">100mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 135mm lens, extreme background compression, subject isolated against a wall of blur, telephoto look"
                  title="–¢–µ–ª–µ—Ñ–æ—Ç–æ">135mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="shot on 200mm lens, extreme compression, atmospheric haze, powerful subject isolation"
                  title="–°–Ω–∞–π–ø–µ—Ä">200mm</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="tilt-shift lens, miniature faking effect, selective focus plane, toy city look, architectural correction"
                  title="–¢–∏–ª—Ç-—à–∏—Ñ—Ç">–¢–∏–ª—Ç-—à–∏—Ñ—Ç</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="anamorphic lens, oval bokeh, cinema aspect ratio, horizontal lens flares, cinematic character"
                  title="–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç">–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="vintage lens coating, soft contrast, circular swirl bokeh, Helios 44-2 style, organic imperfections"
                  title="–í–∏–Ω—Ç–∞–∂–Ω–∞—è –æ–ø—Ç–∏–∫–∞">–í–∏–Ω—Ç–∞–∂–Ω–∞—è –æ–ø—Ç–∏–∫–∞</button>
                <button class="option-btn" data-group="focalLength"
                  data-value="pinhole camera, infinite depth of field, soft focus everywhere, vignetting, dreamlike long exposure"
                  title="–ü–∏–Ω—Ö–æ–ª">–ü–∏–Ω—Ö–æ–ª</button>
              </div>

              <span class="sub-label">–£–≥–æ–ª —Å—ä—ë–º–∫–∏ <span class="mode-badge" style="margin-left:6px">single</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="angle"
                  data-value="extreme low angle, worm&#39;s eye view, varying perspective, ground level shot, looking up at subject, imposing stature"
                  title="–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ —Å–Ω–∏–∑—É">–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ —Å–Ω–∏–∑—É</button>
                <button class="option-btn" data-group="angle"
                  data-value="low angle shot, looking up at subject, imposing perspective, heroic stature"
                  title="–°–Ω–∏–∑—É (Low Angle)">–°–Ω–∏–∑—É (Low Angle)</button>
                <button class="option-btn" data-group="angle"
                  data-value="slightly low angle, hero shot, up-looking perspective, authoritative stance"
                  title="–ì–µ—Ä–æ–∏—á–µ—Å–∫–∏–π (—á—É—Ç—å —Å–Ω–∏–∑—É)">–ì–µ—Ä–æ–∏—á–µ—Å–∫–∏–π</button>
                <button class="option-btn" data-group="angle"
                  data-value="eye level shot, neutral perspective, straight on angle, direct engagement"
                  title="–£—Ä–æ–≤–µ–Ω—å –≥–ª–∞–∑">–£—Ä–æ–≤–µ–Ω—å –≥–ª–∞–∑</button>
                <button class="option-btn" data-group="angle"
                  data-value="slightly high angle, looking down at subject, submissive perspective"
                  title="–ß—É—Ç—å —Å–≤–µ—Ä—Ö—É">–ß—É—Ç—å —Å–≤–µ—Ä—Ö—É</button>
                <button class="option-btn" data-group="angle"
                  data-value="high angle shot, bird&#39;s eye view, looking down from above, overview perspective"
                  title="–°–≤–µ—Ä—Ö—É (High Angle)">–°–≤–µ—Ä—Ö—É (High Angle)</button>
                <button class="option-btn" data-group="angle"
                  data-value="gods eye view, extreme overhead shot, 90 degree down angle, topographic perspective, cosmic scale"
                  title="–ë–æ–∂–∏–π –≥–ª–∞–∑ (God&#39;s Eye)">–ë–æ–∂–∏–π –≥–ª–∞–∑</button>
                <button class="option-btn" data-group="angle"
                  data-value="top-down aerial drone shot, perpendicular to ground, map-like view, geometric composition"
                  title="–î—Ä–æ–Ω (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ)">–î—Ä–æ–Ω</button>
                <button class="option-btn" data-group="angle"
                  data-value="dutch angle, tilted frame, canted shot, psychological unease, dynamic tension, disorientation"
                  title="Dutch Angle (–Ω–∞–∫–ª–æ–Ω)">Dutch Angle</button>
                <button class="option-btn" data-group="angle"
                  data-value="over-the-shoulder shot, conversation perspective, subject in foreground, depth layering"
                  title="–ß–µ—Ä–µ–∑ –ø–ª–µ—á–æ (OTS)">–ß–µ—Ä–µ–∑ –ø–ª–µ—á–æ</button>
                <button class="option-btn" data-group="angle"
                  data-value="POV first person perspective, immersive viewpoint, subjective camera, seeing through eyes of character"
                  title="POV (–æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞)">POV</button>
                <button class="option-btn" data-group="angle"
                  data-value="selfie angle, arm extension distortion, casual framing, face-focused, social media candid look"
                  title="–°–µ–ª—Ñ–∏ (selfie angle)">–°–µ–ª—Ñ–∏</button>
                <button class="option-btn" data-group="angle"
                  data-value="macro shot, extreme close-up perspective, visible micro texture details, shallow depth of field"
                  title="–ú–∞–∫—Ä–æ —Ä–∞–∫—É—Ä—Å">–ú–∞–∫—Ä–æ</button>
                <button class="option-btn" data-group="angle"
                  data-value="drone shot, aerial view, bird&#39;s eye perspective, vast landscape context, cinematic overhead movement"
                  title="–ê—ç—Ä–æ—Å—ä—ë–º–∫–∞ (–¥—Ä–æ–Ω)">–ê—ç—Ä–æ—Å—ä—ë–º–∫–∞</button>
                <button class="option-btn" data-group="angle"
                  data-value="tracking shot, kinetic energy, dynamic progression, steady motion, following subject"
                  title="Tracking Shot (–°–ª–µ–∂–µ–Ω–∏–µ)">Tracking Shot</button>
                <button class="option-btn" data-group="angle"
                  data-value="low mode tracking shot, ground level movement, intense kinetic energy, gritty motion blur"
                  title="Low Tracking (–°–ª–µ–∂–µ–Ω–∏–µ —Å–Ω–∏–∑—É)">Low Tracking</button>
              </div>

              <span class="sub-label">–ö—Ä—É–ø–Ω–æ—Å—Ç—å / –†–∞–∫—É—Ä—Å –ø–ª–∞–Ω–∞ <span class="mode-badge"
                  style="margin-left:6px">single</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="shotSize"
                  data-value="macro photography, micro details, extreme close-up texture, scientific precision, shallow depth of field"
                  title="–ú–∞–∫—Ä–æ (Macro)">–ú–∞–∫—Ä–æ</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="extreme close-up shot, detail focus, eyes or lips only, intense intimacy, macro texture"
                  title="–≠–∫—Å—Ç—Ä. –∫—Ä—É–ø–Ω—ã–π –ø–ª–∞–Ω">–≠–∫—Å—Ç—Ä. –∫—Ä—É–ø–Ω—ã–π –ø–ª–∞–Ω</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="close-up portrait, head and shoulders, emotional connection, facial expression focus, detailed features"
                  title="–ö—Ä—É–ø–Ω—ã–π –ø–ª–∞–Ω">–ö—Ä—É–ø–Ω—ã–π –ø–ª–∞–Ω</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="headshot, framing from shoulders up, focus on facial expression, beauty framing"
                  title="–ü–æ—Ä—Ç—Ä–µ—Ç (–≥–æ–ª–æ–≤–∞)">–ü–æ—Ä—Ç—Ä–µ—Ç (–≥–æ–ª–æ–≤–∞)</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="medium close-up shot, chest up, standard dialogue framing, business portrait, interview style"
                  title="–ü–æ—è—Å–Ω–æ–π –ø–ª–∞–Ω">–ü–æ—è—Å–Ω–æ–π –ø–ª–∞–Ω</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="medium shot, waist up, standard cinematic framing, character with context, neutral distance"
                  title="–°—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω">–°—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="cowboy shot, mid-thigh up, gun holster visibility, heroic stance, western framing"
                  title="–ê–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π –ø–ª–∞–Ω">–ê–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π –ø–ª–∞–Ω</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="full body shot, head to toe, character in environment, fashion photography style, complete figure"
                  title="–ü–æ–ª–Ω—ã–π —Ä–æ—Å—Ç">–ü–æ–ª–Ω—ã–π —Ä–æ—Å—Ç</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="wide shot, full body visible, feet to head, environmental context included, establishing feel"
                  title="–û–±—â–∏–π –ø–ª–∞–Ω">–û–±—â–∏–π –ø–ª–∞–Ω</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="extreme long shot, subject small in frame, vast landscape dominance, establishing shot, epic scale"
                  title="–î–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω">–î–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="overhead flat lay photography, knolling arrangement, organized composition, geometric order, top-down view"
                  title="–†–∞—Å–∫–ª–∞–¥–∫–∞ (Flat lay)">–†–∞—Å–∫–ª–∞–¥–∫–∞ (Flat lay)</button>
                <button class="option-btn" data-group="shotSize"
                  data-value="silhouette shot, backlit subject, high contrast, mysterious atmosphere, outline definition, no facial detail"
                  title="–°–∏–ª—É—ç—Ç">–°–∏–ª—É—ç—Ç</button>
              </div>
            </div>
          </div>
          <div class="section collapsed" id="compositionSectionV2">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-blue">üìê</span> –ö–æ–º–ø–æ–∑–∏—Ü–∏—è</h2><span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group" id="compositionGroupV2"><button class="option-btn" data-group="composition"
                  data-value="rule of thirds composition, subject on grid intersection, balanced negative space"
                  title="rule of thirds composition, subject on grid intersection, balanced negative space">–ü—Ä–∞–≤–∏–ª–æ
                  —Ç—Ä–µ—Ç–µ–π</button><button class="option-btn" data-group="composition"
                  data-value="centered composition, Wes Anderson symmetry, direct confrontation, stable frame"
                  title="centered composition, Wes Anderson symmetry, direct confrontation, stable frame">–¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ</button><button
                  class="option-btn" data-group="composition"
                  data-value="golden ratio spiral composition, natural organic flow, divine proportion aesthetic"
                  title="golden ratio spiral composition, natural organic flow, divine proportion aesthetic">–ó–æ–ª–æ—Ç–æ–µ
                  —Å–µ—á–µ–Ω–∏–µ</button><button class="option-btn" data-group="composition"
                  data-value="leading lines, perspective depth, converging geometry drawing eye to subject"
                  title="leading lines, perspective depth, converging geometry drawing eye to subject">–í–µ–¥—É—â–∏–µ
                  –ª–∏–Ω–∏–∏</button><button class="option-btn" data-group="composition"
                  data-value="frame within a frame, looking through window/arch, depth layering, voyeuristic feel"
                  title="frame within a frame, looking through window/arch, depth layering, voyeuristic feel">–§—Ä–µ–π–º–∏–Ω–≥</button><button
                  class="option-btn" data-group="composition"
                  data-value="massive negative space, minimalism, isolation, subject in corner, vast emptiness"
                  title="massive negative space, minimalism, isolation, subject in corner, vast emptiness">–ù–µ–≥–∞—Ç–∏–≤–Ω–æ–µ
                  –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</button><button class="option-btn" data-group="composition"
                  data-value="diagonal composition, dynamic tension, movement direction, energetic imbalance"
                  title="diagonal composition, dynamic tension, movement direction, energetic imbalance">–î–∏–∞–≥–æ–Ω–∞–ª–∏</button><button
                  class="option-btn" data-group="composition"
                  data-value="perfect horizontal symmetry, reflection, mirror image, balanced stability"
                  title="perfect horizontal symmetry, reflection, mirror image, balanced stability">–°–∏–º–º–µ—Ç—Ä–∏—è</button><button
                  class="option-btn" data-group="composition"
                  data-value="fill the frame, no background, pattern texture focus, claustrophobic intensity"
                  title="fill the frame, no background, pattern texture focus, claustrophobic intensity">–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ
                  –∫–∞–¥—Ä–∞</button></div>
            </div>
          </div>
          <div class="section collapsed" id="lightingSectionV2">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-orange">üí°</span> –û—Å–≤–µ—â–µ–Ω–∏–µ</h2><span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group" id="lightingGroupV2"><button class="option-btn" data-group="lightType"
                  data-value="golden hour lighting, warm soft sun low in the sky, long shadows, rim lighting, 2500K temperature"
                  title="golden hour lighting, warm soft sun low in the sky, long shadows, rim lighting, 2500K temperature">–ó–æ–ª–æ—Ç–æ–π
                  —á–∞—Å</button><button class="option-btn" data-group="lightType"
                  data-value="soft natural overcast light, diffused shadows, even illumination, window light quality"
                  title="soft natural overcast light, diffused shadows, even illumination, window light quality">–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π
                  —Å–≤–µ—Ç</button><button class="option-btn" data-group="lightType"
                  data-value="studio lighting, 3-point setup, key light, fill light, hair light, controlled contrast, professional look"
                  title="studio lighting, 3-point setup, key light, fill light, hair light, controlled contrast, professional look">–°—Ç—É–¥–∏–π–Ω—ã–π
                  —Å–≤–µ—Ç</button><button class="option-btn" data-group="lightType"
                  data-value="cinematic lighting, motivated light sources, atmospheric haze, volumetric shafts, teal and orange contrast"
                  title="cinematic lighting, motivated light sources, atmospheric haze, volumetric shafts, teal and orange contrast">–ö–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–π</button><button
                  class="option-btn" data-group="lightType"
                  data-value="Rembrandt lighting, chiaroscuro, single light source, signature triangle on cheek, dramatic mood"
                  title="Rembrandt lighting, chiaroscuro, single light source, signature triangle on cheek, dramatic mood">–†–µ–º–±—Ä–∞–Ω–¥—Ç</button><button
                  class="option-btn" data-group="lightType"
                  data-value="neon lighting, pink and cyan gel lights, dark background, wet reflections, futuristic club atmosphere"
                  title="neon lighting, pink and cyan gel lights, dark background, wet reflections, futuristic club atmosphere">–ù–µ–æ–Ω–æ–≤—ã–π
                  (–ö–∏–±–µ—Ä–ø–∞–Ω–∫)</button><button class="option-btn" data-group="lightType"
                  data-value="hard sunlight, high noon, sharp distinct shadows, high contrast, crisp details"
                  title="hard sunlight, high noon, sharp distinct shadows, high contrast, crisp details">–ñ–µ—Å—Ç–∫–∏–π
                  —Å–≤–µ—Ç</button><button class="option-btn" data-group="lightType"
                  data-value="low key lighting, predominantly dark tones, silhouette, rim light only, mysterious mood"
                  title="low key lighting, predominantly dark tones, silhouette, rim light only, mysterious mood">–ù–∏–∑–∫–∏–π
                  –∫–ª—é—á (Low Key)</button><button class="option-btn" data-group="lightType"
                  data-value="high key lighting, predominantly white tones, overexposed background, optimistic ethereal mood"
                  title="high key lighting, predominantly white tones, overexposed background, optimistic ethereal mood">–í—ã—Å–æ–∫–∏–π
                  –∫–ª—é—á (High Key)</button><button class="option-btn" data-group="lightType"
                  data-value="candlelight, flickering warm orange glow, deep shadows, intimate atmosphere, low lux"
                  title="candlelight, flickering warm orange glow, deep shadows, intimate atmosphere, low lux">–°–≤–µ—Ç –æ—Ç
                  —Å–≤–µ—á–∏</button><button class="option-btn" data-group="lightType"
                  data-value="bioluminescent lighting, glowing organic blue-green light, underwater or alien forest vibe, mysterious glow"
                  title="bioluminescent lighting, glowing organic blue-green light, underwater or alien forest vibe, mysterious glow">–ë–∏–æ–ª—é–º–∏–Ω–µ—Å—Ü–µ–Ω—Ü–∏—è</button><button
                  class="option-btn" data-group="lightType"
                  data-value="bokeh background lighting, city lights blur, depth of field bubbles, festive atmosphere"
                  title="bokeh background lighting, city lights blur, depth of field bubbles, festive atmosphere">–ë–æ–∫–µ</button><button
                  class="option-btn" data-group="lightType"
                  data-value="gobo lighting pattern, window blind shadows, tree leaf shadows, dappled light effect"
                  title="gobo lighting pattern, window blind shadows, tree leaf shadows, dappled light effect">–ì–æ–±–æ
                  (–¢–µ–Ω—å)</button><button class="option-btn" data-group="lightType"
                  data-value="direct camera flash, harsh shadows, red-eye aesthetic, vintage polaroid feel, disposable camera"
                  title="direct camera flash, harsh shadows, red-eye aesthetic, vintage polaroid feel, disposable camera">–í—Å–ø—ã—à–∫–∞
                  (90-–µ)</button><button class="option-btn" data-group="lightType"
                  data-value="blue hour lighting, pre-dawn/post-sunset, deep blue sky, cool ambient light, melancholic feel"
                  title="blue hour lighting, pre-dawn/post-sunset, deep blue sky, cool ambient light, melancholic feel">–°–∏–Ω–∏–π
                  —á–∞—Å</button><button class="option-btn" data-group="lightType"
                  data-value="volumetric lighting, god rays, light shafts through dust/smoke, breathable atmosphere"
                  title="volumetric lighting, god rays, light shafts through dust/smoke, breathable atmosphere">–û–±—ä–µ–º–Ω—ã–π
                  —Å–≤–µ—Ç</button><button class="option-btn" data-group="lightType"
                  data-value="ring light, distinct circular catchlight in eyes, even flat facial lighting, beauty vlog aesthetic"
                  title="ring light, distinct circular catchlight in eyes, even flat facial lighting, beauty vlog aesthetic">–ö–æ–ª—å—Ü–µ–≤–∞—è
                  –ª–∞–º–ø–∞</button><button class="option-btn" data-group="lightType"
                  data-value="infrared photography, surreal false color foliage, white grass, dark black sky, dreamlike"
                  title="infrared photography, surreal false color foliage, white grass, dark black sky, dreamlike">–ò–Ω—Ñ—Ä–∞–∫—Ä–∞—Å–Ω—ã–π</button><button
                  class="option-btn" data-group="lightType"
                  data-value="blacklight UV, fluorescent paint glowing, purple haze, club atmosphere"
                  title="blacklight UV, fluorescent paint glowing, purple haze, club atmosphere">–£–ª—å—Ç—Ä–∞—Ñ–∏–æ–ª–µ—Ç</button><button
                  class="option-btn" data-group="lightType"
                  data-value="screen glow, cool blue light from below face, dark room, digital obsession mood"
                  title="screen glow, cool blue light from below face, dark room, digital obsession mood">–°–≤–µ—Ç –æ—Ç
                  —ç–∫—Ä–∞–Ω–∞</button></div>
            </div>
          </div>
          <div class="section collapsed" id="paletteSectionV2">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-pink">üé®</span> –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ <span class="help-tip">?<span
                    class="tip-text">–ó–∞–¥–∞—ë—Ç –¥–æ–º–∏–Ω–∏—Ä—É—é—â—É—é —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É –∫–∞–¥—Ä–∞. –í–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–∞—Å—Ç –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä
                    –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.</span></span></h2><span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group" id="paletteGroupV2"
                style="display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:6px;">
                <button class="option-btn" data-group="colorPalette"
                  data-value="warm golden tones, amber and honey hues, sunset warmth, soft cinematic glow"
                  style="position:relative;padding-left:40px;" title="–¢—ë–ø–ª–∞—è —è–Ω—Ç–∞—Ä–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –∑–∞–∫–∞—Ç–Ω–æ–≥–æ —Å–≤–µ—Ç–∞">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#D4A574;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#C67D3E;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#8B5E3C;display:block;"></span></span>–¢—ë–ø–ª—ã–µ
                  –∑–æ–ª–æ—Ç—ã–µ</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="cool blue tones, steel and ice palette, arctic atmosphere, crisp shadows"
                  style="position:relative;padding-left:40px;" title="–•–æ–ª–æ–¥–Ω–∞—è —Å–∏–Ω—è—è –ø–∞–ª–∏—Ç—Ä–∞ —Å–æ —Å—Ç–∞–ª—å–Ω—ã–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#A8C8E8;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#5B8DB8;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#2C5F8A;display:block;"></span></span>–•–æ–ª–æ–¥–Ω—ã–µ
                  —Å–∏–Ω–∏–µ</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="teal and orange cinematic color grade, Hollywood blockbuster LUT, skin warm + shadow cool"
                  style="position:relative;padding-left:40px;" title="–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#E8956A;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#2D8B8B;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#1A5C5C;display:block;"></span></span>Teal
                  &amp; Orange</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="desaturated muted earth tones, faded vintage palette, matte low-contrast finish"
                  style="position:relative;padding-left:40px;"
                  title="–ü—Ä–∏–≥–ª—É—à—ë–Ω–Ω—ã–µ –∑–µ–º–ª–∏—Å—Ç—ã–µ —Ç–æ–Ω–∞ —Å –≤–∏–Ω—Ç–∞–∂–Ω—ã–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#B8A898;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#8C7B6B;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#5C4F42;display:block;"></span></span>–ü—Ä–∏–≥–ª—É—à—ë–Ω–Ω—ã–µ</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="high saturation vivid colors, bold primary palette, vibrant pop energy"
                  style="position:relative;padding-left:40px;" title="–°–≤–µ—Ä—Ö–Ω–∞—Å—ã—â–µ–Ω–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞ —Å pop-—Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#FF4757;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#2ED573;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#3742FA;display:block;"></span></span>–Ø—Ä–∫–∏–µ
                  / Vivid</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="soft pastel palette, delicate lavender and blush tones, dreamy muted colors"
                  style="position:relative;padding-left:40px;" title="–ù–µ–∂–Ω—ã–µ –ø–∞—Å—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#F8C8DC;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#C3B1E1;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#A8D8EA;display:block;"></span></span>–ü–∞—Å—Ç–µ–ª—å–Ω—ã–µ</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="monochrome black and white, high contrast grayscale, classic noir tonality"
                  style="position:relative;padding-left:40px;" title="–ß—ë—Ä–Ω–æ-–±–µ–ª–∞—è –º–æ–Ω–æ—Ö—Ä–æ–º–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#222222;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#888888;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#DDDDDD;display:block;"></span></span>–ß/–ë
                  –º–æ–Ω–æ</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="neon cyberpunk palette, electric magenta and cyan, glowing fluorescent contrast"
                  style="position:relative;padding-left:40px;" title="–ù–µ–æ–Ω–æ–≤—ã–µ magenta/cyan –∞–∫—Ü–µ–Ω—Ç—ã">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#FF00FF;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#00FFFF;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#7B2FBE;display:block;"></span></span>–ù–µ–æ–Ω
                  / –ö–∏–±–µ—Ä–ø–∞–Ω–∫</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="dark moody palette, deep shadows, noir atmosphere, low-key tones"
                  style="position:relative;padding-left:40px;" title="–¢—ë–º–Ω–∞—è low-key –ø–∞–ª–∏—Ç—Ä–∞">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#1A1A2E;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#16213E;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#0F3460;display:block;"></span></span>–¢—ë–º–Ω—ã–π
                  / Noir</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="natural forest greens and earth browns, organic woodland palette"
                  style="position:relative;padding-left:40px;" title="–ü—Ä–∏—Ä–æ–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∞—è –ø–∞–ª–∏—Ç—Ä–∞">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#6B8E4E;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#3E6B31;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#8B6914;display:block;"></span></span>–ü—Ä–∏—Ä–æ–¥–Ω—ã–µ</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="jewel tones, emerald #046307, ruby #9B111E, sapphire #0F52BA, amethyst #9966CC, rich deep saturation"
                  style="position:relative;padding-left:40px;" title="–î—Ä–∞–≥–æ—Ü–µ–Ω–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã—Ö —Ç–æ–Ω–æ–≤">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#046307;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#9B111E;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#0F52BA;display:block;"></span></span>Jewel
                  Tones</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="sunset gradient, horizon band orange to coral to magenta to violet to indigo, warm-to-cool transition"
                  style="position:relative;padding-left:40px;" title="–ì—Ä–∞–¥–∏–µ–Ω—Ç –∑–∞–∫–∞—Ç–Ω–æ–≥–æ –Ω–µ–±–∞">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#FF8C42;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#FF5E78;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#5C4B8A;display:block;"></span></span>Sunset
                  Gradient</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="Nordic Scandinavian palette, muted dove white, steel blue-gray, pale birch, minimal warm accent"
                  style="position:relative;padding-left:40px;" title="–°–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–∞—è –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#E8ECEF;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#8DA0AE;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#D8C6A3;display:block;"></span></span>Nordic</button>
                <button class="option-btn" data-group="colorPalette"
                  data-value="cross-processed film, E-6 in C-41 chemistry, unexpected green-magenta shift, heavy contrast"
                  style="position:relative;padding-left:40px;" title="Cross-process —Ü–≤–µ—Ç–æ–≤–æ–π —Å–¥–≤–∏–≥ –ø–ª—ë–Ω–∫–∏">
                  <span
                    style="position:absolute;left:6px;top:50%;transform:translateY(-50%);display:flex;gap:2px;"><span
                      style="width:8px;height:18px;border-radius:2px;background:#7FA35A;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#C04D8C;display:block;"></span><span
                      style="width:8px;height:18px;border-radius:2px;background:#2C2C2C;display:block;"></span></span>Cross-Processed</button>
              </div>
            </div>
          </div>
          <div class="section collapsed" id="moodSectionV2">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-blue">üå´Ô∏è</span> Mood / Atmosphere</h2><span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group" id="moodGroupV2"><button class="option-btn" data-group="mood"
                  data-value="serene peaceful atmosphere, still water reflection, soft pastel dawn sky, gentle breeze implied"
                  title="serene peaceful atmosphere, still water reflection, soft pastel dawn sky, gentle breeze implied">–ë–µ–∑–º—è—Ç–µ–∂–Ω–æ—Å—Ç—å</button><button
                  class="option-btn" data-group="mood"
                  data-value="dramatic intense atmosphere, storm clouds, high-contrast lighting, emotional peak moment"
                  title="dramatic intense atmosphere, storm clouds, high-contrast lighting, emotional peak moment">–î—Ä–∞–º–∞</button><button
                  class="option-btn" data-group="mood"
                  data-value="mysterious enigmatic mood, obscured details, fog-shrouded, half-hidden subject, cool muted tones"
                  title="mysterious enigmatic mood, obscured details, fog-shrouded, half-hidden subject, cool muted tones">–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å</button><button
                  class="option-btn" data-group="mood"
                  data-value="cheerful bright mood, sunlit warm palette, open airy space, golden light, joyful energy"
                  title="cheerful bright mood, sunlit warm palette, open airy space, golden light, joyful energy">–†–∞–¥–æ—Å—Ç—å</button><button
                  class="option-btn" data-group="mood"
                  data-value="melancholic contemplative mood, overcast gray sky, muted desaturated tones, solitary figure"
                  title="melancholic contemplative mood, overcast gray sky, muted desaturated tones, solitary figure">–ú–µ–ª–∞–Ω—Ö–æ–ª–∏—è</button><button
                  class="option-btn" data-group="mood"
                  data-value="epic grand scale, awe-inspiring vista, massive clouds, tiny figure for scale, orchestral energy"
                  title="epic grand scale, awe-inspiring vista, massive clouds, tiny figure for scale, orchestral energy">–≠–ø–∏—á–Ω–æ—Å—Ç—å</button><button
                  class="option-btn" data-group="mood"
                  data-value="ethereal dreamy atmosphere, soft glow, light mist, delicate transparency, otherworldly luminance"
                  title="ethereal dreamy atmosphere, soft glow, light mist, delicate transparency, otherworldly luminance">–≠—Ñ–∏—Ä–Ω–æ—Å—Ç—å</button><button
                  class="option-btn" data-group="mood"
                  data-value="gritty raw urban atmosphere, concrete textures, grain, desaturated, unflinching realism"
                  title="gritty raw urban atmosphere, concrete textures, grain, desaturated, unflinching realism">–ì—Ä–∏—Ç—Ç–∏
                  (–ñ–µ—Å—Ç–∫–æ—Å—Ç—å)</button><button class="option-btn" data-group="mood"
                  data-value="romantic soft intimate mood, warm candlelight glow, shallow DOF, blush and peach tones"
                  title="romantic soft intimate mood, warm candlelight glow, shallow DOF, blush and peach tones">–†–æ–º–∞–Ω—Ç–∏–∫–∞</button><button
                  class="option-btn" data-group="mood"
                  data-value="futuristic sci-fi atmosphere, holographic displays, sleek reflective surfaces, cool blue accent lighting"
                  title="futuristic sci-fi atmosphere, holographic displays, sleek reflective surfaces, cool blue accent lighting">–§—É—Ç—É—Ä–∏–∑–º</button><button
                  class="option-btn" data-group="mood"
                  data-value="nostalgic vintage warmth, film grain, faded color edges, memory-like soft vignette"
                  title="nostalgic vintage warmth, film grain, faded color edges, memory-like soft vignette">–ù–æ—Å—Ç–∞–ª—å–≥–∏—è</button><button
                  class="option-btn" data-group="mood"
                  data-value="ominous foreboding, dark gathering clouds, deep shadows, desaturated greens, impending dread"
                  title="ominous foreboding, dark gathering clouds, deep shadows, desaturated greens, impending dread">–£–≥—Ä–æ–∑–∞</button><button
                  class="option-btn" data-group="mood"
                  data-value="whimsical playful fantasy, floating elements, impossible physics, candy-colored, childlike wonder"
                  title="whimsical playful fantasy, floating elements, impossible physics, candy-colored, childlike wonder">–ü—Ä–∏—á—É–¥–ª–∏–≤–æ—Å—Ç—å</button><button
                  class="option-btn" data-group="mood"
                  data-value="somber subdued atmosphere, heavy silence, muted monochrome, still motionless air, grief"
                  title="somber subdued atmosphere, heavy silence, muted monochrome, still motionless air, grief">–ú—Ä–∞—á–Ω–æ—Å—Ç—å</button><button
                  class="option-btn" data-group="mood"
                  data-value="euphoric ecstatic energy, lens flare burst, vibrant saturated colors, dynamic motion blur"
                  title="euphoric ecstatic energy, lens flare burst, vibrant saturated colors, dynamic motion blur">–≠–π—Ñ–æ—Ä–∏—è</button><button
                  class="option-btn" data-group="mood"
                  data-value="tense suspenseful thriller mood, tight framing, shallow DOF, desaturated with single color accent"
                  title="tense suspenseful thriller mood, tight framing, shallow DOF, desaturated with single color accent">–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ</button><button
                  class="option-btn" data-group="mood"
                  data-value="tranquil undisturbed stillness, mirror-flat water, pastel predawn sky, absolute calm"
                  title="tranquil undisturbed stillness, mirror-flat water, pastel predawn sky, absolute calm">–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ</button><button
                  class="option-btn" data-group="mood"
                  data-value="chaotic frenzied energy, overlapping elements, motion blur, fragmented composition, overwhelm"
                  title="chaotic frenzied energy, overlapping elements, motion blur, fragmented composition, overwhelm">–•–∞–æ—Å</button><button
                  class="option-btn" data-group="mood"
                  data-value="dystopian post-apocalyptic, rusted metal, crumbling concrete, toxic smog, oppressive gray-green"
                  title="dystopian post-apocalyptic, rusted metal, crumbling concrete, toxic smog, oppressive gray-green">–ê–Ω—Ç–∏—É—Ç–æ–ø–∏—è</button><button
                  class="option-btn" data-group="mood"
                  data-value="utopian idyllic harmony, pristine nature, crystal-clear water, golden sunlight, perfect balance"
                  title="utopian idyllic harmony, pristine nature, crystal-clear water, golden sunlight, perfect balance">–£—Ç–æ–ø–∏—è</button><button
                  class="option-btn" data-group="mood"
                  data-value="haunting ghostly unease, translucent figure, pale desaturated, lingering mist, cold light"
                  title="haunting ghostly unease, translucent figure, pale desaturated, lingering mist, cold light">–ü—Ä–∏–∑—Ä–∞–∫</button><button
                  class="option-btn" data-group="mood"
                  data-value="cozy hygge atmosphere, warm fireplace glow, knit textures, steaming mug, soft amber 2500K"
                  title="cozy hygge atmosphere, warm fireplace glow, knit textures, steaming mug, soft amber 2500K">–£—é—Ç
                  (–•—é–≥–≥–µ)</button><button class="option-btn" data-group="mood"
                  data-value="majestic regal grandeur, gilded architecture, volumetric light shafts, awe-inspiring scale"
                  title="majestic regal grandeur, gilded architecture, volumetric light shafts, awe-inspiring scale">–í–µ–ª–∏—á–∏–µ</button><button
                  class="option-btn" data-group="mood"
                  data-value="eerie unsettling mood, slightly wrong proportions, uncanny valley, dim flickering light"
                  title="eerie unsettling mood, slightly wrong proportions, uncanny valley, dim flickering light">–ñ—É—Ç—å</button><button
                  class="option-btn" data-group="mood"
                  data-value="vibrant lively energy, bustling crowd, saturated warm colors, motion implied, street life"
                  title="vibrant lively energy, bustling crowd, saturated warm colors, motion implied, street life">–ñ–∏–≤–æ—Å—Ç—å</button><button
                  class="option-btn" data-group="mood"
                  data-value="lonely isolated solitude, vast empty landscape, single tiny figure, overwhelming negative space"
                  title="lonely isolated solitude, vast empty landscape, single tiny figure, overwhelming negative space">–û–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ</button><button
                  class="option-btn" data-group="mood"
                  data-value="sacred spiritual ambiance, divine crepuscular light rays, cathedral scale, reverent hush"
                  title="sacred spiritual ambiance, divine crepuscular light rays, cathedral scale, reverent hush">–°–≤—è—Ç–æ—Å—Ç—å</button><button
                  class="option-btn" data-group="mood"
                  data-value="industrial atmosphere, steel beams, welding sparks, steam vents, concrete and rust textures"
                  title="industrial atmosphere, steel beams, welding sparks, steam vents, concrete and rust textures">–ò–Ω–¥–∞—Å—Ç—Ä–∏–∞–ª</button><button
                  class="option-btn" data-group="mood"
                  data-value="underwater atmosphere, deep blue-green gradient, dancing caustic light patterns, floating particles"
                  title="underwater atmosphere, deep blue-green gradient, dancing caustic light patterns, floating particles">–ü–æ–¥
                  –≤–æ–¥–æ–π</button><button class="option-btn" data-group="mood"
                  data-value="celestial cosmic atmosphere, star field nebula, infinite depth, aurora borealis glow, vast silence"
                  title="celestial cosmic atmosphere, star field nebula, infinite depth, aurora borealis glow, vast silence">–ö–æ—Å–º–æ—Å</button>
              </div>
            </div>
          </div>
          <!-- Lighting -->
          <div class="section collapsed" id="lightingSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-orange">üí°</span> –û—Å–≤–µ—â–µ–Ω–∏–µ <span class="help-tip">?<span
                    class="tip-text">–ö–ª—é—á–µ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä. ¬´–¢–∏–ø¬ª ‚Äî Primary+Accent (1-–π –∫–ª–∏–∫ = –æ—Å–Ω–æ–≤–Ω–æ–π, 2-–π =
                    –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π). ¬´–í—Ä–µ–º—è —Å—É—Ç–æ–∫¬ª ‚Äî –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ. ¬´–≠—Ñ—Ñ–µ–∫—Ç—ã¬ª ‚Äî –º—É–ª—å—Ç–∏–≤—ã–±–æ—Ä.</span></span></h2>
            </div>
            <div class="section-content">

              <span class="sub-label">–¢–∏–ø –æ—Å–≤–µ—â–µ–Ω–∏—è <span class="mode-badge pa" style="margin-left:6px">primary +
                  accent</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="lightType" data-value="soft natural light" title="">–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π
                  –º—è–≥–∫–∏–π</button>
                <button class="option-btn" data-group="lightType" data-value="studio three-point lighting"
                  title="">–°—Ç—É–¥–∏—è
                  3-—Ç–æ—á–∫–∏</button>
                <button class="option-btn" data-group="lightType" data-value="neon glow lighting" title="">–ù–µ–æ–Ω</button>
                <button class="option-btn" data-group="lightType" data-value="dramatic chiaroscuro"
                  title="">–ö—å—è—Ä–æ—Å–∫—É—Ä–æ</button>
                <button class="option-btn" data-group="lightType" data-value="softbox beauty light"
                  title="">–°–æ—Ñ—Ç–±–æ–∫—Å</button>
                <button class="option-btn" data-group="lightType" data-value="backlighting silhouette"
                  title="">–ö–æ–Ω—Ç—Ä–æ–≤–æ–π
                  —Å–≤–µ—Ç</button>
                <button class="option-btn" data-group="lightType"
                  data-value="Rembrandt lighting, triangle shadow on cheek" title="">–†–µ–º–±—Ä–∞–Ω–¥—Ç</button>
                <button class="option-btn" data-group="lightType" data-value="butterfly lighting, paramount glamour"
                  title="">Butterfly (–ì–æ–ª–ª–∏–≤—É–¥)</button>
                <button class="option-btn" data-group="lightType" data-value="split lighting, half face shadow"
                  title="">–°–ø–ª–∏—Ç
                  (–ø–æ–ª–æ–≤–∏–Ω–∞)</button>
                <button class="option-btn" data-group="lightType" data-value="clamshell lighting, beauty commercial"
                  title="">Clamshell (—Ä–µ–∫–ª–∞–º–∞)</button>
                <button class="option-btn" data-group="lightType" data-value="broad lighting, wide face illumination"
                  title="">Broad
                  Light (–®–∏—Ä–æ–∫–∏–π)</button>
                <button class="option-btn" data-group="lightType"
                  data-value="high-key lighting, bright even exposure, minimal shadows" title="">High-Key
                  (—è—Ä–∫–∏–π)</button>
              </div>
              <div class="hint">1-–π –∫–ª–∏–∫ = Primary (P), 2-–π –Ω–∞ –¥—Ä—É–≥—É—é = Accent (A). –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–ª–∏–∫ —Å–Ω–∏–º–∞–µ—Ç –≤—ã–±–æ—Ä.</div>

              <span class="sub-label">–í—Ä–µ–º—è —Å—É—Ç–æ–∫ <span class="mode-badge pa" style="margin-left:6px">primary +
                  accent</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="timeOfDay" data-value="golden hour warm sunlight"
                  title="">–ó–æ–ª–æ—Ç–æ–π
                  —á–∞—Å</button>
                <button class="option-btn" data-group="timeOfDay" data-value="blue hour twilight" title="">–°–∏–Ω–∏–π
                  —á–∞—Å</button>
                <button class="option-btn" data-group="timeOfDay" data-value="bright midday sun"
                  title="">–ü–æ–ª–¥–µ–Ω—å</button>
                <button class="option-btn" data-group="timeOfDay" data-value="night, artificial lighting"
                  title="">–ù–æ—á—å</button>
                <button class="option-btn" data-group="timeOfDay" data-value="overcast diffused light"
                  title="">–ü–∞—Å–º—É—Ä–Ω–æ</button>
              </div>

              <span class="sub-label">–≠—Ñ—Ñ–µ–∫—Ç—ã <span class="mode-badge multi" style="margin-left:6px">multi</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="lightFX" data-value="volumetric fog" title="">–û–±—ä—ë–º–Ω—ã–π
                  —Ç—É–º–∞–Ω</button>
                <button class="option-btn" data-group="lightFX" data-value="subsurface scattering" title="">SSS
                  (–ü–æ–¥–ø–æ–≤–µ—Ä—Ö.)</button>
                <button class="option-btn" data-group="lightFX" data-value="rim light" title="">–ö–æ–Ω—Ç—É—Ä–Ω—ã–π —Å–≤–µ—Ç
                  (Rim)</button>
                <button class="option-btn" data-group="lightFX" data-value="god rays" title="">–õ—É—á–∏ (God Rays)</button>
                <button class="option-btn" data-group="lightFX" data-value="lens flare" title="">–ë–ª–∏–∫–∏ (Lens
                  Flare)</button>
                <button class="option-btn" data-group="lightFX" data-value="caustics" title="">–ö–∞—É—Å—Ç–∏–∫–∞</button>
                <button class="option-btn" data-group="lightFX" data-value="motion blur" title="">–†–∞–∑–º—ã—Ç–∏–µ (Motion
                  Blur)</button>
              </div>
            </div>
          </div>

          <!-- Materials -->
          <div class="section collapsed">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-green">üß¨</span> –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Ç–µ–∫—Å—Ç—É—Ä—ã <span class="help-tip">?<span
                    class="tip-text"><b>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Ç–µ–∫—Å—Ç—É—Ä—ã</b> ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π –≤
                    –∫–∞–¥—Ä–µ.<br><br><b>–î–µ—Ç–∞–ª–∏ –∫–æ–∂–∏:</b> –î–æ–±–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –º–∏–∫—Ä–æ-–¥–µ—Ç–∞–ª–∏ –∫–æ–∂–∏ ‚Äî –ø–æ—Ä—ã, –ø—É—à–æ–∫,
                    –º–æ—Ä—â–∏–Ω—ã,
                    –∫–∞–ø–∏–ª–ª—è—Ä—ã. –ö–∞–∂–¥–∞—è –æ–ø—Ü–∏—è —É—Å–∏–ª–∏–≤–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–º –ø–æ—Ä—Ç—Ä–µ—Ç–∞.<br><br><b>–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ–ª–æ—Å:</b> –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç
                    —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤–æ–ª–æ—Å–∫–æ–≤, –±–ª–∏–∫–æ–≤, –¥–∏–Ω–∞–º–∏–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è.<br><br><b>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –æ–±—ä–µ–∫—Ç–æ–≤:</b> –ó–∞–¥–∞—ë—Ç
                    —Ç–µ–∫—Å—Ç—É—Ä—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ ‚Äî –∫–æ–∂–∞, —Ö—Ä–æ–º, —Å—Ç–µ–∫–ª–æ, –±–µ—Ç–æ–Ω –∏ —Ç.–¥.<br><br><b>‚ú® –£—Å–∏–ª–µ–Ω–Ω–∞—è –ü—Ä–æ—Ä–∏—Å–æ–≤–∫–∞:</b> –ß–µ–∫–±–æ–∫—Å—ã
                    –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç –≥–ª—É–±–æ–∫–∏–π JSON-–∫–æ–Ω—Ñ–∏–≥ —Å —Ñ–∏–∑–∏–∫–æ–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ VFX-—Å—Ç—É–¥–∏–π.</span></span></h2>
            </div>
            <div class="section-content">

              <span class="sub-label">–î–µ—Ç–∞–ª–∏ –∫–æ–∂–∏ (–ø–æ—Ä—Ç—Ä–µ—Ç—ã) <span class="mode-badge multi"
                  style="margin-left:6px">multi</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="skinDetail" data-value="visible skin pores, natural grain"
                  title="">–ü–æ—Ä—ã
                  –∫–æ–∂–∏</button>
                <button class="option-btn" data-group="skinDetail" data-value="peach fuzz, vellus hair" title="">–ü—É—à–æ–∫
                  (vellus)</button>
                <button class="option-btn" data-group="skinDetail" data-value="natural freckles and imperfections"
                  title="">–í–µ—Å–Ω—É—à–∫–∏</button>
                <button class="option-btn" data-group="skinDetail" data-value="subtle under-eye texture"
                  title="">–¢–µ–∫—Å—Ç—É—Ä–∞
                  –ø–æ–¥
                  –≥–ª–∞–∑–∞–º–∏</button>
                <button class="option-btn" data-group="skinDetail"
                  data-value="mimic wrinkles, fine lines, expression lines" title="">–ú–∏–º–∏—á–µ—Å–∫–∏–µ
                  –º–æ—Ä—â–∏–Ω—ã</button>
                <button class="option-btn" data-group="skinDetail"
                  data-value="beauty marks, moles, realistic skin features" title="">–†–æ–¥–∏–Ω–∫–∏</button>
                <button class="option-btn" data-group="skinDetail"
                  data-value="visible capillaries, spider veins, thin skin transparency" title="">–ú–∏–∫—Ä–æ-—Å–æ—Å—É–¥—ã</button>
                <button class="option-btn" data-group="skinDetail"
                  data-value="slight pigmentation, uneven skin tone, natural skin discoloration" title="">–ù–µ—Ä–æ–≤–Ω—ã–π
                  —Ç–æ–Ω</button>
                <button class="option-btn" data-group="skinDetail"
                  data-value="natural skin sheen, slight oiliness, specular highlights on skin" title="">–ñ–∏–≤–æ–π
                  –±–ª–µ—Å–∫</button>
              </div>

              <div style="margin-top:6px;margin-bottom:10px;">
                <label class="toggle-label" id="skinRenderBoostLabel"
                  style="display: inline-flex; gap: 8px; font-size: 0.88em; color: var(--green);" title="">
                  <input type="checkbox" id="skinRenderBoost"> ‚ú® –£—Å–∏–ª–µ–Ω–Ω–∞—è –ü—Ä–æ—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–∂–∏
                  <span class="help-tip">?<span class="tip-text">–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –≥–ª—É–±–æ–∫—É—é –º–∏–∫—Ä–æ-–¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–∂–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ
                      8K:
                      —ç–ø–∏–¥–µ—Ä–º–∞–ª—å–Ω–∞—è —Ñ–∏–∑–∏–∫–∞ (SSS-—Ä–∞—Å—Å–µ–∏–≤–∞–Ω–∏–µ, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —Å–µ–±—É–º-–±–ª–µ—Å–∫), –¥–µ—Ä–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–∞
                      (–∫–∞–ø–∏–ª–ª—è—Ä—ã, –ø–∏–≥–º–µ–Ω—Ç–∞—Ü–∏—è, –º–µ–ª–∫–∏–µ —Ä–æ–¥–∏–Ω–∫–∏), —Ç–µ–∫—Å—Ç—É—Ä–∞ —Ä–∞–¥—É–∂–∫–∏ –∏ —Å–ª—ë–∑–Ω–æ–≥–æ –æ–∑–µ—Ä–∞, –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–µ—Å–Ω–∏—Ü—ã.
                      –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –∞—ç—Ä–±—Ä–∞—à, –≤–æ—Å–∫, –≥–ª–∞–¥–∫–∏–π —Ñ–∏–ª—å—Ç—Ä, –∫—É–∫–æ–ª—å–Ω–∞—è –∫–æ–∂–∞.</span></span>
                </label>
              </div>

              <span class="sub-label">–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ–ª–æ—Å <span class="mode-badge multi"
                  style="margin-left:6px">multi</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="hairDetail"
                  data-value="ultra detailed individual hair strands, each strand visible, photorealistic hair"
                  title="">–ö–∞–∂–¥—ã–π
                  –≤–æ–ª–æ—Å–æ–∫</button>
                <button class="option-btn" data-group="hairDetail"
                  data-value="flyaway baby hairs, wispy strands, backlit hair glow" title="">–ü—É—à–∫–æ–≤—ã–µ (baby
                  hair)</button>
                <button class="option-btn" data-group="hairDetail"
                  data-value="detailed hair highlights, light catching individual strands, hair shine" title="">–ë–ª–∏–∫–∏ –Ω–∞
                  –≤–æ–ª–æ—Å–∞—Ö</button>
                <button class="option-btn" data-group="hairDetail"
                  data-value="wind-blown dynamic hair movement, flowing individual strands"
                  title="">–†–∞–∑–≤–µ–≤–∞—é—â–∏–µ—Å—è</button>
                <button class="option-btn" data-group="hairDetail"
                  data-value="wet hair strands, clumped detailed locks, water droplets on hair" title="">–ú–æ–∫—Ä—ã–µ
                  –≤–æ–ª–æ—Å—ã</button>
                <button class="option-btn" data-group="hairDetail"
                  data-value="intricate braided hair, detailed woven texture, every strand in braid visible"
                  title="">–ö–æ—Å–∞
                  /
                  –ø–ª–µ—Ç–µ–Ω–∏–µ</button>
              </div>

              <div style="margin-top:6px;margin-bottom:10px;">
                <label class="toggle-label" id="hairRenderBoostLabel"
                  style="display: inline-flex; gap: 8px; font-size: 0.88em; color: var(--green);" title="">
                  <input type="checkbox" id="hairRenderBoost"> ‚ú® –£—Å–∏–ª–µ–Ω–Ω–∞—è –ü—Ä–æ—Ä–∏—Å–æ–≤–∫–∞ –≤–æ–ª–æ—Å
                  <span class="help-tip">?<span class="tip-text">–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç strand-based —Å–∏–º—É–ª—è—Ü–∏—é –≤–æ–ª–æ—Å: –∫–∞–∂–¥—ã–π –≤–æ–ª–æ—Å–æ–∫
                      –≤–∏–¥–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ (–Ω–µ —Å–µ—Ç–∫–∞), –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å —Ñ–æ–ª–ª–∏–∫—É–ª–æ–≤ —Å –≤–∏–¥–∏–º—ã–º —Å–∫–∞–ª—å–ø–æ–º –Ω–∞ –ø—Ä–æ–±–æ—Ä–µ,
                      –º–∏–∫—Ä–æ-–¥–µ—Ñ–µ–∫—Ç—ã (flyaway, frizz, baby hairs), –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–π –∫–µ—Ä–∞—Ç–∏–Ω–æ–≤—ã–π –±–ª–µ—Å–∫ —Å –∞–Ω–∏–∑–æ—Ç—Ä–æ–ø–Ω—ã–º
                      –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ–º,
                      —Ñ–∏–∑–∏–∫–∞ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏ –∏ –≤–µ—Ç—Ä–∞, –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –ª–∏–Ω–∏–∏ —Ä–æ—Å—Ç–∞ –≤–æ–ª–æ—Å. –£–±–∏—Ä–∞–µ—Ç ¬´–ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã–π —à–ª–µ–º¬ª –∏
                      –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—É—é –≥–ª–∞–¥–∫–æ—Å—Ç—å.</span></span>
                </label>
              </div>

              <span class="sub-label">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –æ–±—ä–µ–∫—Ç–æ–≤ <span class="mode-badge multi"
                  style="margin-left:6px">multi</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="material" data-value="brushed steel" title="">–®–ª–∏—Ñ–æ–≤–∞–Ω–Ω–∞—è
                  —Å—Ç–∞–ª—å</button>
                <button class="option-btn" data-group="material" data-value="matte finish" title="">–ú–∞—Ç–æ–≤—ã–π</button>
                <button class="option-btn" data-group="material" data-value="translucent plastic"
                  title="">–ü–ª–∞—Å—Ç–∏–∫</button>
                <button class="option-btn" data-group="material" data-value="worn leather texture"
                  title="">–ö–æ–∂–∞</button>
                <button class="option-btn" data-group="material" data-value="polished chrome" title="">–•—Ä–æ–º</button>
                <button class="option-btn" data-group="material" data-value="wet asphalt reflections" title="">–ú–æ–∫—Ä—ã–π
                  –∞—Å—Ñ–∞–ª—å—Ç</button>
                <button class="option-btn" data-group="material" data-value="rough concrete" title="">–ë–µ—Ç–æ–Ω</button>
                <button class="option-btn" data-group="material" data-value="frosted glass, translucent diffused"
                  title="">–ú–∞—Ç.
                  —Å—Ç–µ–∫–ª–æ</button>
                <button class="option-btn" data-group="material" data-value="clear glass, transparent, refractive"
                  title="">–°—Ç–µ–∫–ª–æ</button>
                <button class="option-btn" data-group="material"
                  data-value="crystal, faceted, prismatic light dispersion" title="">–•—Ä—É—Å—Ç–∞–ª—å</button>
                <button class="option-btn" data-group="material" data-value="polished marble, veined stone"
                  title="">–ú—Ä–∞–º–æ—Ä</button>
                <button class="option-btn" data-group="material" data-value="raw wood grain, natural timber"
                  title="">–î–µ—Ä–µ–≤–æ</button>
                <button class="option-btn" data-group="material" data-value="silk fabric, flowing, shiny textile"
                  title="">–®—ë–ª–∫</button>
                <button class="option-btn" data-group="material" data-value="ceramic, glazed pottery"
                  title="">–ö–µ—Ä–∞–º–∏–∫–∞</button>
                <button class="option-btn" data-group="material" data-value="gold, 24k polished gold surface"
                  title="">–ó–æ–ª–æ—Ç–æ</button>
              </div>
            </div>
          </div>

          <!-- Photographer Style -->
          <div class="section collapsed">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-green">üé®</span> –°—Ç–∏–ª—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∞ <span class="help-tip">?<span
                    class="tip-text"><b>–°—Ç–∏–ª—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∞</b> ‚Äî —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è –≤ –º–∞–Ω–µ—Ä–µ –∑–Ω–∞–º–µ–Ω–∏—Ç—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–æ–≤. –î–æ–±–∞–≤–ª—è–µ—Ç ¬´in
                    the
                    style of [–∏–º—è]¬ª –≤ –ø—Ä–æ–º–ø—Ç.<br><br><b>–í–ª–∏—è–µ—Ç –Ω–∞:</b> —Ü–≤–µ—Ç–æ–≤—É—é –ø–∞–ª–∏—Ç—Ä—É, –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ,
                    —Ö–∞—Ä–∞–∫—Ç–µ—Ä –æ—Å–≤–µ—â–µ–Ω–∏—è, —Ä–∞–±–æ—Ç—É —Å —Ç–µ–Ω—è–º–∏.<br><br><b>–õ—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:</b> Midjourney, Stable Diffusion,
                    Flux.<br><br><b>–°–æ–≤–µ—Ç:</b> –í—ã–±–æ—Ä –æ–¥–Ω–æ–≥–æ —Å—Ç–∏–ª—è –¥–∞—ë—Ç —á–∏—Å—Ç—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Ç–∏–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∞
                    –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è —Å—Ç–∏–ª–∏ –∫–∏–Ω–æ–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∏ —Ä–µ–∂–∏—Å—Å—ë—Ä–∞ (—Ä–∞–∑–Ω—ã–µ –¥–æ–º–µ–Ω—ã).</span></span></h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group">
                <button class="option-btn" data-group="photoStyle"
                  data-value="in the style of Annie Leibovitz, dramatic portrait lighting, rich colors" title="">Annie
                  Leibovitz</button>
                <button class="option-btn" data-group="photoStyle"
                  data-value="in the style of Peter Lindbergh, black and white, raw beauty, minimal retouching"
                  title="">Peter
                  Lindbergh</button>
                <button class="option-btn" data-group="photoStyle"
                  data-value="in the style of Steve McCurry, vivid saturated colors, documentary" title="">Steve
                  McCurry</button>
                <button class="option-btn" data-group="photoStyle"
                  data-value="in the style of Helmut Newton, high contrast, provocative glamour, black and white"
                  title="">Helmut
                  Newton</button>
                <button class="option-btn" data-group="photoStyle"
                  data-value="in the style of Mario Testino, warm golden tones, glossy fashion" title="">Mario
                  Testino</button>
                <button class="option-btn" data-group="photoStyle"
                  data-value="in the style of Tim Walker, surreal, fantastical, pastel dreamlike" title="">Tim
                  Walker</button>
                <button class="option-btn" data-group="photoStyle"
                  data-value="in the style of Ansel Adams, high dynamic range landscape, deep blacks, zone system"
                  title="">Ansel
                  Adams</button>
                <button class="option-btn" data-group="photoStyle"
                  data-value="in the style of Richard Avedon, stark white background, high contrast portrait"
                  title="">Richard
                  Avedon</button>
                <button class="option-btn" data-group="photoStyle"
                  data-value="in the style of Guy Bourdin, bold saturated colors, surreal fashion, strong shadows"
                  title="">Guy
                  Bourdin</button>
                <button class="option-btn" data-group="photoStyle"
                  data-value="in the style of Gregory Crewdson, cinematic suburban, eerie twilight, elaborate staged"
                  title="">Gregory
                  Crewdson</button>
              </div>
            </div>
          </div>

          <!-- Cinematographer Style -->
          <div class="section collapsed">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-green">üéûÔ∏è</span> –°—Ç–∏–ª—å –∫–∏–Ω–æ–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ <span class="help-tip">?<span
                    class="tip-text"><b>–°—Ç–∏–ª—å –∫–∏–Ω–æ–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞</b> ‚Äî —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è –≤ –º–∞–Ω–µ—Ä–µ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã—Ö DP (Director of
                    Photography).<br><br><b>–í–ª–∏—è–µ—Ç –Ω–∞:</b> —Ä–∏—Å—É–Ω–æ–∫ –æ—Å–≤–µ—â–µ–Ω–∏—è, —Ü–≤–µ—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—é, –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –≥–ª—É–±–∏–Ω—É —Ç–µ–Ω–µ–π,
                    –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –∫–∞–¥—Ä–∞.<br><br><b>–°–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –∫–∞–º–µ—Ä–∞–º–∏:</b> ARRI, RED, Panavision.<br><br><b>–°–æ–≤–º–µ—Å—Ç–Ω—ã–µ
                      —Ä–∞–±–æ—Ç—ã:</b> –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–∏–Ω–æ–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ —Ä–µ–∂–∏—Å—Å—ë—Ä—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–Ω —Ä–∞–±–æ—Ç–∞–ª –≤
                    —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ (–î–∏–∫–∏–Ω—Å‚Üî–í–∏–ª—å–Ω—ë–≤, –•–æ–π—Ç–µ–º–∞‚Üî–ù–æ–ª–∞–Ω, –†–∏—á–∞—Ä–¥—Å–æ–Ω‚Üî–¢–∞—Ä–∞–Ω—Ç–∏–Ω–æ –∏ –¥—Ä.).<br><br><b>–°–æ–≤–µ—Ç:</b>
                    –í—ã–±–∏—Ä–∞–π—Ç–µ
                    –ø–∞—Ä—É ¬´–æ–ø–µ—Ä–∞—Ç–æ—Ä + —Ä–µ–∂–∏—Å—Å—ë—Ä¬ª –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—á–Ω–æ–≥–æ –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–∏–ª—è.</span></span></h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group">
                <button class="option-btn" data-group="cinemaStyle"
                  data-value="cinematography by Roger Deakins, naturalistic light, precise framing, atmospheric"
                  title="">–†–æ–¥–∂–µ—Ä
                  –î–∏–∫–∏–Ω—Å</button>
                <button class="option-btn" data-group="cinemaStyle"
                  data-value="cinematography by Emmanuel Lubezki, long takes, natural light, immersive"
                  title="">–≠–º–º–∞–Ω—É—ç–ª—å
                  –õ—é–±–µ—Ü–∫–∏</button>
                <button class="option-btn" data-group="cinemaStyle"
                  data-value="cinematography by Hoyte van Hoytema, IMAX, desaturated palette, epic scale" title="">–•–æ–π—Ç–µ
                  –≤–∞–Ω
                  –•–æ–π—Ç–µ–º–∞</button>
                <button class="option-btn" data-group="cinemaStyle"
                  data-value="cinematography by Robert Richardson, high contrast, bold color, dynamic lighting"
                  title="">–†–æ–±–µ—Ä—Ç
                  –†–∏—á–∞—Ä–¥—Å–æ–Ω</button>
                <button class="option-btn" data-group="cinemaStyle"
                  data-value="cinematography by Bradford Young, low-key lighting, rich shadows, warm undertones"
                  title="">–ë—Ä—ç–¥—Ñ–æ—Ä–¥
                  –Ø–Ω–≥</button>
                <button class="option-btn" data-group="cinemaStyle"
                  data-value="cinematography by Janusz Kaminski, overexposed highlights, bleach bypass" title="">–Ø–Ω—É—à
                  –ö–∞–º–∏–Ω—å—Å–∫–∏</button>
                <button class="option-btn" data-group="cinemaStyle"
                  data-value="cinematography by Vittorio Storaro, painterly light, rich color symbolism"
                  title="">–í–∏—Ç—Ç–æ—Ä–∏–æ
                  –°—Ç–æ—Ä–∞—Ä–æ</button>
                <button class="option-btn" data-group="cinemaStyle"
                  data-value="cinematography by Greig Fraser, anamorphic, moody atmosphere, teal and orange"
                  title="">–ì—Ä–µ–π–≥
                  –§—Ä–µ–π–∑–µ—Ä</button>
                <button class="option-btn" data-group="cinemaStyle"
                  data-value="cinematography by Linus Sandgren, warm nostalgic tones, golden light, film grain"
                  title="">–õ–∏–Ω—É—Å
                  –°–∞–Ω–¥–≥—Ä–µ–Ω</button>
                <button class="option-btn" data-group="cinemaStyle"
                  data-value="cinematography by Ari Wegner, textured natural light, intimate framing, muted palette"
                  title="">–ê—Ä–∏
                  –í–µ–≥–Ω–µ—Ä</button>
              </div>
            </div>
          </div>

          <!-- Director Style -->
          <div class="section collapsed" id="directorStyleSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-orange">üé¨</span> –°—Ç–∏–ª—å —Ä–µ–∂–∏—Å—Å—ë—Ä–∞ <span class="help-tip">?<span
                    class="tip-text"><b>–°—Ç–∏–ª—å —Ä–µ–∂–∏—Å—Å—ë—Ä–∞</b> ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–π –ø–æ—á–µ—Ä–∫ –∑–Ω–∞–º–µ–Ω–∏—Ç—ã—Ö —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤.<br><br><b>–í–ª–∏—è–µ—Ç
                      –Ω–∞:</b> –æ–±—â—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É, —Ü–≤–µ—Ç–æ–≤—É—é –ø–∞–ª–∏—Ç—Ä—É, –∫–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —Ö–∞—Ä–∞–∫—Ç–µ—Ä
                    –º–∏–∑–∞–Ω—Å—Ü–µ–Ω—ã.<br><br><b>–°–æ–≤–º–µ—Å—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã:</b><br>‚Ä¢ –í–∏–ª—å–Ω—ë–≤ ‚Üî –î–∏–∫–∏–Ω—Å (Prisoners, Sicario, BR2049)<br>‚Ä¢
                    –í–∏–ª—å–Ω—ë–≤ ‚Üî –§—Ä–µ–π–∑–µ—Ä (Dune 1-2)<br>‚Ä¢ –ù–æ–ª–∞–Ω ‚Üî –•–æ–π—Ç–µ–º–∞ (Interstellar, Dunkirk, Oppenheimer)<br>‚Ä¢
                    –¢–∞—Ä–∞–Ω—Ç–∏–Ω–æ
                    ‚Üî –†–∏—á–∞—Ä–¥—Å–æ–Ω (Kill Bill, Django, Hateful Eight, OUATIH)<br>‚Ä¢ –°–∫–æ—Ç—Ç ‚Üî –°—Ç–æ—Ä–∞—Ä–æ<br><br><b>–°–æ–≤–µ—Ç:</b> –ü—Ä–∏
                    –≤—ã–±–æ—Ä–µ —Ä–µ–∂–∏—Å—Å—ë—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –∫–∏–Ω–æ–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, —Ä–∞–±–æ—Ç–∞–≤—à–∏–µ —Å –Ω–∏–º –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏.</span></span></h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group">
                <button class="option-btn" data-group="directorStyle"
                  data-value="directed by Denis Villeneuve, vast scale, muted desaturated palette, atmospheric silence, epic compositions"
                  title="">–î–µ–Ω–∏
                  –í–∏–ª—å–Ω—ë–≤</button>
                <button class="option-btn" data-group="directorStyle"
                  data-value="directed by Wes Anderson, symmetrical framing, pastel color palette, whimsical miniature aesthetic"
                  title="">–£—ç—Å
                  –ê–Ω–¥–µ—Ä—Å–æ–Ω</button>
                <button class="option-btn" data-group="directorStyle"
                  data-value="directed by Christopher Nolan, IMAX large format, desaturated blue tones, practical effects, epic scope"
                  title="">–ö—Ä–∏—Å—Ç–æ—Ñ–µ—Ä
                  –ù–æ–ª–∞–Ω</button>
                <button class="option-btn" data-group="directorStyle"
                  data-value="directed by David Fincher, dark muted palette, precise framing, cold blue-green tones, clinical aesthetic"
                  title="">–î—ç–≤–∏–¥
                  –§–∏–Ω—á–µ—Ä</button>
                <button class="option-btn" data-group="directorStyle"
                  data-value="directed by Ridley Scott, atmospheric haze, painterly compositions, epic historical grandeur"
                  title="">–†–∏–¥–ª–∏
                  –°–∫–æ—Ç—Ç</button>
                <button class="option-btn" data-group="directorStyle"
                  data-value="directed by Quentin Tarantino, bold saturated colors, dynamic angles, retro grindhouse aesthetic"
                  title="">–¢–∞—Ä–∞–Ω—Ç–∏–Ω–æ</button>
                <button class="option-btn" data-group="directorStyle"
                  data-value="directed by Greta Gerwig, warm natural light, soft pastels, intimate handheld framing, nostalgic warmth"
                  title="">–ì—Ä–µ—Ç–∞
                  –ì–µ—Ä–≤–∏–≥</button>
                <button class="option-btn" data-group="directorStyle"
                  data-value="directed by Jordan Peele, unsettling suburban beauty, vivid colors, horror tension, surreal undertones"
                  title="">–î–∂–æ—Ä–¥–∞–Ω
                  –ü–∏–ª</button>
                <button class="option-btn" data-group="directorStyle"
                  data-value="directed by Bong Joon-ho, social contrast, sharp compositions, dark humor, class division visual metaphor"
                  title="">–ü–æ–Ω
                  –î–∂—É–Ω-—Ö–æ</button>
                <button class="option-btn" data-group="directorStyle"
                  data-value="directed by Chloe Zhao, golden hour landscapes, natural light, documentary intimacy, vast American West"
                  title="">–•–ª–æ—è
                  –ß–∂–∞–æ</button>
              </div>
            </div>
          </div>
          <!-- Typography -->
          <div class="section collapsed" id="textSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-orange">üìù</span> –¢–µ–∫—Å—Ç –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ <span class="help-tip">?<span
                    class="tip-text">–¢–µ–∫—Å—Ç –ø—Ä—è–º–æ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–µ (–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Å–ª–æ–≥–∞–Ω). –õ—É—á—à–µ –≤—Å–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä—è—Ç Ideogram –∏ DALL¬∑E
                    3.
                    –í Midjourney —Ç–µ–∫—Å—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ä–∞–∑–±–æ—Ä—á–∏–≤—ã–º.</span></span></h2>
            </div>
            <div class="section-content">
              <input type="text" class="input-field" id="textContent"
                placeholder="–¢–µ–∫—Å—Ç –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞, –Ω–∞–ø—Ä: &quot;SALE 50%&quot;" oninput="handleInput()">

              <span class="sub-label">–°—Ç–∏–ª—å —à—Ä–∏—Ñ—Ç–∞ <span class="mode-badge multi"
                  style="margin-left:6px">multi</span></span>
              <div class="option-group">
                <button class="option-btn" data-group="typography" data-value="bold sans-serif typography"
                  title="">–ñ–∏—Ä–Ω—ã–π
                  –≥—Ä–æ—Ç–µ—Å–∫</button>
                <button class="option-btn" data-group="typography" data-value="handwritten text"
                  title="">–†—É–∫–æ–ø–∏—Å–Ω—ã–π</button>
                <button class="option-btn" data-group="typography" data-value="elegant serif typography"
                  title="">–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —Å –∑–∞—Å–µ—á–∫–∞–º–∏</button>
                <button class="option-btn" data-group="typography" data-value="neon glowing text" title="">–ù–µ–æ–Ω</button>
                <button class="option-btn" data-group="typography" data-value="retro vintage lettering"
                  title="">–†–µ—Ç—Ä–æ</button>
              </div>
            </div>
          </div>


















          <!-- Special Modes -->
          <div class="section collapsed">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-green">‚ú®</span> –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∂–∏–º—ã <span class="help-tip">?<span
                    class="tip-text"><b>Before/After</b> ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ-—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ ¬´–¥–æ –∏ –ø–æ—Å–ª–µ¬ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ
                    side-by-side. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏, —Ä–µ—Å—Ç–∞–≤—Ä–∞—Ü–∏–∏, –º–∞–∫–∏—è–∂–∞.<br><br><b>Seamless
                      Pattern</b> ‚Äî —Å–æ–∑–¥–∞—ë—Ç –±–µ—Å—à–æ–≤–Ω—ã–π —Ç–∞–π–ª–æ–≤—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ñ–æ–Ω–æ–≤, —Ç–µ–∫—Å—Ç–∏–ª—è, –æ–±–æ–µ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å
                    –∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π Flat Lay.<br><br><b>Seed</b> ‚Äî —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∑–µ—Ä–Ω–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏
                    —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
                    –û–¥–∏–Ω seed + —Ç–µ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚âà –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.<br><br>–†–µ–∂–∏–º—ã –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ –º–µ–∂–¥—É —Å–æ–±–æ–π –∏ —Å
                    Generate 4 / 3√ó3.</span></span></h2>
            </div>
            <div class="section-content">
              <div class="toggle-row">
                <!-- generateFourMode moved to top -->
                <label class="toggle-label" id="beforeAfterLabel" title=""><input type="checkbox" id="beforeAfter">
                  –î–æ/–ü–æ—Å–ª–µ</label>
                <label class="toggle-label" id="seamlessPatternLabel" title=""><input type="checkbox"
                    id="seamlessPattern">
                  –ë–µ—Å—à–æ–≤–Ω—ã–π —É–∑–æ—Ä</label>
              </div>
              <span class="sub-label">Seed ID <span class="help-tip">?<span class="tip-text">Seed (–∑–µ—Ä–Ω–æ) ‚Äî
                    —á–∏—Å–ª–æ–≤–æ–π
                    –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, —Ñ–∏–∫—Å–∏—Ä—É—é—â–∏–π —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ seed –ø—Ä–∏ —Ç–µ—Ö –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
                    –¥–∞—ë—Ç –ø–æ—á—Ç–∏
                    –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ –∏ –∏—Ç–µ—Ä–∞—Ü–∏–π. –í Midjourney: --seed N, –≤
                    SD: seed
                    parameter. –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ.</span></span></span>
              <div style="display:flex;gap:8px;align-items:center;margin-top:4px;">
                <input type="number" class="input-field" id="seedInput" placeholder="–ü—É—Å—Ç–æ = —Å–ª—É—á–∞–π–Ω—ã–π"
                  style="flex:1;max-width:220px" min="0" max="4294967295" autocomplete="off" oninput="handleInput()">
                <button class="btn btn-ghost" style="min-width:auto;padding:8px 12px;font-size:.82em"
                  id="randomSeedBtn">üé≤
                  Random</button>
                <button class="btn btn-ghost" style="min-width:auto;padding:8px 12px;font-size:.82em"
                  id="clearSeedBtn">‚úï</button>
              </div>
            </div>
          </div>

          <!-- Engine-Specific Generation Parameters -->
          <div class="section collapsed" id="genParamsSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-purple">‚öôÔ∏è</span> –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ <span class="help-tip">?<span
                    class="tip-text"><b>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–∫–∞.</b><br><br><b>Midjourney:</b>
                    --stylize (—Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å), --chaos (–≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å), --weird (–Ω–µ–æ–±—ã—á–Ω–æ—Å—Ç—å), --style raw (–æ—Ç–∫–ª—é—á–∞–µ—Ç
                    —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—é MJ), –≤—ã–±–æ—Ä –≤–µ—Ä—Å–∏–∏.<br><br><b>SD/Flux:</b> CFG Scale (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–º–ø—Ç—É), Steps (—à–∞–≥–∏
                    –¥–∏—Ñ—Ñ—É–∑–∏–∏). –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–æ –≤–µ—Å–∞ —Ç–æ–∫–µ–Ω–æ–≤ (word:1.5).<br><br><b>DALL¬∑E 3:</b> vivid/natural —Å—Ç–∏–ª—å,
                    hd/standard –∫–∞—á–µ—Å—Ç–≤–æ.<br><br><b>Flux:</b> –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ (dev/schnell/pro).</span></span></h2>
            </div>
            <div class="section-content">

              <!-- Midjourney params -->
              <div id="mjGenParams" style="display:none;">
                <div style="display:flex;gap:12px;margin-bottom:8px;flex-wrap:wrap;">
                  <div style="flex:1;min-width:130px;">
                    <span class="sub-label">–í–µ—Ä—Å–∏—è MJ</span>
                    <div class="option-group">
                      <button class="option-btn" data-group="mjVersion" data-value="7" title="">V7</button>
                      <button class="option-btn" data-group="mjVersion" data-value="6.1" title="">V6.1</button>
                      <button class="option-btn" data-group="mjVersion" data-value="5.2" title="">V5.2</button>
                    </div>
                  </div>
                  <div style="flex:1;min-width:130px;">
                    <span class="sub-label">–°—Ç–∏–ª—å</span>
                    <div class="option-group">
                      <button class="option-btn" data-group="mjStyle" data-value="" title="">Default</button>
                      <button class="option-btn" data-group="mjStyle" data-value="raw" title="">Raw</button>
                    </div>
                  </div>
                </div>

                <span class="sub-label">Stylize (--s): <b id="mjStylizeVal">250</b> <span
                    style="font-weight:400;color:var(--text-muted)">‚Äî 0=–º–∏–Ω–∏–º—É–º, 1000=–º–∞–∫—Å–∏–º—É–º
                    —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏</span></span>
                <input type="range" min="0" max="1000" value="250" step="10" id="mjStylizeSlider">

                <span class="sub-label" style="margin-top:8px;">Chaos (--chaos): <b id="mjChaosVal">0</b> <span
                    style="font-weight:400;color:var(--text-muted)">‚Äî 0=—Å—Ç–∞–±–∏–ª—å–Ω–æ, 100=–º–∞–∫—Å–∏–º—É–º
                    —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏</span></span>
                <input type="range" min="0" max="100" value="0" id="mjChaosSlider">

                <span class="sub-label" style="margin-top:8px;">Weird (--weird): <b id="mjWeirdVal">0</b> <span
                    style="font-weight:400;color:var(--text-muted)">‚Äî 0=–Ω–æ—Ä–º–∞–ª—å–Ω–æ, 3000=–º–∞–∫—Å–∏–º—É–º
                    —Å—Ç—Ä–∞–Ω–Ω–æ—Å—Ç–∏</span></span>
                <input type="range" min="0" max="3000" value="0" step="50" id="mjWeirdSlider">
              </div>

              <!-- SD params -->
              <div id="sdGenParams" style="display: none;">
                <span class="sub-label">CFG Scale: <b id="sdCfgVal">7</b> <span
                    style="font-weight:400;color:var(--text-muted)">‚Äî 1=—Å–≤–æ–±–æ–¥–∞, 20=—Å—Ç—Ä–æ–≥–æ –ø–æ –ø—Ä–æ–º–ø—Ç—É</span></span>
                <input type="range" min="1" max="20" value="7" step="0.5" id="sdCfgSlider">

                <span class="sub-label" style="margin-top:8px;">Steps: <b id="sdStepsVal">25</b> <span
                    style="font-weight:400;color:var(--text-muted)">‚Äî –±–æ–ª—å—à–µ=–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–µ–µ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ</span></span>
                <input type="range" min="10" max="50" value="25" id="sdStepsSlider">

                <div class="hint" style="margin-top:8px;">üí° <b>–í–µ—Å–∞ —Ç–æ–∫–µ–Ω–æ–≤:</b> –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ
                  <code>(–≤–∞–∂–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç:1.5)</code> –ø—Ä—è–º–æ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ —Å—Ü–µ–Ω—ã –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è. <code>(—ç–ª–µ–º–µ–Ω—Ç:0.5)</code> ‚Äî
                  –¥–ª—è
                  –æ—Å–ª–∞–±–ª–µ–Ω–∏—è.
                </div>
              </div>

              <!-- Flux params -->
              <div id="fluxGenParams" style="display:none;">
                <span class="sub-label">–ú–æ–¥–µ–ª—å Flux</span>
                <div class="option-group">
                  <button class="option-btn" data-group="fluxModel" data-value="dev" title="">Dev (–∫–∞—á–µ—Å—Ç–≤–æ)</button>
                  <button class="option-btn" data-group="fluxModel" data-value="schnell" title="">Schnell
                    (—Å–∫–æ—Ä–æ—Å—Ç—å)</button>
                  <button class="option-btn" data-group="fluxModel" data-value="pro" title="">Pro</button>
                </div>

                <span class="sub-label" style="margin-top:8px;">Guidance Scale: <b id="fluxGuidanceVal">3.5</b> <span
                    style="font-weight:400;color:var(--text-muted)">‚Äî –∞–Ω–∞–ª–æ–≥ CFG –¥–ª—è Flux</span></span>
                <input type="range" min="1" max="10" value="3.5" step="0.5" id="fluxGuidanceSlider">

                <span class="sub-label" style="margin-top:8px;">Steps: <b id="fluxStepsVal">28</b></span>
                <input type="range" min="4" max="50" value="28" id="fluxStepsSlider">

                <div class="hint" style="margin-top:8px;">üí° <b>–í–µ—Å–∞ —Ç–æ–∫–µ–Ω–æ–≤:</b> Flux –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
                  <code>(—ç–ª–µ–º–µ–Ω—Ç:1.5)</code> —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –∫–∞–∫ SD.
                </div>
              </div>

              <!-- DALL-E 3 params -->
              <div id="dalleGenParams" style="display:none;">
                <div style="display:flex;gap:12px;flex-wrap:wrap;">
                  <div style="flex:1;min-width:130px;">
                    <span class="sub-label">–°—Ç–∏–ª—å</span>
                    <div class="option-group">
                      <button class="option-btn" data-group="dalleStyle" data-value="vivid" title="">Vivid
                        (—è—Ä–∫–∏–π)</button>
                      <button class="option-btn" data-group="dalleStyle" data-value="natural" title="">Natural
                        (–Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π)</button>
                    </div>
                  </div>
                  <div style="flex:1;min-width:130px;">
                    <span class="sub-label">–ö–∞—á–µ—Å—Ç–≤–æ</span>
                    <div class="option-group">
                      <button class="option-btn" data-group="dalleQuality" data-value="hd" title="">HD</button>
                      <button class="option-btn" data-group="dalleQuality" data-value="standard"
                        title="">Standard</button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- No params engines -->
              <div id="noGenParams" style="display: none;">
                <div class="hint">–í—ã–±—Ä–∞–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –Ω–µ –∏–º–µ–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è
                  —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç –ø—Ä–æ–º–ø—Ç–∞.</div>
              </div>
            </div>
          </div>

          <!-- References -->
          <div class="section collapsed" id="referencesSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-orange">üñºÔ∏è</span> –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è <span class="help-tip">?<span
                    class="tip-text">–î–æ 13 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π-—Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤. –û—Ç–º–µ—Ç—å—Ç–µ —á–µ–∫–±–æ–∫—Å–∞–º–∏, —á—Ç–æ
                    –∏–∑–≤–ª–µ—á—å (–ª–∏—Ü–æ, –ø–∞–ª–∏—Ç—Ä—É, –ø–æ–∑—É,
                    —Å—Ç–∏–ª—å, —Ç–µ–∫—Å—Ç—É—Ä—É). –¢–∏–ø —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É.</span></span></h2>
            </div>
            <div class="section-content">
              <p id="refUploadHint" style="font-size:.82em;color:var(--text-muted);margin-bottom:10px;">–î–æ 13
                –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –≤–∑—è—Ç—å –∏–∑ –∫–∞–∂–¥–æ–≥–æ.</p>

              <input class="ref-upload" type="file" id="referenceImages"
                accept="image/jpeg,image/png,image/gif,image/webp,image/*" multiple="">

              <div id="imagePreviewContainer" style="display: none;">
                <div id="imagePreviews"></div>
              </div>

              <!-- Non-MJ reference options -->
              <div id="referenceOptions" style="display: none; margin-top: 12px;">
                <span class="sub-label">–¢–∏–ø —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞</span>
                <div class="option-group">
                  <button class="option-btn" data-group="referenceType" data-value="style reference"
                    title="">–°—Ç–∏–ª—å</button>
                  <button class="option-btn" data-group="referenceType" data-value="composition reference"
                    title="">–ö–æ–º–ø–æ–∑–∏—Ü–∏—è</button>
                  <button class="option-btn" data-group="referenceType" data-value="character reference"
                    title="">–ü–µ—Ä—Å–æ–Ω–∞–∂</button>
                  <button class="option-btn" data-group="referenceType" data-value="color palette reference"
                    title="">–ü–∞–ª–∏—Ç—Ä–∞</button>
                </div>
              </div>

              <!-- Generic weight slider (non-MJ engines that support weight) -->
              <div id="referenceWeight" style="display:none;margin-top:12px;">
                <span class="sub-label">
                  –°–∏–ª–∞ –≤–ª–∏—è–Ω–∏—è: <span style="color:var(--accent-light);font-weight:800;" id="weightValue">50</span>%
                </span>
                <input type="range" min="0" max="100" value="50" id="refWeightSlider">
                <div class="hint">0% = —Å–ª–∞–±–æ–µ –≤–ª–∏—è–Ω–∏–µ, 100% = –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
              </div>
            </div>
          </div>

          <!-- Quality -->
          <div class="section collapsed" id="qualitySection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-purple">üèÅ</span> –ö–∞—á–µ—Å—Ç–≤–æ <span class="help-tip">?<span
                    class="tip-text">–ö–ª—é—á–µ–≤—ã–µ
                    —Å–ª–æ–≤–∞ –∫–∞—á–µ—Å—Ç–≤–∞. Ultra (8K) ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è. High (4K) ‚Äî
                    –¥–ª—è
                    –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á. Standard ‚Äî –±—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è.</span></span></h2>
              <span class="mode-badge">single</span>
            </div>
            <div class="section-content">
              <div class="option-group">
                <button class="option-btn" data-group="quality"
                  data-value="8k, masterpiece, best quality, ultra detailed" title="">Ultra
                  (8K)</button>
                <button class="option-btn" data-group="quality" data-value="4k, high quality, detailed" title="">High
                  (4K)</button>
                <button class="option-btn" data-group="quality" data-value="high quality" title="">Standard</button>
              </div>
            </div>
          </div>



          <!-- Negative -->
          <div class="section collapsed">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-red">üö´</span> –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–º–ø—Ç <span class="help-tip">?<span
                    class="tip-text">–ß—Ç–æ
                    –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏. –†–∞–±–æ—Ç–∞–µ—Ç –≤ SD (–æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ) –∏ MJ
                    (--no). DALL¬∑E
                    3 –∏ Flux –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –Ω–µ–≥–∞—Ç–∏–≤—ã.</span></span></h2>
            </div>
            <div class="section-content">
              <textarea class="input-field" id="negativePrompt" placeholder="–ß—Ç–æ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏..."
                oninput="handleInput()"></textarea>
              <div class="option-group" style="margin-top:8px;">
                <button class="option-btn" data-action="addNegative"
                  data-value="blurry, low quality, artifacts, noise">–ê–Ω—Ç–∏-–±—Ä–∞–∫</button>
                <button class="option-btn" data-action="addNegative"
                  data-value="cartoon, CGI, unrealistic">–ê–Ω—Ç–∏-CGI</button>
                <button class="option-btn" data-action="addNegative"
                  data-value="airbrushed, plastic skin, overly smooth">–ê–Ω—Ç–∏-–ø–ª–∞—Å—Ç–∏–∫</button>
                <button class="option-btn" data-action="addNegative"
                  data-value="extra fingers, deformed hands, bad anatomy, mutated">–ê–Ω—Ç–∏-–∞–Ω–∞—Ç–æ–º–∏—è</button>
                <button class="option-btn" data-action="addNegative"
                  data-value="text, watermark, signature, logo">–ê–Ω—Ç–∏-—Ç–µ–∫—Å—Ç</button>
                <button class="option-btn" data-action="addNegative"
                  data-value="cropped, out of frame, cut off">–ê–Ω—Ç–∏-–∫—Ä–æ–ø</button>
              </div>
            </div>
          </div>

          <div id="conflictWarnings" class="warn-box" style="display: none;">‚ö†Ô∏è <b>–í–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã:</b><br>‚Ä¢ –ë—ã—Å—Ç—Ä—ã–π
            —Å—Ç–∏–ª–µ–≤–æ–π –ø—Ä–µ—Å–µ—Ç + –∞–≤—Ç–æ—Ä—Å–∫–∏–π —Å—Ç–∏–ª—å ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Å—Ç–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –æ–¥–Ω–æ.<br>‚Ä¢ –°—Ç–∏–ª–µ–≤–æ–π –ø—Ä–µ—Å–µ—Ç —É–∂–µ
            –∑–∞–¥–∞—ë—Ç –∫–∞–º–µ—Ä—É/–æ–ø—Ç–∏–∫—É ‚Äî –≤–∞—à –≤—ã–±–æ—Ä –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å.<br>‚Ä¢ üîí –ú–∞–∫—Å. –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ –≤—Å–µ–≥–æ —Å
            –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏.</div>

        </div>

        <!-- RIGHT PANEL -->
        <div class="right-panel">

          <div class="stats-row">
            <div class="stat-card">
              <div class="stat-value" id="charCount">18</div>
              <div class="stat-label">–°–∏–º–≤–æ–ª–æ–≤</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="wordCount">3</div>
              <div class="stat-label">–°–ª–æ–≤</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="paramCount">3</div>
              <div class="stat-label">–ü–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</div>
            </div>
          </div>

          <!-- Active Tags -->
          <div class="section collapsed" style="display: none;">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-purple">üè∑Ô∏è</span> –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h2>
            </div>
            <div class="section-content">
              <div class="tag-area" id="activeTags"></div>
            </div>
          </div>

          <!-- Prompt Output -->
          <div class="section" id="promptSection" style="flex:1;display:flex;flex-direction:column;">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-green">üìã</span> –ü—Ä–æ–º–ø—Ç</h2>
              <div class="format-indicator"><span class="dot"></span> <span id="promptFormatLabel">Flat (–ü–ª–æ—Å–∫–∏–π)</span>
              </div>
            </div>
            <div class="section-content">

              <!-- Format selector -->
              <!-- Format selector -->
              <div class="format-tabs">
                <button class="format-tab active" data-format="flat" onclick="setPromptFormat(&#39;flat&#39;)">Flat
                  (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</button>
                <button class="format-tab" data-format="structured"
                  onclick="setPromptFormat(&#39;structured&#39;)">Structured</button>
                <button class="format-tab" data-format="midjourney"
                  onclick="setPromptFormat(&#39;midjourney&#39;)">Midjourney</button>
              </div>

              <div class="output-box" id="promptOutput">Generate an image.</div>

              <!-- N8N Integration with Webhook Input -->
              <div class="action-row"
                style="margin-top:12px; margin-bottom:12px; padding:10px; background:rgba(255,255,255,0.05); border-radius:8px; border:1px solid rgba(255,255,255,0.1); justify-content: space-between;">
                <div style="display:flex; flex:1; gap:8px; align-items:center;">
                  <span style="font-size:1.2em;">üîó</span>
                  <input type="text" id="n8nWebhookUrl" class="input-field"
                    placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ Webhook URL –∏–∑ n8n..." style="flex:1; font-size: 0.9em;">
                  <button class="btn"
                    style="background: linear-gradient(45deg, #FF6B6B, #F06595); color:white; border:none; font-weight:bold;"
                    id="sendToN8nBtn">üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ n8n</button>
                </div>
              </div>

              <div class="action-row" style="margin-top:12px;">
                <button class="btn btn-accent" id="copyPromptBtn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn btn-ghost" id="compactBtn" title="–°–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç –∫ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω—É–∂–Ω–æ–º—É —è–¥—Ä—É">‚ö°
                  –ö–æ–º–ø–∞–∫—Ç</button>
                <button class="btn btn-green" id="saveBtn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn btn-red" id="resetBtn">üóëÔ∏è –°–±—Ä–æ—Å</button>
              </div>
            </div>
          </div>

          <!-- JSON Output -->
          <div class="section collapsed" id="jsonSection">
            <div class="section-header" data-bound="true">
              <h2><span class="icon icon-orange">üßæ</span> JSON</h2>
            </div>
            <div class="section-content">
              <div class="json-box" id="jsonOutput">{
                "schema": "vpe-prompt-builder-v2",
                "model": null,
                "subject": "",
                "prompt_flat": "Generate an image.",
                "technical": {
                "aspect_ratio": null,
                "resolution": null
                },
                "parameters": {
                "purpose": null,
                "format": null,
                "medium": null,
                "mood": null,
                "camera": {
                "body": null,
                "lens": null,
                "shot_size": null,
                "focal_length": null,
                "aperture": null,
                "angle": null,
                "composition": null
                },
                "lighting": {
                "type": {
                "primary": null,
                "accent": null
                },
                "time": {
                "primary": null,
                "accent": null
                },
                "effects": [],
                "palette": null
                },
                "materials": {
                "skin": [],
                "hair": [],
                "objects": []
                },
                "text": null,
                "quality": null,
                "photo_style": null,
                "cinema_style": null,
                "director_style": null,
                "art_style": null,
                "film_stock": null,
                "quick_style": null,
                "fashion_food_style": null,
                "emotion": null,
                "cinematic_preset": null,
                "audio": {
                "ambience": null,
                "foley": null,
                "cinematic_fx": null
                }
                },
                "modes": {
                "generateFour": false,
                "grid3x3": false,
                "maxConsistency": false,
                "before_after": false,
                "seamless_pattern": false
                },
                "renderBoost": {
                "skin": false,
                "hair": false
                },
                "seed": null,
                "engine_params": null,
                "references": {
                "type": null,
                "weight": 50,
                "images": []
                },
                "negative": ""
                }</div>
              <div class="action-row" style="margin-top:8px;">
                <button class="btn btn-ghost" id="copyJsonBtn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å JSON</button>
              </div>
            </div>
          </div>



        </div>



        <script>
          // =============================================
          // CONFIG
          // =============================================
          const groupConfig = {
            aiModel: { mode: "single" },
            cameraBody: { mode: "single" },
            aspectRatio: { mode: "single" },
            resolution: { mode: "single" },
            purpose: { mode: "single" },
            format: { mode: "single" },
            medium: { mode: "single" },
            lens: { mode: "single" },
            focalLength: { mode: "single" },
            shotSize: { mode: "single" },
            aperture: { mode: "single" },
            angle: { mode: "single" },
            composition: { mode: "single" },
            quality: { mode: "single" },
            mjVersion: { mode: "single" },
            mjStyle: { mode: "single" },
            fluxModel: { mode: "single" },
            dalleStyle: { mode: "single" },
            dalleQuality: { mode: "single" },
            referenceType: { mode: "single" },
            photoStyle: { mode: "single" },
            cinemaStyle: { mode: "single" },
            directorStyle: { mode: "single" },
            artStyle: { mode: "single" },
            colorPalette: { mode: "single" },
            mood: { mode: "single" },
            lightType: { mode: "primaryAccent" },
            timeOfDay: { mode: "primaryAccent" },
            lightFX: { mode: "multi" },
            skinDetail: { mode: "multi" },
            hairDetail: { mode: "multi" },
            material: { mode: "multi" },
            typography: { mode: "multi" },
            quickStyle: { mode: "single" },
            fashionFoodStyle: { mode: "single" },
            emotion: { mode: "single" }
          };

          const resolutionMap = {
            '1:1': [{ value: '1024x1024', label: '1K (1024√ó1024)' }, { value: '2048x2048', label: '2K (2048√ó2048)' }, { value: '4096x4096', label: '4K (4096√ó4096)' }],
            '16:9': [{ value: '1920x1080', label: 'Full HD (1920√ó1080)' }, { value: '2560x1440', label: '2K (2560√ó1440)' }, { value: '3840x2160', label: '4K UHD (3840√ó2160)' }, { value: '7680x4320', label: '8K (7680√ó4320)' }],
            '9:16': [{ value: '1080x1920', label: 'Full HD (1080√ó1920)' }, { value: '1440x2560', label: '2K (1440√ó2560)' }, { value: '2160x3840', label: '4K UHD (2160√ó3840)' }],
            '4:3': [{ value: '1024x768', label: 'XGA (1024√ó768)' }, { value: '2048x1536', label: '2K (2048√ó1536)' }, { value: '4096x3072', label: '4K (4096√ó3072)' }],
            '3:4': [{ value: '768x1024', label: '–ü–æ—Ä—Ç—Ä–µ—Ç (768√ó1024)' }, { value: '1536x2048', label: '2K (1536√ó2048)' }, { value: '3072x4096', label: '4K (3072√ó4096)' }],
            '21:9': [{ value: '2560x1080', label: 'UltraWide (2560√ó1080)' }, { value: '3440x1440', label: 'UWQHD (3440√ó1440)' }, { value: '5120x2160', label: '5K UW (5120√ó2160)' }],
            '2:3': [{ value: '1366x2048', label: '2K (1366√ó2048)' }, { value: '2732x4096', label: '4K (2732√ó4096)' }],
            '3:2': [{ value: '2048x1366', label: '2K (2048√ó1366)' }, { value: '4096x2732', label: '4K (4096√ó2732)' }]
          };

          // Model-specific tips
          const modelTips = {
            'midjourney': 'MJ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ --ar, --v, --s, --cref –≤ –∫–æ–Ω—Ü–µ –ø—Ä–æ–º–ø—Ç–∞. –§–æ—Ä–º–∞—Ç ¬´Midjourney¬ª —Å—Ç—Ä–æ–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.',
            'dall-e-3': 'DALL¬∑E 3: –ø–∏—à–∏—Ç–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º —è–∑—ã–∫–æ–º, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã. –ù–µ–≥–∞—Ç–∏–≤—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è.',
            'stable-diffusion': 'SD: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤—ã, –≤–µ—Å–∞ —Ç–æ–∫–µ–Ω–æ–≤ (word:1.3), LoRA. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç Flat.',
            'flux': 'Flux: –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫, –∫–∞–∫ DALL¬∑E. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç --ar.',
            'ideogram': 'Ideogram: –æ—Ç–ª–∏—á–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–µ–∫—Å—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫.',
            'gemini-imagen': 'Gemini Imagen: –æ–ø–∏—à–∏—Ç–µ —Å—Ü–µ–Ω—É + –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã –≤ —á–∞—Ç.',
            'chatgpt-image': 'ChatGPT Image (GPT-Image-1 / gpt-4o): –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥. –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä —Ç–µ–∫—Å—Ç–∞.',
            'nano-banana-pro': 'Nano Banana Pro: –±—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –≤ —Å—Ç–∏–ª–µ Stable Diffusion. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏.'
          };

          // Presets
          const presets = [
            {
              name: "üé¨ –ö–∏–Ω–æ–ø–æ—Ä—Ç—Ä–µ—Ç",
              values: {
                aiModel: "stable-diffusion", cameraBody: "shot on Sony A7R V", aspectRatio: "3:4", purpose: "Cinematic Still", format: "photorealistic",
                lens: "Sony FE 85mm f/1.4 GM", aperture: "f/2.0, gentle depth of field, balanced bokeh, slightly more context than f/1.4", angle: "eye level shot, neutral perspective, straight on angle, direct engagement", composition: "close-up portrait, head and shoulders, emotional connection, facial expression focus, detailed features",
                quality: "4k, high quality, detailed",
                lightType: { primary: "dramatic chiaroscuro", accent: "backlighting silhouette" },
                timeOfDay: { primary: "golden hour warm sunlight", accent: "" },
                lightFX: ["rim light"], skinDetail: ["visible skin pores, natural grain", "natural freckles and imperfections"],
                material: [], typography: []
              }
            },
            {
              name: "üì¶ –ü—Ä–µ–¥–º–µ—Ç–Ω–∞—è —Å—ä—ë–º–∫–∞",
              values: {
                aiModel: "stable-diffusion", cameraBody: "shot on Hasselblad X2D 100C", aspectRatio: "1:1", purpose: "Product Photography", format: "photorealistic",
                lens: "Canon RF 100mm f/2.8L Macro IS USM", aperture: "f/8.0, deep focus, optimal lens sharpness, landscape photography sweet spot", angle: "eye level shot, neutral perspective, straight on angle, direct engagement", composition: "overhead flat lay photography, knolling arrangement, organized composition, geometric order, top-down view",
                quality: "8k, masterpiece, best quality, ultra detailed",
                lightType: { primary: "studio three-point lighting", accent: "softbox beauty light" },
                timeOfDay: { primary: "bright midday sun", accent: "" },
                lightFX: [], skinDetail: [],
                material: ["matte finish", "polished chrome"], typography: []
              }
            },
            {
              name: "üåÉ –ù–µ–æ–Ω–æ–≤—ã–π –∫–∏–±–µ—Ä–ø–∞–Ω–∫",
              values: {
                aiModel: "midjourney", cameraBody: "shot on RED V-Raptor", aspectRatio: "21:9", purpose: "Cinematic Still", format: "photorealistic",
                lens: "ARRI Signature Prime 35mm T1.8", aperture: "f/2.8, balanced depth of field, professional portrait look, controlled background separation", angle: "low angle shot, looking up at subject, imposing perspective, heroic stature", composition: "wide shot, establishing shot, subject in environment, cinematic landscape context, storytelling scale",
                quality: "4k, high quality, detailed",
                lightType: { primary: "neon glow lighting", accent: "dramatic chiaroscuro" },
                timeOfDay: { primary: "night, artificial lighting", accent: "blue hour twilight" },
                lightFX: ["god rays", "lens flare", "volumetric fog"], skinDetail: [],
                material: ["wet asphalt reflections"], typography: []
              }
            },
            {
              name: "üé® –ö–æ–Ω—Ü–µ–ø—Ç-–∞—Ä—Ç",
              values: {
                aiModel: "stable-diffusion", cameraBody: "", aspectRatio: "16:9", purpose: "Concept Art", format: "oil painting",
                lens: "", aperture: "f/2.8, balanced depth of field, professional portrait look, controlled background separation", angle: "eye level shot, neutral perspective, straight on angle, direct engagement", composition: "extreme wide shot, massive scale, tiny subject in vast landscape, epic panorama, environmental dominance",
                quality: "4k, high quality, detailed",
                lightType: { primary: "soft natural light", accent: "" },
                timeOfDay: { primary: "golden hour warm sunlight", accent: "" },
                lightFX: ["volumetric fog", "god rays"], skinDetail: [],
                material: [], typography: []
              }
            },
            {
              name: "üíº –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è —Å—ä—ë–º–∫–∞",
              values: {
                aiModel: "stable-diffusion", cameraBody: "shot on Phase One IQ4 150MP", aspectRatio: "4:3", purpose: "Product Photography", format: "photorealistic",
                lens: "Canon RF 50mm f/1.2L USM", aperture: "f/5.6, deep depth of field, group photo sharpness, landscape with foreground interest", angle: "slightly high angle, looking down at subject, submissive perspective", composition: "medium shot, waist up, standard cinematic framing, character with context, neutral distance",
                quality: "8k, masterpiece, best quality, ultra detailed",
                lightType: { primary: "studio three-point lighting", accent: "softbox beauty light" },
                timeOfDay: { primary: "bright midday sun", accent: "" },
                lightFX: ["subsurface scattering"], skinDetail: ["visible skin pores, natural grain"],
                material: ["matte finish"], typography: []
              }
            },
            {
              name: "üì∫ –†–µ–∫–ª–∞–º–Ω—ã–π —Ä–æ–ª–∏–∫",
              values: {
                aiModel: "midjourney", cameraBody: "shot on ARRI ALEXA 35", aspectRatio: "16:9", purpose: "Cinematic Still", format: "photorealistic",
                lens: "Cooke S7/i 50mm T2.0 Full Frame Plus", aperture: "f/2.8, balanced depth of field, professional portrait look, controlled background separation", angle: "slightly low angle, hero shot, up-looking perspective, authoritative stance", composition: "medium close-up shot, chest up, standard dialogue framing, business portrait, interview style",
                quality: "4k, high quality, detailed",
                lightType: { primary: "studio three-point lighting", accent: "backlighting silhouette" },
                timeOfDay: { primary: "bright midday sun", accent: "golden hour warm sunlight" },
                lightFX: ["rim light", "lens flare"], skinDetail: ["visible skin pores, natural grain", "peach fuzz, vellus hair"],
                material: ["polished chrome"], typography: ["bold sans-serif typography"]
              }
            },
            {
              name: "üî¨ –ú–∞–∫—Ä–æ —Ä–µ–∫–ª–∞–º–∞",
              values: {
                aiModel: "stable-diffusion", cameraBody: "shot on Canon EOS R5", aspectRatio: "1:1", purpose: "Product Photography", format: "photorealistic",
                lens: "Canon RF 100mm f/2.8L Macro IS USM", aperture: "f/2.8, balanced depth of field, professional portrait look, controlled background separation", angle: "eye level shot, neutral perspective, straight on angle, direct engagement", composition: "extreme close-up shot, detail focus, eyes or lips only, intense intimacy, macro texture",
                quality: "8k, masterpiece, best quality, ultra detailed",
                lightType: { primary: "softbox beauty light", accent: "studio three-point lighting" },
                timeOfDay: { primary: "bright midday sun", accent: "" },
                lightFX: ["subsurface scattering", "caustics"], skinDetail: [],
                material: ["frosted glass, translucent diffused", "polished chrome"], typography: []
              }
            },
            {
              name: "üß© UI –î–∏–∑–∞–π–Ω",
              values: {
                aiModel: "ideogram", cameraBody: "", aspectRatio: "16:9", purpose: "UI Design", format: "vector illustration",
                medium: "vector illustration, clean bezier curves, infinite scalability, flat color blocks, print-ready crisp edges",
                lens: "", aperture: "", angle: "eye level shot, neutral perspective, straight on angle, direct engagement", composition: "modular interface grid, clear information hierarchy, balanced negative space, clean alignment system",
                quality: "8k, masterpiece, best quality, ultra detailed",
                lightType: { primary: "soft natural light", accent: "" },
                timeOfDay: { primary: "bright midday sun", accent: "" },
                lightFX: [], skinDetail: [], hairDetail: [],
                material: ["matte finish"], typography: ["bold sans-serif typography", "clean modern sans-serif typography, swiss style, high legibility, balanced kerning"]
              }
            },
            {
              name: "üìä –ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞",
              values: {
                aiModel: "ideogram", cameraBody: "", aspectRatio: "4:3", purpose: "Infographic", format: "vector illustration",
                medium: "vector illustration, clean bezier curves, infinite scalability, flat color blocks, print-ready crisp edges",
                lens: "", aperture: "", angle: "eye level shot, neutral perspective, straight on angle, direct engagement", composition: "structured infographic layout, chart-first hierarchy, icon blocks, clean callouts, visual storytelling flow",
                quality: "8k, masterpiece, best quality, ultra detailed",
                lightType: { primary: "soft natural light", accent: "" },
                timeOfDay: { primary: "bright midday sun", accent: "" },
                lightFX: [], skinDetail: [], hairDetail: [],
                material: ["matte finish"], typography: ["bold sans-serif typography", "small text captions, fine print, readable micro typography"]
              }
            },
            {
              name: "‚ú≥Ô∏è –õ–æ–≥–æ—Ç–∏–ø",
              values: {
                aiModel: "ideogram", cameraBody: "", aspectRatio: "1:1", purpose: "Logo Design", format: "vector illustration",
                medium: "vector illustration, clean bezier curves, infinite scalability, flat color blocks, print-ready crisp edges",
                lens: "", aperture: "", angle: "eye level shot, neutral perspective, straight on angle, direct engagement", composition: "centered logo mark, strict symmetry, strong silhouette, ample clear space, brand-ready lockup",
                quality: "8k, masterpiece, best quality, ultra detailed",
                lightType: { primary: "soft natural light", accent: "" },
                timeOfDay: { primary: "bright midday sun", accent: "" },
                lightFX: [], skinDetail: [], hairDetail: [],
                material: ["matte finish"], typography: ["bold sans-serif typography"]
              }
            },
            {
              name: "üßç –õ–∏—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞",
              values: {
                aiModel: "stable-diffusion", cameraBody: "", aspectRatio: "3:4", purpose: "Character Sheet", format: "photorealistic",
                medium: "digital art, Wacom tablet rendering, smooth blending, crisp edges",
                lens: "", aperture: "f/4.0, moderate depth of field, environmental portrait, sharp subject with soft background context", angle: "eye level shot, neutral perspective, straight on angle, direct engagement", composition: "full body shot, head to toe, character in environment, fashion photography style, complete figure",
                quality: "8k, masterpiece, best quality, ultra detailed",
                lightType: { primary: "studio three-point lighting", accent: "rim light" },
                timeOfDay: { primary: "bright midday sun", accent: "" },
                lightFX: ["subsurface scattering"], skinDetail: ["visible skin pores, natural grain"], hairDetail: ["ultra detailed individual hair strands, each strand visible, photorealistic hair"],
                material: ["matte finish"], typography: []
              }
            },
            { name: "üì∑ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç", values: { aiModel: "flux", cameraBody: "shot on Sony A7R V", aspectRatio: "3:4", purpose: "Photography", format: "photorealistic", lens: "Sony FE 85mm f/1.4 GM", aperture: "f/1.4, shallow depth of field, creamy bokeh, subject isolation, soft background blur", angle: "eye level shot, neutral perspective, straight on angle, direct engagement", composition: "close-up portrait, head and shoulders, emotional connection, facial expression focus, detailed features", quality: "8k, masterpiece, best quality, ultra detailed", lightType: { primary: "soft natural light", accent: "" }, timeOfDay: { primary: "golden hour warm sunlight", accent: "" }, lightFX: ["rim light"], skinDetail: ["visible skin pores, natural grain", "peach fuzz, vellus hair"], hairDetail: ["ultra detailed individual hair strands, each strand visible, photorealistic hair", "flyaway baby hairs, wispy strands, backlit hair glow"], material: [], typography: [], photoStyle: "in the style of Annie Leibovitz, dramatic portrait lighting, rich colors", cinemaStyle: "", directorStyle: "" } },
            { name: "üèôÔ∏è –£–ª–∏—á–Ω—ã–π —Ñ–æ—Ç–æ—Ä–µ–∞–ª–∏–∑–º", values: { aiModel: "stable-diffusion", cameraBody: "shot on Leica M11", aspectRatio: "3:2", purpose: "Photography", format: "photorealistic", lens: "Leica Summilux-M 50mm f/1.4 ASPH", aperture: "f/2.8, balanced depth of field, professional portrait look, controlled background separation", angle: "eye level shot, neutral perspective, straight on angle, direct engagement", composition: "medium shot, waist up, standard cinematic framing, character with context, neutral distance", quality: "4k, high quality, detailed", lightType: { primary: "soft natural light", accent: "backlighting silhouette" }, timeOfDay: { primary: "overcast diffused light", accent: "" }, lightFX: ["volumetric fog"], skinDetail: ["visible skin pores, natural grain"], hairDetail: [], material: ["wet asphalt reflections", "rough concrete"], typography: [], photoStyle: "in the style of Steve McCurry, vivid saturated colors, documentary", cinemaStyle: "", directorStyle: "" } },
            { name: "üíé Beauty / –ö–æ—Å–º–µ—Ç–∏–∫–∞", values: { aiModel: "stable-diffusion", cameraBody: "shot on Hasselblad X2D 100C", aspectRatio: "3:4", purpose: "Advertising campaign", format: "photorealistic", lens: "Canon RF 85mm f/1.2L USM", aperture: "f/2.0, gentle depth of field, balanced bokeh, slightly more context than f/1.4", angle: "slightly high angle, looking down at subject, submissive perspective", composition: "extreme close-up shot, detail focus, eyes or lips only, intense intimacy, macro texture", quality: "8k, masterpiece, best quality, ultra detailed", lightType: { primary: "clamshell lighting, beauty commercial", accent: "softbox beauty light" }, timeOfDay: { primary: "bright midday sun", accent: "" }, lightFX: ["subsurface scattering", "rim light"], skinDetail: ["visible skin pores, natural grain", "peach fuzz, vellus hair", "subtle under-eye texture"], hairDetail: ["ultra detailed individual hair strands, each strand visible, photorealistic hair", "detailed hair highlights, light catching individual strands, hair shine"], material: ["polished chrome"], typography: [], photoStyle: "in the style of Mario Testino, warm golden tones, glossy fashion", cinemaStyle: "", directorStyle: "" } },

          ];

          // =============================================
          // EMOTION PRESETS
          // =============================================
          const EMOTIONS = {
            "Euphoria": "(genuine euphoria:1.3), Duchenne smile, (crinkled eyes with crow's feet:1.2), zygomaticus major activation, raised cheeks, sparkling eyes with distinct catchlights, natural skin texture stretching over cheekbones, soft warm golden hour lighting, high-key atmosphere",
            "Grief": "(deep grief:1.3), heartbroken expression, (inner eyebrows raised and drawn together:1.4), omega sign on forehead, quivering lower lip, downturned mouth corners, (glassy eyes brimming with unshed tears:1.2), red puffy eyelids, pale complexion, low-key lighting, cool blue tones, heavy shadows obscuring the eyes (toplight)",
            "Rage": "(suppressed rage:1.4), intense micro-expressions, (clenched jaw and pulsing temple vein), flared nostrils, furrowed brow, corrugator supercilii activation, narrowed piercing eyes, fixed stare, lips pressed into a thin line, dramatic side lighting (chiaroscuro), high contrast, deep shadows",
            "Terror": "(sheer terror:1.5), face of pure horror, (eyes wide open showing sclera above iris:1.3), dilated pupils, pale drained skin, sweat beads on forehead, trembling parted lips, tense neck muscles, spooky underlighting (lighting from below), unnatural upward shadows",
            "Disgust": "(visceral disgust:1.3), repulsed expression, (wrinkled nose:1.4), nasalis muscle activation, curled upper lip, narrowed squinting eyes, pulling head back, distinct nasolabial folds, harsh texture accentuating lighting, greenish undertone",
            "Shock": "(state of total shock:1.3), frozen in disbelief, (jaw dropped:1.2), mouth agape, slack jaw, highly raised arched eyebrows, eyes wide open, blank stare, motionless, sharp rim lighting separating subject from background, stillness",
            "Contempt": "(skeptical contempt:1.2), arrogance, (asymmetrical facial expression:1.3), one eyebrow cocked high, unilateral smirk (one lip corner raised), eyelids narrowed in judgment, looking down on viewer, split lighting (side light), sharp shadows",
            "Pain": "(screaming in agony:1.4), physical pain, eyes tightly squeezed shut, teeth gritted or mouth wide open in a scream, (veins popping on forehead and neck), sweat dripping, contorted facial muscles, extreme tension, dramatic high-contrast lighting, gritty texture",
            "Nostalgia": "(bittersweet expression:1.2), emotional complexity, (smiling mouth with sad eyes:1.3), gentle upturned lips paired with teary glistening eyes, soft melancholic gaze, emotional dissonance, nostalgic atmosphere, dreamy backlighting, lens flare, soft focus",
            "Serene": "(serene neutrality:1.3), deadpan face, completely relaxed facial muscles, blank stare, unfocused gaze, slack jaw, no micro-expressions, symmetry, soft diffuse studio lighting, passport photo style",

            // Subtle Emotions
            "Pensive": "(deeply pensive:1.2), lost in thought, slight furrow of brow, gaze drifted away from camera, hand resting on chin or temple, soft melancholy, atmospheric lighting, quiet introspection",
            "Curious": "(mild curiosity:1.2), head slightly tilted, eyebrows raised in interest, focused gaze, lips slightly parted as if about to speak, engaging expression, bright eyes, alertness, soft inviting light",
            "Melancholic": "(gentle melancholy:1.2), soft sadness, downward gaze, relaxed facial muscles with hint of sorrow, subdued atmosphere, muted colors, window light, rainy mood",
            "Hopeful": "(quiet hope:1.2), soft smile reaching the eyes, upward gaze, gentle optimism, warm lighting, golden hour glow, catchlights in eyes, peaceful expression",
            "Skeptical": "(mild skepticism:1.2), one eyebrow slightly raised, head tilted back, appraising look, narrowed eyes, doubted expression, cool lighting, neutral background",
            "Amused": "(amused smirk:1.2), corner of mouth raised, sparkling eyes, holding back a laugh, playful expression, lighthearted atmosphere, warm key light",
            "Determined": "(quiet determination:1.2), set jaw, focused intensity, steady gaze, firm mouth, serious demeanor, dramatic side lighting, resolve",
            "Wistful": "(wistful longing:1.2), looking into distance, soft focus, dreamy expression, slight smile mixed with sadness, nostalgic atmosphere, lens flare, romantic lighting",
            "Relieved": "(sense of relief:1.2), shoulders relaxed, exhale expression, closed eyes or soft gaze, gentle smile, letting go of tension, soft warm light, peaceful",
            "Intrigued": "(intrigued fascination:1.2), leaning forward, intense focus, slight squint, lips parted, captivated expression, dramatic lighting highlighting eyes"
          };
          window.EMOTIONS = EMOTIONS; // Expose for verification

          // =============================================
          // QUICK STYLE PRESETS
          // =============================================
          const QUICK_STYLES = {
            "true-detective": "True Detective HBO noir cinematography aesthetic. LIGHTING: harsh Louisiana sun creating extreme contrast, or dim atmospheric interior lighting with practical sources (desk lamps, neon signs), oppressive heat haze visual quality, golden hour magic light with long shadows, smoky atmospheric diffusion. COLOR GRADING: heavily desaturated with sickly greens and murky browns, swampy atmospheric color palette, crushed blacks and blown highlights for noir effect, melancholic despondent mood, teal shadows with amber highlights, low saturation high contrast. TECHNICAL: extreme shallow depth of field (f/1.4 feel), anamorphic lens flares and aberrations, 35mm film grain texture, wide desolate landscape compositions alternating with claustrophobic close-ups, natural vignetting. ATMOSPHERE: oppressive humidity, existential dread, Southern Gothic decay, time and mortality themes. QUALITY: photorealistic, 8K resolution, Cary Fukunaga directorial style, award-winning cinematography, prestige crime drama aesthetic.",

            "game-of-thrones": "Game of Thrones HBO epic fantasy cinematography. LIGHTING: dramatic natural lighting with overcast skies, torch-lit and candlelit interiors with warm flickering practical lights, cold Northern daylight with diffused sun, dramatic fire and shadow interplay, motivated medieval lighting sources only. COLOR GRADING: desaturated medieval color palette with muted earth tones, cold blue-grey exteriors, warm amber interiors, gritty realistic texture, low saturation to convey harsh realism, teal and orange separation for dramatic scenes. TECHNICAL: sweeping wide establishing shots of landscapes and castles, intimate medium close-ups for dialogue, shallow to medium depth of field (f/2.8-f/5.6), IMAX camera quality for battle sequences, natural film grain, handheld camera for battle chaos. ATMOSPHERE: medieval fantasy realism, political intrigue gravitas, epic scale with intimate character moments, harsh unforgiving world, winter is coming mood. QUALITY: photorealistic, 8K resolution, prestige fantasy television, award-winning cinematography, theatrical production value, gritty realistic medieval aesthetic.",

            "the-last-of-us": "The Last of Us HBO post-apocalyptic cinematography aesthetic. LIGHTING: soft diffused overcast natural light, nature reclaiming urban environments with dappled sunlight through overgrown vegetation, golden hour warmth for emotional moments, cold blue-grey for tension and danger, practical flashlight and lantern sources in dark interiors, atmospheric dust particles in light beams. COLOR GRADING: desaturated with selective warm color pops (rust, autumn leaves, golden light), muted greens of overgrown nature, cold concrete greys, earthy browns and ochres, melancholic yet beautiful color palette, teal shadows with amber highlights in key scenes. TECHNICAL: intimate character-focused cinematography, shallow depth of field for emotional beats (f/2-f/2.8), medium depth for environmental storytelling (f/5.6), natural handheld camera movement, subtle film grain texture, wide shots emphasizing isolation and scale of abandoned cities. ATMOSPHERE: post-pandemic desolation, nature reclaiming civilization, hope amid despair, survival drama, emotional father-daughter relationship undertones, quiet apocalypse beauty, melancholic yet hopeful. QUALITY: photorealistic, 8K resolution, prestige video game adaptation, award-winning cinematography, theatrical production quality, naturalistic performances.",

            "stranger-things": "Stranger Things Netflix 1980s nostalgia cinematography aesthetic. LIGHTING: practical 1980s sources (neon signs, flashlights, Christmas lights, arcade machines), moody atmospheric fog with colored gel lighting, dramatic red and blue police light flashes, warm suburban home interiors with table lamps, eerie Upside Down scenes with cold flickering lights, golden hour suburban Americana. COLOR GRADING: vibrant saturated 1980s color palette with heavy red and teal contrast, neon pink and electric blue accents, warm amber suburban scenes, cold desaturated Upside Down sequences, nostalgic film stock emulation, Spielberg-inspired warm family moments contrasting with horror elements. TECHNICAL: anamorphic lens flares and aberrations, shallow depth of field for character focus (f/2-f/2.8), Steadicam smooth tracking shots, wide establishing shots of suburban Indiana, intimate close-ups during emotional beats, subtle film grain texture, practical special effects aesthetic. ATMOSPHERE: 1980s nostalgia, supernatural mystery, coming-of-age adventure, Spielberg meets Stephen King, suburban horror, friendship and loyalty themes, synth-wave retro vibes. QUALITY: photorealistic, 8K resolution, Netflix prestige series, Duffer Brothers visual style, award-winning cinematography, theatrical production value, 1980s period accuracy.",

            "the-crown": "The Crown Netflix prestige royal drama cinematography aesthetic. LIGHTING: soft diffused natural window light in palace interiors, elegant chandelier and sconce lighting, overcast British daylight, sophisticated three-point studio lighting for formal portraits, natural outdoor light for countryside estates, subtle rim lighting for royal gravitas. COLOR GRADING: rich saturated jewel tones (deep reds, royal blues, emerald greens), warm golden interiors with mahogany and brass, muted British countryside greens and greys, sophisticated color palette, period-accurate color reproduction, elegant restrained grading. TECHNICAL: static composed camera work emphasizing formality and tradition, slow deliberate camera movements, symmetrical framing for power and authority, medium depth of field (f/4-f/5.6), 35mm and 50mm lens aesthetic, classical composition following rule of thirds and golden ratio, pristine clean image quality. ATMOSPHERE: British royal elegance, political intrigue, duty versus desire, historical gravitas, restrained emotion, palace formality, period drama sophistication, understated luxury. QUALITY: photorealistic, 8K resolution, Netflix prestige historical drama, award-winning cinematography, theatrical production quality, meticulous period detail, BBC drama aesthetic elevated.",

            "wednesday": "Wednesday Netflix gothic dark academia cinematography aesthetic. LIGHTING: moody overcast natural light, gothic architecture with dramatic shadows, candlelit and lantern-lit interiors, moonlight through stained glass windows, cold blue-grey daylight, dramatic chiaroscuro contrast, Tim Burton-inspired expressionistic lighting, fog and mist atmospheric effects. COLOR GRADING: heavily desaturated with deep blacks and cool greys, selective color pops (blood red, poison purple, toxic green), monochromatic gothic palette, cold blue undertones, high contrast with crushed blacks, Burton-esque dark whimsy color treatment. TECHNICAL: Dutch angles and off-kilter framing for unease, symmetrical centered compositions for gothic formality, wide shots emphasizing gothic architecture, intimate close-ups with deadpan expressions, shallow to medium depth of field (f/2.8-f/4), Tim Burton visual language, stylized yet grounded aesthetic. ATMOSPHERE: gothic dark comedy, macabre humor, teenage outsider angst, supernatural mystery, Addams Family legacy, dark academia aesthetic, deadpan wit, Burton-meets-teen-drama. QUALITY: photorealistic with stylized gothic elements, 8K resolution, Netflix prestige teen series, Tim Burton directorial style, award-winning production design, theatrical gothic aesthetic, darkly whimsical.",

            "blade-runner-2049": "Blade Runner 2049 neo-noir cyberpunk cinematography, Roger Deakins masterwork. LIGHTING: dramatic volumetric fog with laser light beams, monumental scale lighting, orange sodium vapor dystopian exteriors, cool blue-grey rain-soaked scenes, warm amber interior glow, god rays through industrial haze, practical neon signs and holographic advertisements. COLOR GRADING: bold saturated orange and teal separation, monochromatic sequences (orange desert, purple Vegas), deep blacks with vibrant color accents, cyberpunk neon palette, desaturated with selective color pops, cinematic color contrast pushed to maximum. TECHNICAL: ultra-wide establishing shots of landscapes and isolation, symmetrical centered compositions, extreme shallow depth of field (f/1.4), anamorphic lens flares, slow deliberate camera movements, IMAX quality, pristine sharp image. ATMOSPHERE: dystopian future noir, existential loneliness, monumental architecture, technological decay, philosophical sci-fi, visual poetry. QUALITY: photorealistic, 8K IMAX resolution, Academy Award-winning cinematography, Roger Deakins visual mastery.",
            "dune": "Dune epic sci-fi cinematography aesthetic, Denis Villeneuve and Greig Fraser visual language. LIGHTING: monumental hard desert sunlight with long sculpted shadows, diffuse sand-haze atmosphere, low-key interior practicals with selective highlights, eclipse-like high-contrast silhouettes, warm dusk gradients over vast dunes. COLOR GRADING: restrained monochromatic sand-beige and muted ochre palette, desaturated skin tones, deep matte blacks, subtle gold highlights, austere high-end cinematic tonality. TECHNICAL: massive wide-format compositions emphasizing scale and isolation, precise minimal framing, slow deliberate camera movement, long-lens compression across dunes, controlled depth of field, IMAX-grade detail retention. ATMOSPHERE: mythic futurism, sacred austerity, political gravity, desert mysticism, monumental silence. QUALITY: photorealistic, 8K IMAX resolution, premium theatrical blockbuster finish, award-level cinematography.",
            "the-matrix": "The Matrix techno-noir cinematography aesthetic, Wachowski-era cyberpunk classic. LIGHTING: hard directional practicals in dim urban interiors, fluorescent spill, underlit corridors, moody backlight silhouettes, reflective wet asphalt highlights, selective strobe-like contrast. COLOR GRADING: iconic green code tint for digital world, cooler neutral steel palette for real world, high contrast blacks, restrained saturation with toxic green accents, glossy noir finish. TECHNICAL: symmetrical urban compositions, dynamic low angles, bullet-time freeze aesthetic cues, medium-wide lenses for kinetic action, crisp edge contrast, controlled grain. ATMOSPHERE: simulated reality paranoia, cyberpunk rebellion, hacker underground, philosophical sci-fi tension. QUALITY: photorealistic, 8K resolution, iconic late-90s sci-fi style, premium action-noir finish.",

            "grand-budapest-hotel": "The Grand Budapest Hotel Wes Anderson symmetrical whimsical cinematography. LIGHTING: soft even studio lighting, pastel-friendly neutral temperature, theatrical stage lighting aesthetic, natural window light in symmetrical compositions, warm interior hotel lighting, bright clean exterior daylight. COLOR GRADING: vibrant pastel color palette (pink, purple, mint green, coral, baby blue), highly saturated candy colors, meticulously color-coordinated production design, distinct color schemes for different time periods, storybook aesthetic. TECHNICAL: perfectly centered symmetrical compositions, flat frontal camera angles, whip pans and snap zooms, miniature model shots, stop-motion animation sequences, planimetric framing, dollhouse aesthetic. ATMOSPHERE: whimsical European nostalgia, theatrical storybook charm, meticulous detail, quirky sophistication, fairy tale elegance. QUALITY: photorealistic with stylized production design, 8K resolution, Academy Award-winning production design, Wes Anderson signature visual style.",

            "in-the-mood-for-love": "In the Mood for Love Wong Kar-wai romantic melancholy cinematography, Christopher Doyle color mastery. LIGHTING: warm tungsten practical lighting, neon signs through rain-soaked windows, moody low-key lighting, colored gels (red, amber, teal), intimate close-up lighting, shadows and silhouettes, Hong Kong night ambiance. COLOR GRADING: rich saturated reds and warm ambers, teal and orange romantic contrast, lush vibrant colors, nostalgic 1960s Hong Kong palette, deep shadows with glowing highlights, sensual color temperature. TECHNICAL: slow motion romantic sequences, tight intimate framing through doorways and windows, voyeuristic camera placement, shallow depth of field (f/1.4-f/2), handheld intimate camera work, vertical compositions, step-printing slow motion. ATMOSPHERE: forbidden romance, unspoken longing, 1960s Hong Kong nostalgia, sensual restraint, melancholic beauty, time and memory. QUALITY: photorealistic, 8K restoration quality, Cannes Film Festival award-winning cinematography, Wong Kar-wai poetic visual language.",

            "mad-max-fury-road": "Mad Max Fury Road post-apocalyptic action cinematography, John Seale visual intensity. LIGHTING: harsh Australian desert sun, extreme contrast daylight, practical fire and explosion lighting, dust storm diffusion, golden hour chase sequences, moonlight night scenes with cool blue tones, flare gun and flame lighting. COLOR GRADING: teal and orange pushed to extreme, desaturated desert with vibrant sky blues, warm sand tones contrasting cool shadows, day-for-night blue sequences, high contrast high saturation, comic book color intensity. TECHNICAL: high-speed action photography, wide-angle dynamic compositions, practical stunts and effects, minimal CGI aesthetic, fast cutting with clear spatial geography, multiple camera angles for action, IMAX sequences. ATMOSPHERE: post-apocalyptic survival, kinetic energy, practical action spectacle, wasteland beauty, relentless momentum, visual storytelling without dialogue. QUALITY: photorealistic practical effects, 8K resolution, Academy Award-winning cinematography and editing, visceral action cinema.",

            "the-revenant": "The Revenant natural light wilderness cinematography, Emmanuel Lubezki three-time Oscar winner. LIGHTING: exclusively natural available light, golden hour magic hour sequences, overcast diffused daylight, campfire and torch practical lighting, harsh midday sun through forest canopy, blue hour twilight, moonlight night scenes, no artificial lighting. COLOR GRADING: desaturated natural earth tones, cold blue-grey winter palette, warm firelight contrast, muted greens and browns, realistic color reproduction, subtle grading preserving natural light quality. TECHNICAL: long continuous takes with invisible cuts, immersive Steadicam and handheld work, wide-angle lenses capturing environment, shallow depth of field for intimacy (f/2-f/2.8), natural lens flares, IMAX sequences. ATMOSPHERE: brutal survival, man versus nature, 1820s American frontier, visceral realism, spiritual journey, elemental forces. QUALITY: photorealistic, 8K resolution, Academy Award-winning cinematography, natural light mastery, immersive realism.",

            "hero": "Hero Zhang Yimou color-coded wuxia cinematography, Christopher Doyle visual poetry. LIGHTING: soft diffused natural light, dramatic backlight for martial arts silhouettes, colored gel lighting matching story segments, golden hour desert sequences, overcast grey skies, lantern and candle interiors, rain and water reflections. COLOR GRADING: bold monochromatic color schemes per story version (red, blue, green, white, black), highly saturated single-color dominance, color as narrative device, vibrant silk costumes against matching environments, painterly color composition. TECHNICAL: sweeping crane shots over landscapes, slow-motion martial arts choreography, wire-work enhanced movements, symmetrical compositions, wide establishing shots, balletic camera movements. ATMOSPHERE: Chinese wuxia poetry, color as storytelling, martial arts ballet, philosophical conflict, visual opera, ancient China grandeur. QUALITY: photorealistic with stylized color, 8K resolution, visually groundbreaking cinematography, painterly aesthetic.",

            "la-la-land": "La La Land modern Hollywood musical cinematography, Linus Sandgren Technicolor homage. LIGHTING: golden hour Los Angeles magic light, vibrant sunset colors, theatrical stage lighting for musical numbers, romantic twilight blue hour, warm practical streetlights, studio musical lighting aesthetic, colorful gel lighting. COLOR GRADING: vibrant saturated primary colors (red, blue, yellow, purple), Technicolor-inspired bold palette, romantic warm tones, dreamy pastel sequences, high saturation celebrating classic musicals, teal and magenta Los Angeles nights. TECHNICAL: sweeping Steadicam musical choreography, long continuous takes for dance numbers, crane and dolly moves, classical Hollywood camera language, planetarium sequence with starry visuals. ATMOSPHERE: romantic Los Angeles dreams, jazz and ambition, classic Hollywood musical revival, bittersweet romance, city of stars magic, nostalgic optimism. QUALITY: photorealistic, 8K resolution, Academy Award-winning cinematography, modern musical masterpiece.",

            "the-fall": "The Fall Tarsem Singh surreal visual maximalism cinematography, Colin Watkinson painterly compositions. LIGHTING: dramatic natural light in exotic locations, golden hour magic across 28 countries, theatrical color gel lighting, stained glass window light, desert sun and palace interiors, fantasy dreamscape lighting. COLOR GRADING: ultra-saturated jewel tones, vibrant reds blues golds, painterly color composition, surreal color combinations, Baroque painting aesthetic, maximum color intensity, fantasy storybook palette. TECHNICAL: symmetrical centered compositions, wide establishing shots of breathtaking locations, slow deliberate camera movements, shallow depth of field isolating subjects, practical locations worldwide, minimal CGI. ATMOSPHERE: fever dream fantasy, storybook surrealism, visual poetry, imagination versus reality, baroque maximalism, fairy tale darkness. QUALITY: photorealistic with surreal production design, 8K resolution, most visually ambitious independent film, painterly cinematography.",

            "1917": "1917 one-shot WWI cinematography, Roger Deakins immersive realism. LIGHTING: overcast grey WWI daylight, muddy trench natural light, dramatic flare-lit night town sequence (orange fire glow), golden hour no-man's-land, practical explosion and fire lighting, moonlight and starlight night scenes. COLOR GRADING: desaturated war-torn palette, muddy browns and greys, cold blue overcast skies, dramatic orange firelight sequence contrasting cool night, muted greens of French countryside, realistic period color. TECHNICAL: seamless invisible cuts creating one continuous shot illusion, immersive Steadicam and handheld work, choreographed camera movements with actors, real-time storytelling, practical effects emphasis. ATMOSPHERE: WWI trench warfare immediacy, real-time tension, immersive you-are-there realism, relentless forward momentum, visceral war experience. QUALITY: photorealistic, 8K resolution, Academy Award-winning cinematography, technical filmmaking mastery, immersive realism.",

            "life-of-pi": "Life of Pi lyrical ocean survival cinematography, Claudio Miranda Oscar-winning visual poetry. LIGHTING: high-contrast tropical sunlight, golden hour ocean glow, moonlit bioluminescent night sequences, storm lightning flashes, soft dawn haze over endless sea, magical backlight through mist and spray. COLOR GRADING: saturated cyan and deep ultramarine oceans, warm orange lifeboat accents, emerald and turquoise transitions, rich sunset magentas, high dynamic contrast between sky and water, dreamlike yet natural palette. TECHNICAL: wide anamorphic ocean vistas, centered isolation compositions, fluid camera movement synced with waves, VFX-integrated photoreal imagery, shallow depth for emotional close-ups (f/2-f/2.8), immersive scale framing. ATMOSPHERE: spiritual survival odyssey, awe and terror of nature, solitude, wonder, mythic storytelling. QUALITY: photorealistic, 8K resolution, Academy Award-winning cinematography, immersive visual masterpiece.",

            "the-shape-of-water": "The Shape of Water Guillermo del Toro romantic dark fairy-tale cinematography, Dan Laustsen visual elegance. LIGHTING: soft diffused practical lighting, moody tungsten interiors, underwater caustic light patterns, theatrical spot highlights, rain-soaked night reflections, gentle rim light sculpting silhouettes. COLOR GRADING: dominant teal-green aquatic palette, warm amber skin tones against cool cyan environments, vintage 1960s patina, controlled saturation, emerald shadows with golden practical highlights, painterly tonal separation. TECHNICAL: graceful dolly moves, symmetrical period compositions, shallow depth intimacy (f/1.8-f/2.8), practical production-design driven framing, atmospheric haze for depth, classical studio-era camera language. ATMOSPHERE: melancholic romance, outsider tenderness, Cold War mystery, magical realism, poetic intimacy. QUALITY: photorealistic with stylized fairy-tale production design, 8K resolution, Academy Award-winning visual style.",

            "pans-labyrinth": "Pan's Labyrinth dark Spanish fantasy cinematography, Guillermo del Toro baroque visual mythology. LIGHTING: candlelit and lantern practicals, moonlit forest diffusion, golden firelight in stone interiors, low-key chiaroscuro, soft god rays through ancient trees, cold military daylight contrast. COLOR GRADING: earthy ochres and moss greens, desaturated war-era neutrals, deep blue nocturnal fantasy tones, warm amber highlights in mythic spaces, textured filmic contrast, antique storybook palette. TECHNICAL: wide environmental compositions blending realism and fantasy, creature-focused practical effects framing, subtle handheld tension in war scenes, controlled slow pushes for dread, medium depth for production detail (f/4-f/5.6). ATMOSPHERE: fairy tale under fascism, childhood imagination versus brutality, gothic wonder, moral myth. QUALITY: photorealistic with practical fantasy elements, 8K resolution, iconic dark-fantasy cinema aesthetic.",

            "skyfall": "Skyfall James Bond neo-noir action cinematography, Roger Deakins precision and elegance. LIGHTING: neon Shanghai night glow, silhouette-driven backlighting, stark high-contrast interiors, misty dawn landscapes, practical fire in climactic manor sequences, clean directional key light for dramatic profiles. COLOR GRADING: deep blacks with rich cobalt and cyan shadows, selective warm amber highlights, refined modern Bond palette, restrained saturation, luminous neon accents, polished cinematic contrast. TECHNICAL: large-format clarity, geometric framing and negative space, elegant locked-off compositions mixed with controlled action movement, long-lens urban compression, high-detail night cinematography, IMAX-grade sharpness. ATMOSPHERE: sophisticated espionage tension, sleek menace, emotional isolation, modern classic Bond grandeur. QUALITY: photorealistic, 8K resolution, award-winning cinematography craft, premium theatrical finish.",

            "parasite": "Parasite Korean social thriller cinematography, Hong Kyung-pyo architectural visual storytelling. LIGHTING: naturalistic soft daylight in modern interiors, practical household lighting, controlled rain-night atmosphere, low-key basement shadows, neutral overcast exteriors, motivated directional light through windows and stairwells. COLOR GRADING: restrained contemporary palette, clean neutrals with subtle green-grey undertones, warm wood accents in wealthy interiors, cooler damp textures in lower-class spaces, precise tonal separation by class environment. TECHNICAL: architectural compositions emphasizing levels and stairs, static observational framing, smooth lateral tracking, medium depth revealing spatial relationships (f/4-f/8), meticulous blocking for social hierarchy. ATMOSPHERE: simmering tension, class divide satire, domestic realism turning into suspense, elegant unease. QUALITY: photorealistic, 8K resolution, Palme d'Or and Oscar-winning visual storytelling, precision-crafted cinematic realism.",

            "the-lighthouse": "The Lighthouse expressionist maritime psychological horror cinematography, Jarin Blaschke monochrome mastery. LIGHTING: harsh directional beacon light, stormy overcast exteriors, oil-lamp practical interiors, deep shadow pools, high-contrast side lighting, wet reflective textures under hard key. COLOR GRADING: stark black-and-white orthochromatic feel, crushed blacks and bright specular whites, silver-rich film texture, heavy micro-contrast, antique tonal response. TECHNICAL: nearly square aspect visual language, vintage lens aberrations, extreme close-ups with distorted perspective, static tableaux mixed with violent handheld bursts, dense film grain, tactile monochrome texture. ATMOSPHERE: claustrophobia, madness, maritime myth, isolation and obsession, primal dread. QUALITY: photorealistic monochrome, 8K scanned film texture, Academy Award-nominated cinematography aesthetic.",

            "inception": "Inception Christopher Nolan dream-heist cinematography, Wally Pfister large-scale practical surrealism. LIGHTING: clean modern daylight, cool urban interiors, dramatic practical city-night lighting, rotating corridor highlights and shadows, snow fortress high-key overcast light, warm limbo sunsets. COLOR GRADING: cool steel-blue modernist palette, restrained saturation, warm memory accents, crisp contrast with neutral skin tones, dream-level tonal separation by environment. TECHNICAL: IMAX-scale compositions, practical in-camera effects emphasis, wide architectural framing, dynamic tilt and rotation perspectives, controlled handheld urgency in action beats, deep focus for spatial logic. ATMOSPHERE: cerebral tension, layered dream logic, polished corporate modernism, high-concept momentum. QUALITY: photorealistic, 8K IMAX resolution, blockbuster auteur craftsmanship, iconic contemporary sci-fi visual language.",

            "the-lord-of-the-rings": "The Lord of the Rings epic high-fantasy cinematography, Andrew Lesnie mythic landscape grandeur. LIGHTING: golden pastoral daylight in Shire environments, moody overcast mountain exteriors, torchlit fortress interiors, ethereal backlight in elven realms, volcanic fire glow in Mordor sequences, dramatic dawn battle light. COLOR GRADING: rich natural greens and golds for heroic realms, cold steel blues for war zones, deep ashen reds and blacks for evil territories, classic fantasy tonal mapping, filmic contrast with textured highlights. TECHNICAL: sweeping aerial and ultra-wide landscape shots, heroic low-angle compositions, large-scale battle staging, practical miniatures integration, orchestral camera movement, medium-to-deep focus for world detail. ATMOSPHERE: mythic adventure, ancient legend, fellowship heroism, melancholy beauty of fading ages. QUALITY: photorealistic epic fantasy, 8K resolution, Academy Award-winning trilogy visual heritage, monumental cinematic scale.",

            "the-dark-knight": "The Dark Knight grounded crime epic cinematography, Wally Pfister IMAX urban realism. LIGHTING: hard practical city lighting, sodium-vapor night streets, interrogation-room top light contrast, clean daylight for institutional spaces, selective rim light in dark interiors, realistic motivated sources. COLOR GRADING: cool steel-grey Gotham palette, restrained saturation, deep neutral blacks, subtle cyan shadows, minimal stylization favoring realism, crisp high-contrast urban texture. TECHNICAL: IMAX-format action clarity, wide city architecture framing, handheld urgency in tactical scenes, long-lens compression for surveillance feel, practical stunt emphasis, precise editorial geography. ATMOSPHERE: moral tension, urban dread, procedural intensity, grounded superhero noir. QUALITY: photorealistic, 8K IMAX resolution, modern action-cinema benchmark, award-winning technical craft.",

            "the-martian": "The Martian Ridley Scott hard-science survival cinematography, Dariusz Wolski realistic space adventure. LIGHTING: harsh diffused Mars daylight through dust atmosphere, warm habitat practicals, cool spacecraft instrument lighting, orange storm low-visibility conditions, crisp EVA sunlight with deep shadows, clean NASA mission-control fluorescents. COLOR GRADING: dominant rust-orange Martian terrain, muted beige dust and rock textures, cool blue-white technology highlights, clean high-contrast separation between Mars and Earth settings, realistic scientific color treatment. TECHNICAL: wide environmental isolation shots, helmet-reflection close-ups, stabilized rover movement, VFX-practical integration with documentary realism, medium depth retaining technical detail (f/4-f/8), clear spatial continuity. ATMOSPHERE: ingenuity under pressure, solitary resilience, optimistic scientific realism, frontier exploration spirit. QUALITY: photorealistic, 8K resolution, premium studio sci-fi craftsmanship, immersive planetary realism.",

            "the-city-of-lost-children": "The City of Lost Children Jeunet-Caro steampunk nightmare-fantasy cinematography, Darius Khondji surreal texture. LIGHTING: fog-diffused dockside night lighting, sickly practical tungsten and sodium glows, strong backlit silhouettes, theatrical shadow play in industrial sets, low-key interiors with selective highlights. COLOR GRADING: green-amber sepia cast, oxidized brass and rust tones, muted skin with stylized undertones, antique chemical-photography vibe, dense atmospheric contrast, dreamlike decay palette. TECHNICAL: wide-angle distorted perspectives, baroque production-design compositions, crane and glide movements through crowded sets, medium-deep focus for texture-rich environments, practical effects and miniatures integration. ATMOSPHERE: gothic steampunk fable, grotesque whimsy, melancholic wonder, carnival-like menace. QUALITY: photorealistic with highly stylized production design, 8K resolution, cult-classic European fantasy visual identity.",

            "stardust": "Stardust romantic adventure fantasy cinematography, storybook swashbuckling elegance. LIGHTING: warm golden pastoral daylight, moonlit magical forest glow, sparkling practical highlights for enchantment, candlelit interiors in period settings, soft diffusion for fairy-tale romance, storm-lit supernatural beats. COLOR GRADING: luminous golds and deep midnight blues, jewel-toned magic accents, gentle pastel highlights in romantic moments, balanced saturation with storybook polish, classic fantasy warmth. TECHNICAL: sweeping crane reveals, adventure-oriented wide compositions, graceful action framing, practical costume-production design emphasis, shallow depth for character romance (f/2-f/2.8), smooth classical camera movement. ATMOSPHERE: whimsical quest, old-world charm, light-dark fairy tale contrast, playful magic and heroic romance. QUALITY: photorealistic, 8K resolution, premium fantasy-adventure cinematic finish, polished storybook visual style.",

            "once-upon-a-time-in-hollywood": "Once Upon a Time In Hollywood Quentin Tarantino period Los Angeles cinematography, Robert Richardson nostalgic analog glow. LIGHTING: sun-drenched California daylight, warm practical tungsten in vintage interiors, neon boulevard nights with reflective car surfaces, golden-hour smog haze, hard directional light for period authenticity. COLOR GRADING: warm Kodak-like film palette, rich yellows and amber skin tones, faded 1960s signage colors, controlled contrast with gentle highlight roll-off, grain-forward analog texture. TECHNICAL: anamorphic widescreen compositions, period-accurate camera movement restraint, long observational takes, practical locations and signage emphasis, 35mm film grain character, immersive production-design framing. ATMOSPHERE: late-60s Hollywood nostalgia, melancholy glamour, cultural transition, laid-back tension. QUALITY: photorealistic filmic texture, 8K scan quality, Academy Award-winning production design, auteur period-cinema authenticity.",

            "amelie": "Am√©lie Jean-Pierre Jeunet whimsical Parisian cinematography, Bruno Delbonnel painterly warmth. LIGHTING: warm golden Parisian light, cozy interior caf√© and apartment lighting, soft diffused natural window light, warm tungsten practical sources, romantic evening streetlights, nostalgic warm glow throughout. COLOR GRADING: vibrant warm palette dominated by reds yellows greens, desaturated blues creating teal-orange separation, painterly color grading, nostalgic postcard Paris aesthetic, high saturation in warm tones, storybook color treatment. TECHNICAL: whimsical camera movements and snap zooms, centered symmetrical compositions, shallow depth of field (f/2), creative transitions and visual effects, playful camera angles, miniature tilt-shift sequences. ATMOSPHERE: whimsical Parisian romance, magical realism, quirky charm, nostalgic warmth, fairy tale Paris, innocent wonder, visual poetry. QUALITY: photorealistic with stylized color, 8K resolution, C√©sar Award-winning cinematography, iconic French cinema aesthetic.",

            "shinkai-vibes": "Makoto Shinkai anime aesthetic. LIGHTING: brilliant lens flares, god rays piercing through clouds, hyper-realistic lighting, golden hour magic, bioluminescent night scenes, star-filled skies, vibrant city lights. COLOR GRADING: hyper-vibrant saturated colors, azure blue skies, emerald greens, impossible sunsets with purple and pink gradients, high contrast but airy feel. TECHNICAL: wide angle establishing shots of cityscapes and nature, extreme attention to detail in background art, photorealistic clouds and water, crisp sharp lines, digital animation perfection. ATMOSPHERE: emotional longing, separation, bittersweet romance, urban fantasy, everyday magic, breathtaking beauty. QUALITY: 8K anime wallpaper, Comix Wave Films production quality, masterpiece animation.",

            "90s-anime": "Retro 90s cel animation aesthetic. LIGHTING: flat cel shading, hard shadows, dramatic rim lighting, limited lighting complexity typical of hand-drawn era. COLOR GRADING: slightly muted or pastel palette, specific 90s broadcast colors, film grain simulation, VHS noise or slight chromatic aberration, analog warmth. TECHNICAL: hand-drawn line art look, traditional ink and paint style, limited frame rate feel (on threes), static backgrounds with moving characters. ATMOSPHERE: nostalgic, classic anime, cyberpunk or mecha vibes, magical girl transformations, lo-fi aesthetic. QUALITY: high quality scan of vintage cel, DVD box set art, Cowboy Bebop or Evangelion visual style.",

            "dark-fantasy-anime": "Dark Epic Fantasy anime aesthetic (Berserk/Elden Ring style). LIGHTING: dramatic chiaroscuro, heavy shadows, torchlight and firelight, cold moonlight, ominous atmospheric fog, rim lighting on armor. COLOR GRADING: desaturated gritty palette, blacks, greys, blood reds, cold blues, muted earth tones, high contrast. TECHNICAL: detailed line work, cross-hatching textures, heavy ink lines, dynamic action composition, extreme angles. ATMOSPHERE: dread, epic struggle, cosmic horror, medieval grit, violence and beauty, supernatural power. QUALITY: 8K resolution, MAPPA or Ufotable high budget production, theatrical feature quality.",

            "ghibli-style": "Studio Ghibli Hayao Miyazaki hand-painted aesthetic. LIGHTING: soft natural sun-drenched lighting, dappled forest light, puffy cumulus cloud shadows, warm inviting interior lamplight. COLOR GRADING: naturalistic watercolor palette, lush greens, azure skies, earthy browns, vibrant but natural colors, gouache painted backgrounds. TECHNICAL: hand-painted background art style, soft character outlines, fluid motion emphasis (flying sequences), attention to nature details (grass blowing, water flowing). ATMOSPHERE: childhood wonder, nature worship, pacifism, magical realism, nostalgia, cozy comfort, environmental beauty. QUALITY: 8K resolution, theatrical animation masterpiece, hand-drawn production value."
          };

          const FASHION_FOOD_STYLES = {
            // Fashion
            "gucci-retro": "Gucci campaign aesthetic (Alessandro Michele era), retro maximalism. LIGHTING: direct harsh flash photography, high contrast, mixed color temperatures, vintage ring light effect. COLOR GRADING: warm vintage tones, saturated reds and greens, slightly yellowed whites, 70s film stock emulation. TECHNICAL: 35mm film grain, snapshot aesthetic, wide angle lens (28mm), deep depth of field. QUALITY: high fashion, eccentric, quirky, vibrant, textured fabrics, editorial spread.",
            "balenciaga-dystopian": "Balenciaga campaign aesthetic (Demna Gvasalia era), post-apocalyptic chic. LIGHTING: cold industrial lighting, fluorescent tubes, overcast flat skylight, clinical atmosphere. COLOR GRADING: desaturated, cool blue and grey tones, crushed blacks, high contrast monochrome feel. TECHNICAL: ultra-wide angle lens (16-24mm), slight distortion, sharp focus throughout, digital noise texture. QUALITY: avant-garde, raw, gritty, surveillance camera vibe, ominous, high fidelity.",
            "vogue-polished": "Vogue US cover shoot aesthetic, Annie Leibovitz style. LIGHTING: expensive studio lighting, large softboxes, perfect fill light, \"rembrandt\" lighting on face, catchlights in eyes. COLOR GRADING: true-to-life skin tones, rich blacks, clean whites, vibrant but controlled color palette. TECHNICAL: medium telephoto lens (85-100mm), compression, creamy bokeh background, perfect composition. QUALITY: glossy magazine cover, flawless retouching, celebrity standards, elegant, timeless.",
            "saint-laurent-noir": "Saint Laurent campaign aesthetic (Hedi Slimane style), rock n' roll chic. LIGHTING: hard contrasty black and white lighting, strobe lights, shadows cutting across face, night club atmosphere. COLOR GRADING: high contrast black and white (or very desaturated cool tones), inky blacks, blown out highlights. TECHNICAL: 50mm strict standard lens, distinctive grain structure, vertical composition. QUALITY: edgy, rebellious, luxury noir, iconic, sharp details on leather and metal textures.",
            "dior-romance": "Christian Dior haute couture campaign, romantic dreamscape. LIGHTING: golden hour backlight, sun flares, soft diffusion filters, ethereal glow, angelic rim light. COLOR GRADING: pastel palette, soft pinks, champagnes and powdery blues, low contrast, airy brightness. TECHNICAL: shallow depth of field (f/1.2), soft focus edges, 135mm lens for compression and isolation. QUALITY: painterly photography, feminine, delicate, masterpiece, luxury perfume advertisement.",
            "chanel-parisian-minimal": "Chanel Parisian quiet-luxury editorial aesthetic. LIGHTING: soft diffused studio daylight, elegant window-light falloff, clean highlights on tweed and pearls, controlled shadow density. COLOR GRADING: restrained monochrome-neutral palette (ivory, black, beige), subtle filmic contrast, refined skin tones. TECHNICAL: precise symmetrical composition, medium-tele portrait lens feel (85mm), crisp texture detail on tailoring, minimal retouching. QUALITY: timeless couture restraint, sophisticated, polished, luxury magazine campaign finish.",
            "prada-intellectual-cool": "Prada intellectual minimal editorial aesthetic. LIGHTING: cool directional key light, architectural shadow lines, gallery-like controlled studio lighting, low clutter visual field. COLOR GRADING: cool greys, muted navy, desaturated neutrals, sharp tonal separation with modern contrast. TECHNICAL: geometric framing, negative space emphasis, 50mm-75mm clean perspective, razor-sharp garment edges, design-forward composition. QUALITY: cerebral luxury, modernist elegance, high-fashion conceptual ad look.",
            "versace-baroque-flash": "Versace maximal glam baroque campaign aesthetic. LIGHTING: direct hard flash with specular highlights on metallic surfaces, dramatic rim lights, high-impact studio contrast. COLOR GRADING: saturated golds, deep blacks, jewel accents, glossy high-luxury polish, bold chroma response. TECHNICAL: dynamic poses, wide-to-standard lens editorial distortion (28-50mm), high-detail skin and fabric texture, statement accessory focus. QUALITY: opulent, provocative, high-energy runway-campaign visual impact.",
            "calvin-klein-clean-90s": "Calvin Klein 90s clean minimal fashion photography aesthetic. LIGHTING: soft broad frontal light, gentle shadow transitions, natural skin exposure, understated studio setup. COLOR GRADING: neutral whites, soft greys, warm skin realism, low saturation with subtle grain texture. TECHNICAL: simple straight-on framing, uncluttered background, 35mm-50mm honest perspective, effortless candid pose language. QUALITY: iconic minimal sensuality, timeless commercial fashion campaign look.",
            "ysl-smoke-neon-night": "YSL smoky neon nightlife fashion editorial aesthetic. LIGHTING: mixed neon practicals with deep shadow pockets, magenta and cyan edge lighting, haze-enhanced volumetric beams. COLOR GRADING: noir blacks with selective neon saturation, cool-vs-warm chromatic split, glossy night contrast. TECHNICAL: low-light cinematic portrait framing, shallow depth (f/1.4-f/2), motion-blur accents, reflective materials emphasized. QUALITY: seductive urban luxury, edgy nightlife campaign aesthetic.",
            "valentino-red-opera": "Valentino red opera couture aesthetic. LIGHTING: theatrical spotlight key, velvet shadow rolloff, dramatic stage-like backlight, controlled specular detail on silk. COLOR GRADING: dominant couture reds from crimson to carmine, warm skin highlights, deep neutral blacks for isolation. TECHNICAL: statuesque posing, portrait-to-full-body editorial composition, elegant lens compression (85-135mm), fabric movement frozen in crisp detail. QUALITY: romantic dramatic luxury, haute couture campaign grandeur.",
            "loewe-art-house": "Loewe art-house conceptual editorial aesthetic. LIGHTING: museum-style soft directional lighting, sculptural shadow modeling, tactile object emphasis. COLOR GRADING: earthy muted palette with strategic color accents, subtle matte finish, contemporary art-book tonality. TECHNICAL: asymmetrical compositions, object-fashion interplay, medium-format clarity feel, unusual cropping and negative space experimentation. QUALITY: intelligent avant-garde luxury, gallery-grade editorial storytelling.",
            "miu-miu-youth-film": "Miu Miu youthful cinematic fashion aesthetic. LIGHTING: warm nostalgic daylight with practical interior glows, soft flash accents, dreamy low-contrast diffusion. COLOR GRADING: pastel candy tones with analog film warmth, lifted blacks, gentle halation highlights. TECHNICAL: candid movement framing, 35mm film-grain emulation, playful angles, natural expression-first portraiture. QUALITY: youthful romantic editorial, nostalgic luxury campaign mood.",
            "alexander-mcqueen-gothic-romance": "Alexander McQueen gothic romantic couture aesthetic. LIGHTING: dramatic chiaroscuro with sculpted side light, candlelike warm accents, heavy shadow architecture. COLOR GRADING: deep blacks, charcoal and oxblood tones, desaturated skin with selective rich highlights, high contrast mood. TECHNICAL: theatrical composition, textured fabrics rendered in crisp detail, dramatic silhouettes, controlled vignette framing. QUALITY: dark poetic luxury, avant-garde gothic runway editorial power.",
            "jacquemus-sun-bleached": "Jacquemus Mediterranean sun-bleached fashion aesthetic. LIGHTING: harsh noon sun with clean hard shadows, bright bounce fill, open-sky high-key exteriors. COLOR GRADING: sun-faded creams, terracotta, pale yellow and sky blue accents, airy high-luminance palette. TECHNICAL: wide minimalist location framing, strong geometry and negative space, relaxed lifestyle posing, tactile linen texture clarity. QUALITY: effortless summer luxury, vacation editorial freshness.",
            "bottega-veneta-tactile-luxury": "Bottega Veneta tactile quiet-luxury fashion aesthetic. LIGHTING: controlled soft directional studio light revealing weave and leather texture, subtle rim lighting for depth. COLOR GRADING: muted earthy greens, chocolate browns, clay neutrals, premium low-saturation richness. TECHNICAL: macro-to-medium product-fashion hybrid framing, material-focused detail fidelity, restrained composition, slow deliberate visual rhythm. QUALITY: artisanal craftsmanship emphasis, understated luxury campaign sophistication.",

            // Food
            "fast-food-pop": "High-end fast food commercial photography (McDonald's / Burger King style). LIGHTING: bright high-key studio lighting, multiple rim lights to define textures, hard main light for \"pop\". COLOR GRADING: hyper-saturated, warm appetizing tones (reds, yellows, browns), zero shadows on product. TECHNICAL: macro lens (100mm), focus stacking for front-to-back sharpness, \"hero\" angle (low and wide). QUALITY: mouth-watering, perfect food styling, glistening textures, condensation droplets, 8K advertising.",
            "fine-dining": "Michelin star restaurant photography, Chef's Table aesthetic. LIGHTING: single dramatic spotlight (snoot), deep shadows, moody chiaroscuro, highlighting specific textures. COLOR GRADING: dark slate background, rich jewel tones for food, cool shadows, high contrast. TECHNICAL: top-down (flat lay) or 45-degree angle, macro details, shallow depth of field isolating the garnish. QUALITY: culinary art, sophisticated, molecular gastronomy details, elegant, luxurious texture.",
            "rustic-lifestyle": "Bon App√©tit / Kinfolk magazine lifestyle food photography. LIGHTING: natural window light (side or back), soft shadows, white bounce card fill, \"morning light\" feel. COLOR GRADING: natural earthy tones, matte finish, slightly lifted blacks, filmic aesthetic. TECHNICAL: 50mm lens, natural composition (crumbs, napkins visible), \"human element\" (hands or depth), overhead shot. QUALITY: authentic, organic, appetizing, homemade feel, editorial food blog.",
            "cafe-moody": "Artisan coffee shop / bakery dark moody aesthetic. LIGHTING: dim ambient light, warm tungsten bulbs, visible steam backlight, cozy shadows. COLOR GRADING: warm wood tones, deep browns and creams, cozy and inviting temperature. TECHNICAL: shallow depth of field (f/1.8), focus on steam or foam texture, bokeh background of cafe. QUALITY: hygge, comforting, texture-heavy (wood, ceramic, foam), atmospheric.",
            "beverage-splash": "High-speed beverage advertising photography. LIGHTING: high-speed sync flash, strong backlighting to make liquid glow, hard contoured reflections. COLOR GRADING: cool refreshing tones, vibrant fruit colors, absolute black background or gradient. TECHNICAL: frozen motion (1/8000s shutter), macro details of droplets and condensation, razor sharp. QUALITY: refreshing, commercial perfection, crystal clear liquid, dynamic splash, production value.",

            "food-dark-moody-luxury": "Cinematic professional food photography of [FOOD_reference_ITEM], dark luxury direction. LIGHTING: low-key chiaroscuro setup with deep velvet shadows and one dramatic shaft of light sculpting silhouette and texture. COLOR GRADING: neutral premium grading with rich blacks, subtle warm highlights, restrained saturation. TECHNICAL: medium-format capture feel (Phase One IQ4 aesthetic), razor-sharp subject focus, controlled falloff, clean studio precision, 8K resolution. ATMOSPHERE: expensive, moody, sensory fine-dining campaign tone. BACKGROUND: dark textured slate or matte black velvet, no distracting props.",
            "food-high-key-airy": "Bright and airy high-key commercial food photography of [FOOD_reference_ITEM]. LIGHTING: soft diffused daylight from a large window, no harsh shadows, luminous clean whites. COLOR GRADING: pastel and soft neutral palette with gentle contrast and fresh tonal lift. TECHNICAL: shallow depth background separation with creamy bokeh, polished product styling, editorial ad clarity. ATMOSPHERE: fresh organic morning mood, light and heavenly visual language. BACKGROUND: blurred white marble or white linen surface.",
            "food-golden-hour-rustic": "Rustic lifestyle food photography of [FOOD_reference_ITEM] on a vintage wooden surface. LIGHTING: natural golden hour sunlight through leaves with dappled gobo shadows, warm orange and honey highlights, visible volumetric dust motes. COLOR GRADING: warm amber and earthy brown spectrum, soft filmic rolloff, inviting contrast. TECHNICAL: shallow depth of field for cozy subject isolation, tactile texture rendering, artisanal editorial framing. ATMOSPHERE: cozy, handmade, welcoming farm-table storytelling.",
            "food-modern-geometric": "Minimalist geometric commercial food photography of [FOOD_reference_ITEM] on a clean pedestal. LIGHTING: large softbox studio setup producing smooth gradients and crisp controlled highlights. COLOR GRADING: neutral editorial palette (beige, soft grey, muted stone) with clean modern contrast. TECHNICAL: architectural symmetry, precise balance, ample negative space, ultra-clean surfaces, catalog-ready sharpness. ATMOSPHERE: contemporary premium design language, strict and elegant visual order. BACKGROUND: solid matte color field.",
            "food-neon-gloss": "Creative neon-gloss studio shot of [FOOD_reference_ITEM] for modern nightlife campaign. LIGHTING: dual-color gel setup with cool teal rim light and warm magenta key light, high-contrast edge separation. COLOR GRADING: cyberpunk-inspired teal-magenta contrast, glossy blacks, saturated highlights. TECHNICAL: product placed on black reflective glass for mirror reflection, crisp commercial detail, polished ad finish. ATMOSPHERE: energetic, bold, urban night aesthetic.",
            "food-ethereal-dreamy": "Ethereal dreamlike food photography of [FOOD_reference_ITEM] with fairy-tale mood. LIGHTING: strong contre-jour backlight creating glowing halo edges, soft haze diffusion, delicate bloom. COLOR GRADING: pastel romantic palette with lifted highlights and soft tonal transitions. TECHNICAL: macro-detail accents with gentle soft-focus layers, selective foreground blur from botanical elements, cinematic depth. ATMOSPHERE: magical, floating, romantic visual poetry with subtle mist.",
            "food-macro-texture": "Extreme close-up macro food photography of [FOOD_reference_ITEM], texture-first approach. LIGHTING: raking side light to reveal micro-topography, pores, gloss and material relief. COLOR GRADING: natural tactile color with controlled contrast and high local detail. TECHNICAL: razor-sharp macro focal plane, ultra-shallow depth blurring edges completely, frame filled by subject only, no props. QUALITY: hyper-real rendering, 8K, premium advertising micro-detail.",
            "food-floating-hero": "Dynamic advertising hero shot of [FOOD_reference_ITEM] floating in mid-air. LIGHTING: dramatic studio key with strong rim lights for perfect separation and dimensionality. COLOR GRADING: clean commercial contrast with vibrant appetizing highlights and controlled shadows. TECHNICAL: zero-gravity suspension illusion, high-shutter frozen-time aesthetic, crisp edge detail, premium campaign finish, 8K resolution. ATMOSPHERE: bold motion energy with product-first impact.",
            "food-botanical-garden": "Organic natural food photography of [FOOD_reference_ITEM] in a botanical garden setting. LIGHTING: dappled sunlight filtering through foliage with soft natural transitions. COLOR GRADING: vibrant natural greens, fresh organic tones, balanced realistic saturation. TECHNICAL: outdoor shallow-depth composition, soft background blur with lush greenery, authentic editorial realism. ATMOSPHERE: farm-to-table freshness, healthy natural authenticity, bright seasonal mood.",
            "food-romantic-candlelit": "Atmospheric evening food photography of [FOOD_reference_ITEM] in an upscale restaurant scene. LIGHTING: warm candlelight as primary source, intimate glow, soft shadow falloff, gentle practical highlights. COLOR GRADING: deep warm ambers with elegant dark backgrounds and refined contrast. TECHNICAL: shallow depth with creamy bokeh from distant city or fairy lights, premium restaurant-commercial composition. ATMOSPHERE: sophisticated romantic luxury dining mood, cozy and cinematic."
          };

          // =============================================
          // STATE
          // =============================================
          let state = {
            aiProvider: "groq", apiKey: "",
            aiModel: "", cameraBody: "", aspectRatio: "", resolution: "", purpose: "", format: "", medium: "", photoStyle: "", cinemaStyle: "", directorStyle: "", artStyle: "", filmStock: "",
            lens: "", focalLength: "", aperture: "", angle: "", shotSize: "", composition: "", quality: "",
            mood: "",
            lightType: { primary: "", accent: "" },
            timeOfDay: { primary: "", accent: "" },
            lightFX: [], colorPalette: "", skinDetail: [], hairDetail: [], material: [], typography: [],
            referenceType: "", referenceWeight: 50,
            mainSubject: "", textContent: "", negativePrompt: "",
            quickStyle: "", fashionFoodStyle: "",
            emotion: "",
            generateFourMode: false, grid3x3Mode: false, maxConsistency: false, beforeAfter: false, seamlessPattern: false, seed: "",
            // Engine-specific generation params
            mjVersion: "7", mjStyle: "", mjStylize: 250, mjChaos: 0, mjWeird: 0,
            sdCfg: 7, sdSteps: 25,
            fluxModel: "dev", fluxGuidance: 3.5, fluxSteps: 28,
            dalleStyle: "vivid", dalleQuality: "hd",
            skinRenderBoost: false, hairRenderBoost: false,
            referenceImages: [],
            promptFormat: "flat",  // flat | structured | midjourney
            isStandardPresetActive: false
          };
          window.state = state; // Expose for verification

          const GENERATE_FOUR_PREFIX = `Generate 4 distinct variations of the subject instructions below. Do not create a grid. Create 4 separate images.`;

          const GRID_3X3_PREFIX = `3x3 Cinematic Contact Sheet, 3:4 AR. Full-bleed, no margins, thin dark dividers. Frozen scene logic: static subject/env consistency with dynamic cinematic lighting/DOF. Arri Alexa 35, 35mm, f/2.8, 8k, color-graded. 9 Panels: 1.ELS, 2.LS, 3.MLS, 4.MS, 5.MCU, 6.CU, 7.ECU (detail), 8.Low Angle, 9.High Angle.
`;



          const SKIN_RENDER_CONFIG = `"skin_render_config": {
  "texture_quality": "8K_micro_detail",
  "epidermal_physics": {
    "surface": "natural skin grain with distinct visible pores (t-zone emphasis)",
    "hair": "visible vellus hair (peach fuzz) on cheeks and jawline",
    "light_interaction": "subsurface scattering (SSS) for translucent flesh tone",
    "reflectivity": "natural sebum sheen on high points (nose, cheekbones), no plastic gloss"
  },
  "imperfections": {
    "type": "dermatological irregularities",
    "details": ["fine lines", "tiny moles", "hyper-pigmentation", "micro-capillaries"],
    "distribution": "randomized, non-symmetrical"
  },
  "eyes": {
    "texture": "crystalline iris structure with wet-surface reflections",
    "details": "distinct lacrimal caruncle, individual eyelash strands"
  },
  "negative_constraints": ["airbrushed", "wax figure", "smooth filter", "doll-like", "flat lighting"]
}`;

          const HAIR_RENDER_CONFIG = `"hair_render_config": {
  "rendering_mode": "strand_based_simulation",
  "texture_details": {
    "structure": "individual strands visible, not mesh-like",
    "density": "natural follicle density with scalp visibility at parting",
    "micro_imperfections": ["flyaways", "frizz", "uneven breaks", "baby hairs at hairline"],
    "finish": "organic keratin sheen, anisotropic reflection"
  },
  "physics_and_movement": {
    "weight": "gravity-induced drape",
    "interaction": "blowing gently in wind, strands covering part of face",
    "chaos_factor": "high (avoiding plastic helmet look)"
  },
  "facial_integration": {
    "transition": "gradual hairline blending, not a hard line",
    "vellus": "visible peach fuzz on temples and neck"
  }
}`;

          const MAX_CONSISTENCY_PREFIX = `FACE ID LOCKED from reference. Exact facial match required - all features preserved.
"CONSISTENCY PROTOCOL": "100% facial feature".
"preservation from reference image".
"FACE LOCKED": "NON-NEGOTIABLE"
"FACE CONSISTENCY": "100% - All facial features must remain IDENTICAL to locked reference CHARACTER INTEGRITY: Maintain key features across all variations ZERO DEVIATION from specified eye color, hair color, face structure, unique identifiers
"Keep the facial features of the person in the uploaded image exactly consistent. Do not modify their identity. Maintain 70% identical bone structure, skin tone, and facial imperfections (moles, scars)."
`;



          const FILM_STOCKS = {
            "Kodak Vision3 500T": "shot on Kodak Vision3 500T 5219 film stock, visible film grain, red halation around highlights, tungsten color balance, cinematic texture, deep shadows",
            "Kodak Vision3 250D": "shot on Kodak Vision3 250D 5207 film stock, fine grain structure, true-to-life colors, rich daylight saturation, organic skin tones",
            "Kodak Vision3 50D": "shot on Kodak Vision3 50D film stock, virtually grain-free, hyper-vivid colors, extreme detail retention, pristine film quality",
            "Fujifilm Eterna 500T": "shot on Fujifilm Eterna 500T, low contrast, soft pastel color palette, cinematic greenish shadows, smooth tonal transitions",
            "Kodak Tri-X 400": "shot on Kodak Tri-X 400 Black and White film, heavy contrast, gritty film grain, noir aesthetic, monochromatic",
            "Kodachrome 64": "shot on vintage Kodachrome 64, nostalgic warm colors, deeply saturated reds and yellows, 1970s magazine look",
            "ARRI Alexa 35 Sensor": "shot on ARRI Alexa 35, REVEAL Color Science, extreme dynamic range, creamy highlight roll-off, noise-free shadows",
            "RED V-Raptor / Monstro": "shot on RED V-Raptor 8K VV, hyper-realistic detail, razor sharp, deep crushed blacks, digital precision",
            "Sony Venice 2": "shot on Sony Venice 2, exceptional low light performance, clean vibrant colors, modern full-frame aesthetic",
            "VHS / MiniDV": "shot on VHS camcorder, 1990s home video style, tracking errors, chromatic aberration, low resolution, scanlines"
          };

          // =============================================
          // UTILS
          // =============================================
          const $ = id => document.getElementById(id);
          const esc = s => (s ?? "").toString().replace(/[&<>"']/g, m => ({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" })[m]);

          function notify(msg, type = "success") {
            const n = $("notification");
            n.textContent = msg;
            n.className = "notification " + type;
            n.classList.add("show");
            clearTimeout(n._t);
            n._t = setTimeout(() => n.classList.remove("show"), 2500);
          }

          function wordCount(t) { const s = (t || "").trim(); return s ? s.split(/\s+/).length : 0; }
          function deepClone(o) { return JSON.parse(JSON.stringify(o)); }

          // =============================================
          // INIT
          // =============================================
          document.addEventListener("DOMContentLoaded", function () {
            // Local fallback for css2 when opened directly from disk.
            var css2 = document.getElementById("css2LocalLink");
            if (css2 && window.location.protocol === "file:") {
              css2.href = "file:///C:/Users/TOT/Documents/Grav4/VideoPrompt/css2";
            }
            initPresets();
            bindEvents();
            setPromptFormat(state.promptFormat);
            updateAll();
          });

          function initPresets() {
            const g = $("presetGrid");
            g.innerHTML = "";
            presets.forEach((p, i) => {
              const b = document.createElement("button");
              b.className = "option-btn";
              b.style.borderColor = "var(--green)";
              b.style.borderWidth = "2px";
              b.dataset.presetIndex = String(i);
              b.textContent = p.name;
              b.addEventListener("click", () => applyPreset(i));
              g.appendChild(b);
            });
          }

          function bindEvents() {
            // Delegated clicks on option buttons
            document.addEventListener("click", (e) => {
              const btn = e.target.closest(".option-btn");
              if (!btn) return;

              if (btn.dataset.action === "addNegative") {
                addNegative(btn.dataset.value || "");
                return;
              }

              const group = btn.dataset.group;
              if (!group) return;
              handleSelect(group, btn.dataset.value || "");
            });

            $("referenceImages").addEventListener("change", handleImageUpload);
            $("refWeightSlider").addEventListener("input", (e) => {
              state.referenceWeight = parseInt(e.target.value, 10);
              $("weightValue").textContent = String(state.referenceWeight);
              updateAll();
            });

            // Gen params sliders
            $("mjStylizeSlider").addEventListener("input", (e) => { state.mjStylize = +e.target.value; $("mjStylizeVal").textContent = state.mjStylize; updateAll(); });
            $("mjChaosSlider").addEventListener("input", (e) => { state.mjChaos = +e.target.value; $("mjChaosVal").textContent = state.mjChaos; updateAll(); });
            $("mjWeirdSlider").addEventListener("input", (e) => { state.mjWeird = +e.target.value; $("mjWeirdVal").textContent = state.mjWeird; updateAll(); });
            $("sdCfgSlider").addEventListener("input", (e) => { state.sdCfg = +e.target.value; $("sdCfgVal").textContent = state.sdCfg; updateAll(); });
            $("sdStepsSlider").addEventListener("input", (e) => { state.sdSteps = +e.target.value; $("sdStepsVal").textContent = state.sdSteps; updateAll(); });
            $("fluxGuidanceSlider").addEventListener("input", (e) => { state.fluxGuidance = +e.target.value; $("fluxGuidanceVal").textContent = state.fluxGuidance; updateAll(); });
            $("fluxStepsSlider").addEventListener("input", (e) => { state.fluxSteps = +e.target.value; $("fluxStepsVal").textContent = state.fluxSteps; updateAll(); });

            // Compact button
            $("compactBtn").addEventListener("click", compactPrompt);

            $("copyPromptBtn").addEventListener("click", copyPrompt);
            $("copyJsonBtn").addEventListener("click", copyJson);
            $("resetBtn").addEventListener("click", resetAll);
            $("saveBtn").addEventListener("click", savePrompt);

            // Special modes checkboxes ‚Äî bind via JS, not inline
            ["generateFourMode", "grid3x3Mode", "maxConsistency", "beforeAfter", "seamlessPattern", "skinRenderBoost", "hairRenderBoost"].forEach(id => {
              const cb = $(id);
              if (cb) {
                cb.addEventListener("change", () => {
                  state[id] = cb.checked;

                  // Visual feedback on label
                  cb.closest(".toggle-label").classList.toggle("checked", cb.checked);
                  updateAll();
                });
                // Also handle click on label itself for robustness
                cb.closest("label").addEventListener("click", (e) => {
                  // Only handle if the click was on the label text, not the checkbox itself
                  if (e.target === cb) return;
                  e.preventDefault();
                  cb.checked = !cb.checked;
                  state[id] = cb.checked;
                  cb.closest(".toggle-label").classList.toggle("checked", cb.checked);
                  updateAll();
                });
              }
            });

            // Seed buttons
            $("randomSeedBtn").addEventListener("click", () => {
              const seed = Math.floor(Math.random() * 4294967295);
              $("seedInput").value = seed; state.seed = String(seed); updateAll();
              notify("Seed: " + seed);
            });
            $("clearSeedBtn").addEventListener("click", () => {
              $("seedInput").value = "";
              state.seed = "";
              updateAll();
            });
            // FIX: Seed Validation ‚Äî allow empty to clear seed
            $("seedInput").addEventListener("input", function () {
              if (this.value === "") {
                state.seed = "";
                buildPrompt();
                return;
              }
              let val = parseInt(this.value, 10);
              if (isNaN(val) || val < 0) val = 0;
              if (val > 4294967295) val = 4294967295;
              this.value = val;
              state.seed = String(val);
              buildPrompt(); // strictly update text, not full updateAll to avoid focus loss
            });

            // FIX: Generate 4 vs 3x3 Mutual Exclusion
            $("generateFourMode").addEventListener("change", function () {
              if (this.checked && $("grid3x3Mode").checked) {
                $("grid3x3Mode").click(); // simulate click to trigger logic + visual update
              }
            });
            $("grid3x3Mode").addEventListener("change", function () {
              if (this.checked && $("generateFourMode").checked) {
                $("generateFourMode").click();
              }
            });
          }

          function handleInput() { updateAll(); }

          // =============================================
          // TRANSLATE SCENE ‚Äî MyMemory API (free, no key)
          // =============================================
          function translateScene() {
            var textarea = $("mainSubject");
            var text = textarea.value.trim();
            var status = $("translateStatus");
            var btn = $("translateBtn");

            if (!text) { notify("–ü–æ–ª–µ –ø—É—Å—Ç–æ–µ", "warn"); return; }

            // Detect if already English
            var nonAscii = text.replace(/[a-zA-Z0-9\s.,!?;:\'"()\-\/\\@#$%^&*=+\[\]{}|<>~`]/g, "");
            if (nonAscii.length < text.length * 0.15) {
              notify("–¢–µ–∫—Å—Ç —É–∂–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º", "warn");
              return;
            }

            btn.disabled = true;
            status.textContent = "–ü–µ—Ä–µ–≤–æ–¥–∏–º...";
            status.style.color = "var(--accent-light)";

            var encoded = encodeURIComponent(text);
            var url = "https://api.mymemory.translated.net/get?q=" + encoded + "&langpair=ru|en";

            // Use XMLHttpRequest for max compatibility (works where fetch doesn't)
            var xhr = new XMLHttpRequest();
            xhr.open("GET", url, true);
            xhr.timeout = 10000;

            xhr.onload = function () {
              try {
                var data = JSON.parse(xhr.responseText);
                if (data.responseStatus === 200 && data.responseData && data.responseData.translatedText) {
                  var translated = data.responseData.translatedText;
                  if (translated === translated.toUpperCase() && translated.length > 20) {
                    translated = translated.charAt(0).toUpperCase() + translated.slice(1).toLowerCase();
                  }
                  textarea.value = translated;
                  state.mainSubject = translated;
                  status.textContent = "‚úÖ –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–æ";
                  status.style.color = "var(--green)";
                  updateAll();
                  notify("–¢–µ–∫—Å—Ç –ø–µ—Ä–µ–≤–µ–¥—ë–Ω –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π");
                } else if (data.responseStatus === 429) {
                  // FIX: Handle 429 explicitly
                  throw new Error("–õ–∏–º–∏—Ç MyMemory –∏—Å—á–µ—Ä–ø–∞–Ω (429).");
                } else {
                  throw new Error("API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É code=" + data.responseStatus);
                }
              } catch (e) {
                status.textContent = "‚ùå –û—à–∏–±–∫–∞";
                status.style.color = "var(--red, #ff7675)";
                notify("–û—à–∏–±–∫–∞ —Ä–∞–∑–±–æ—Ä–∞ –æ—Ç–≤–µ—Ç–∞: " + e.message, "err");
              }
              btn.disabled = false;
              setTimeout(function () { status.textContent = ""; }, 4000);
            };

            xhr.onerror = function () {
              status.textContent = "‚ùå –ù–µ—Ç —Å–µ—Ç–∏";
              status.style.color = "var(--red, #ff7675)";
              notify("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏/CORS –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ –¥–æ—Å—Ç—É–ø –∫ api.mymemory.translated.net", "err");
              btn.disabled = false;
              setTimeout(function () { status.textContent = ""; }, 5000);
            };

            xhr.ontimeout = function () {
              status.textContent = "‚ùå –¢–∞–π–º–∞—É—Ç";
              status.style.color = "var(--red, #ff7675)";
              notify("–°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç", "err");
              btn.disabled = false;
              setTimeout(function () { status.textContent = ""; }, 4000);
            };

            try {
              xhr.send();
            } catch (e) {
              status.textContent = "‚ùå –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ";
              status.style.color = "var(--red, #ff7675)";
              notify("–ó–∞–ø—Ä–æ—Å –ø–µ—Ä–µ–≤–æ–¥–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: " + e.message, "err");
              btn.disabled = false;
              setTimeout(function () { status.textContent = ""; }, 5000);
            }
          }

          // =============================================
          // SELECTION LOGIC
          // =============================================
          function handleSelect(group, value) {
            const mode = (groupConfig[group] && groupConfig[group].mode) || "single";

            // FIX: Any manual selection clears preset-active flag
            if (state.isStandardPresetActive && group !== "resolution") {
              state.isStandardPresetActive = false;
            }

            if (mode === "single") {
              // Toggle off if clicking same value
              if (state[group] === value) state[group] = "";
              else state[group] = value;

              document.querySelectorAll(`[data-group="${group}"]`).forEach(b => {
                b.classList.toggle("active", b.dataset.value === state[group]);
                b.querySelectorAll(".slot-tag").forEach(t => t.remove());
              });

              if (group === "aspectRatio") {
                state.resolution = "";
                rebuildResolution();
              }
              if (group === "aiModel") {
                updateModelHint();
              }
              // FIX: Quick Style visual reset
              if (group === "quickStyle" && state[group]) {
                // Clear competing styles visually and in state
                state.photoStyle = ""; state.cinemaStyle = ""; state.directorStyle = "";
                state.fashionFoodStyle = ""; // Clear Fashion Food
                syncGroup("photoStyle"); syncGroup("cinemaStyle"); syncGroup("directorStyle");
                syncGroup("fashionFoodStyle");
                // Also ensure expanded sections correct for Quick Style
                if (window.expandSectionsForQuickStyle) window.expandSectionsForQuickStyle(true);
              }

              // FIX: Fashion Food Style visual reset
              if (group === "fashionFoodStyle" && state[group]) {
                state.quickStyle = "";
                syncGroup("quickStyle");
                // Clear other styles that are blanket disabled
                ["photoStyle", "cinemaStyle", "directorStyle", "artStyle", "filmStock", "referenceType"].forEach(k => {
                  state[k] = "";
                  syncGroup(k);
                });
              }
            }

            if (mode === "multi") {
              if (!Array.isArray(state[group])) state[group] = [];
              const arr = state[group];
              const idx = arr.indexOf(value);
              if (idx >= 0) arr.splice(idx, 1); else arr.push(value);

              document.querySelectorAll(`[data-group="${group}"]`).forEach(b => {
                b.classList.toggle("active", arr.includes(b.dataset.value));
              });
            }

            if (mode === "primaryAccent") {
              togglePA(group, value);
            }

            updateAll();
          }

          function togglePA(group, value) {
            const cur = state[group] || { primary: "", accent: "" };

            if (cur.primary === value) { cur.primary = ""; }
            else if (cur.accent === value) { cur.accent = ""; }
            else if (!cur.primary) { cur.primary = value; }
            else if (!cur.accent) { cur.accent = value; }
            else { cur.accent = value; }

            state[group] = cur;
            syncPAUI(group);
          }

          function syncPAUI(group) {
            const cur = state[group] || { primary: "", accent: "" };
            document.querySelectorAll(`[data-group="${group}"]`).forEach(b => {
              const v = b.dataset.value;
              b.classList.toggle("active", v === cur.primary || v === cur.accent);
              b.querySelectorAll(".slot-tag").forEach(t => t.remove());

              if (v === cur.primary) {
                const t = document.createElement("span");
                t.className = "slot-tag primary"; t.textContent = "P";
                b.appendChild(t);
              }
              if (v === cur.accent) {
                const t = document.createElement("span");
                t.className = "slot-tag accent"; t.textContent = "A";
                b.appendChild(t);
              }
            });
          }

          function syncGroup(group) {
            const mode = groupConfig[group] && groupConfig[group].mode;
            if (mode === "single") {
              document.querySelectorAll(`[data-group="${group}"]`).forEach(b => {
                b.classList.toggle("active", b.dataset.value === state[group]);
                b.querySelectorAll(".slot-tag").forEach(t => t.remove());
              });
            }
            if (mode === "multi") {
              const arr = state[group] || [];
              document.querySelectorAll(`[data-group="${group}"]`).forEach(b => {
                b.classList.toggle("active", arr.includes(b.dataset.value));
              });
            }
            if (mode === "primaryAccent") syncPAUI(group);
          }

          // =============================================
          // RESOLUTION
          // =============================================
          function rebuildResolution() {
            const ar = state.aspectRatio;
            const info = $("resolutionInfo");
            const opts = $("resolutionOptions");
            opts.innerHTML = "";

            if (!ar || !resolutionMap[ar]) {
              info.style.display = "block";
              opts.style.display = "none";
              return;
            }
            info.style.display = "none";
            opts.style.display = "grid";

            resolutionMap[ar].forEach(r => {
              const b = document.createElement("button");
              b.className = "option-btn";
              b.dataset.group = "resolution";
              b.dataset.value = r.value;
              b.textContent = r.label;
              if (state.resolution === r.value) b.classList.add("active");
              opts.appendChild(b);
            });
          }

          // =============================================
          // MODEL HINTS
          // =============================================
          function updateModelHint() {
            const h = $("modelHint");
            if (state.aiModel && modelTips[state.aiModel]) {
              h.textContent = modelTips[state.aiModel];
              h.style.display = "block";
            } else {
              h.style.display = "none";
            }
          }

          function updateRefUI() {
            const isMJ = state.aiModel === "midjourney";
            const sec = $("referencesSection");
            const input = $("referenceImages");

            // Midjourney mode: disable reference upload entirely
            if (isMJ) {
              if (sec) sec.classList.add("disabled-section");
              if (input) {
                input.value = "";
                input.disabled = true;
              }
              state.referenceImages = [];
              $("imagePreviewContainer").style.display = "none";
              $("referenceOptions").style.display = "none";
              $("referenceWeight").style.display = "none";
              $("refUploadHint").innerHTML = "–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è <b>Midjourney</b> –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ –±–∏–ª–¥–µ—Ä–∞.";
              return;
            }

            // Non-MJ engines: enable references
            if (sec) sec.classList.remove("disabled-section");
            if (input) input.disabled = false;

            $("refUploadHint").textContent = "–î–æ 13 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –≤–∑—è—Ç—å –∏–∑ –∫–∞–∂–¥–æ–≥–æ.";
            $("referenceImages").setAttribute("multiple", "");

            const hasRefs = state.referenceImages.length > 0;
            if (!hasRefs) {
              $("imagePreviewContainer").style.display = "none";
              $("referenceOptions").style.display = "none";
              $("referenceWeight").style.display = "none";
              return;
            }

            $("imagePreviewContainer").style.display = "block";
            $("referenceOptions").style.display = "block";
            // Weight slider: useful for SD and Flux (IP-Adapter). Not useful for chatgpt/nano/dall-e/ideogram/etc.
            const needsWeight = ["stable-diffusion", "flux"].includes(state.aiModel);
            $("referenceWeight").style.display = needsWeight ? "block" : "none";
          }

          function updateGenParamsUI() {
            const m = state.aiModel;
            $("mjGenParams").style.display = m === "midjourney" ? "block" : "none";
            $("sdGenParams").style.display = m === "stable-diffusion" ? "block" : "none";
            $("fluxGenParams").style.display = m === "flux" ? "block" : "none";
            $("dalleGenParams").style.display = m === "dall-e-3" ? "block" : "none";
            $("noGenParams").style.display = ["midjourney", "stable-diffusion", "flux", "dall-e-3", ""].includes(m) ? "none" : "block";
          }

          // =============================================
          // COMPACT PROMPT ‚Äî strip to essential core
          // =============================================
          function compactPrompt() {
            const outBox = $("promptOutput");
            let text = outBox.textContent || "";
            if (!text.trim() || text.includes("Select parameters") || text.includes("–í—ã–±–µ—Ä–∏—Ç–µ")) {
              notify("–ü—Ä–æ–º–ø—Ç –ø—É—Å—Ç", "warn"); return;
            }

            // Remove quality spam keywords
            const qualitySpam = [
              "8k", "4k", "2k", "masterpiece", "best quality", "ultra detailed",
              "high quality", "detailed", "highly detailed", "professional",
              "award-winning", "amazing", "beautiful", "stunning"
            ];
            let parts = text.split(", ");
            parts = parts.filter(p => {
              const low = p.trim().toLowerCase();
              return !qualitySpam.some(q => low === q || low === q + ",");
            });

            // Remove duplicate semantic concepts
            const seen = new Set();
            parts = parts.filter(p => {
              const key = p.trim().toLowerCase().replace(/[^a-z0-9]/g, "").slice(0, 20);
              if (seen.has(key)) return false;
              seen.add(key);
              return true;
            });

            // Strip appended reference/negative sections
            let cleaned = parts.join(", ");
            cleaned = cleaned.replace(/\n\n--- Reference images ---[\s\S]*$/, "");
            cleaned = cleaned.replace(/\nNegative prompt:[\s\S]*$/, "");
            cleaned = cleaned.replace(/,\s*,/g, ",").replace(/,\s*$/, "").trim();

            outBox.textContent = cleaned;
            $("charCount").textContent = String(cleaned.length);
            $("wordCount").textContent = String(cleaned.split(/\s+/).filter(Boolean).length);
            notify("‚ö° –ü—Ä–æ–º–ø—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω ‚Äî —É–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —Å–ª–æ–≤–∞");
          }

          // =============================================
          // REFERENCES
          // =============================================
          function handleImageUpload(event) {
            const MAX_REFERENCE_IMAGES = 13;
            const allFiles = Array.from(event.target.files || []);
            const files = allFiles.slice(0, MAX_REFERENCE_IMAGES);
            if (!files.length) return;
            if (allFiles.length > MAX_REFERENCE_IMAGES) {
              notify(`–ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–∞–∫—Å–∏–º—É–º ${MAX_REFERENCE_IMAGES} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –õ–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω—ã.`, "warn");
            }

            // Disabled for Midjourney in this build
            if (state.aiModel === "midjourney") {
              event.target.value = "";
              notify("–†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã –¥–ª—è Midjourney", "warn");
              return;
            }

            state.referenceImages = [];
            const previews = $("imagePreviews");
            previews.innerHTML = "";

            files.forEach((file, index) => {
              const reader = new FileReader();
              reader.onload = (e) => {
                const imgData = { name: file.name, data: e.target.result, size: (file.size / 1024).toFixed(1) + " KB", description: "", width: 0, height: 0 };

                // Capture actual image dimensions
                const tempImg = new Image();
                tempImg.onload = () => {
                  imgData.width = tempImg.naturalWidth;
                  imgData.height = tempImg.naturalHeight;
                };
                tempImg.src = e.target.result;

                state.referenceImages.push(imgData);

                const card = document.createElement("div");
                card.className = "image-preview-card";
                imgData.extract = [];
                card.innerHTML = `
            <button class="image-remove-btn" data-remove-index="${index}">√ó</button>
            <div><img src="${e.target.result}" alt="${esc(file.name)}"></div>
            <div class="image-preview-details">
              <div class="image-preview-info">
                <div style="font-weight:800;color:var(--accent-light);margin-bottom:3px;">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ${index + 1}</div>
                <div>${esc(file.name)} ¬∑ ${esc(imgData.size)}</div>
              </div>
              <div class="ref-extract-row">
                ${REF_EXTRACT_OPTIONS.map((opt, oi) => `<label class="ref-extract-label"><input type="checkbox" data-ext-img="${index}" data-ext-opt="${oi}"> ${opt}</label>`).join("")}
              </div>
              <textarea class="image-description-input" data-desc-index="${index}" placeholder="–î–æ–ø. –æ–ø–∏—Å–∞–Ω–∏–µ: —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∑—è—Ç—å..."></textarea>
            </div>`;
                // Wire extract checkboxes
                card.querySelectorAll('[data-ext-img]').forEach(cb => {
                  cb.addEventListener('change', function () {
                    const ii = parseInt(this.dataset.extImg, 10), oo = parseInt(this.dataset.extOpt, 10), opt = REF_EXTRACT_OPTIONS[oo];
                    if (!state.referenceImages[ii]) return;
                    if (!state.referenceImages[ii].extract) state.referenceImages[ii].extract = [];
                    const ex = state.referenceImages[ii].extract;
                    this.closest(".ref-extract-label").classList.toggle("ext-checked", this.checked);
                    if (this.checked) { if (!ex.includes(opt)) ex.push(opt) } else { const i = ex.indexOf(opt); if (i >= 0) ex.splice(i, 1) }
                    updateAll();
                  });
                });
                previews.appendChild(card);

                card.querySelector(`[data-remove-index="${index}"]`).addEventListener("click", () => removeImage(index));
                card.querySelector(`[data-desc-index="${index}"]`).addEventListener("input", (ev) => {
                  const i = parseInt(ev.target.dataset.descIndex, 10);
                  if (state.referenceImages[i]) state.referenceImages[i].description = ev.target.value;
                  updateAll();
                });

                $("imagePreviewContainer").style.display = "block";
                // Show reference controls for supported engines
                $("referenceOptions").style.display = "block";
                $("referenceWeight").style.display = ["stable-diffusion", "flux"].includes(state.aiModel) ? "block" : "none";
                updateAll();
              };
              reader.readAsDataURL(file);
            });
            notify(`–ó–∞–≥—Ä—É–∂–µ–Ω–æ ${files.length} —Ñ–∞–π–ª(–æ–≤)`);
          }

          function removeImage(index) {
            state.referenceImages.splice(index, 1);
            if (!state.referenceImages.length) {
              $("imagePreviewContainer").style.display = "none";
              $("referenceOptions").style.display = "none";
              $("referenceWeight").style.display = "none";
              $("referenceImages").value = "";
              updateAll();
              return;
            }
            rebuildImageCards();
            updateAll();
          }

          function rebuildImageCards() {
            const previews = $("imagePreviews");
            previews.innerHTML = "";
            state.referenceImages.forEach((img, idx) => {
              const card = document.createElement("div");
              card.className = "image-preview-card";
              const extractChecks = REF_EXTRACT_OPTIONS.map((opt, oi) => {
                const checked = (img.extract || []).includes(opt) ? "checked" : "";
                return `<label class="ref-extract-label"><input type="checkbox" data-ext-img="${idx}" data-ext-opt="${oi}" ${checked}> ${opt}</label>`;
              }).join("");
              card.innerHTML = `
          <button class="image-remove-btn" data-remove-index="${idx}">√ó</button>
          <div><img src="${img.data}" alt="${esc(img.name)}"></div>
          <div class="image-preview-details">
            <div class="image-preview-info">
              <div style="font-weight:800;color:var(--accent-light);margin-bottom:3px;">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ${idx + 1}</div>
              <div>${esc(img.name)} ¬∑ ${esc(img.size)}</div>
            </div>
            <div class="ref-extract-row">${extractChecks}</div>
            <textarea class="image-description-input" data-desc-index="${idx}" placeholder="–ß—Ç–æ –≤–∑—è—Ç—å: –ø–∞–ª–∏—Ç—Ä—É, –ø–æ–∑—É, —Å—Ç–∏–ª—å, —Ç–µ–∫—Å—Ç—É—Ä—É...">${esc(img.description || "")}</textarea>
          </div>`;
              previews.appendChild(card);
              // Wire extract checkboxes
              card.querySelectorAll('[data-ext-img]').forEach(cb => {
                cb.addEventListener('change', function () {
                  const ii = parseInt(this.dataset.extImg, 10), oo = parseInt(this.dataset.extOpt, 10), opt = REF_EXTRACT_OPTIONS[oo];
                  if (!state.referenceImages[ii]) return;
                  if (!state.referenceImages[ii].extract) state.referenceImages[ii].extract = [];
                  const ex = state.referenceImages[ii].extract;
                  if (this.checked) { if (!ex.includes(opt)) ex.push(opt) } else { const i = ex.indexOf(opt); if (i >= 0) ex.splice(i, 1) }
                  updateAll();
                });
              });
              card.querySelector(`[data-remove-index="${idx}"]`).addEventListener("click", () => removeImage(idx));
              card.querySelector(`[data-desc-index="${idx}"]`).addEventListener("input", (ev) => {
                const i = parseInt(ev.target.dataset.descIndex, 10);
                if (state.referenceImages[i]) state.referenceImages[i].description = ev.target.value;
                updateAll();
              });
            });
          }

          // =============================================
          // NEGATIVES
          // =============================================
          function addNegative(text) {
            const f = $("negativePrompt");
            const cur = (f.value || "").trim();
            // Avoid duplicates
            const existing = cur.split(",").map(s => s.trim().toLowerCase());
            const newParts = text.split(",").map(s => s.trim()).filter(s => !existing.includes(s.toLowerCase()));
            if (!newParts.length) { notify("–£–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ", "warn"); return; }
            f.value = cur ? (cur + ", " + newParts.join(", ")) : newParts.join(", ");
            state.negativePrompt = f.value;
            updateAll();
          }

          // =============================================
          // PROMPT FORMAT
          // =============================================
          function setPromptFormat(fmt) {
            state.promptFormat = fmt;
            document.querySelectorAll(".format-tab").forEach(t => {
              t.classList.toggle("active", t.dataset.format === fmt);
            });
            const labels = { flat: "Flat (–ü–ª–æ—Å–∫–∏–π)", structured: "Structured (–°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π)", midjourney: "Midjourney —Å–∏–Ω—Ç–∞–∫—Å–∏—Å" };
            $("promptFormatLabel").textContent = labels[fmt] || fmt;
            updateAll();
          }


          // ChatGPT Image: style descriptions without author names (content policy)
          var CHATGPT_STYLE_MAP = {
            "in the style of Annie Leibovitz, dramatic portrait lighting, rich colors": "dramatic editorial portrait, rich warm saturated colors, deep shadows with golden highlights, intimate cinematic composition",
            "in the style of Peter Lindbergh, black and white, raw beauty, minimal retouching": "raw black-and-white portrait, unretouched natural beauty, high contrast silver gelatin aesthetic, emotional authenticity",
            "in the style of Steve McCurry, vivid saturated colors, documentary": "vivid hypersaturated documentary photograph, intense eye contact, Kodachrome warmth, National Geographic composition",
            "in the style of Helmut Newton, high contrast, provocative glamour, black and white": "high contrast glamour noir, provocative fashion pose, hard directional light, bold black-and-white with deep blacks",
            "in the style of Mario Testino, warm golden tones, glossy fashion": "warm golden fashion tones, sun-kisses glossy skin, aspirational luxury aesthetic, bright editorial warmth",
            "in the style of Tim Walker, surreal, fantastical, pastel dreamlike": "surreal fantastical set design, pastel dreamlike palette, whimsical oversized props, fairy-tale fashion fantasy",
            "in the style of Ansel Adams, high dynamic range landscape, deep blacks, zone system": "extreme tonal range landscape, pure black to bright white, zone-system exposure, majestic wilderness clarity",
            "in the style of Richard Avedon, stark white background, high contrast portrait": "stark pure white background, high contrast minimalist portrait, sharp focus on facial character, fashion-documentary hybrid",
            "in the style of Guy Bourdin, bold saturated colors, surreal fashion, strong shadows": "bold saturated pop colors, surreal fashion narrative, hard geometric shadows, provocative avant-garde composition",
            "in the style of Gregory Crewdson, cinematic suburban, eerie twilight, elaborate staged": "cinematic suburban tableau, eerie twilight atmosphere, elaborate staged scene, uncanny everyday mystery",
            "cinematography by Roger Deakins, naturalistic light, precise framing, atmospheric": "naturalistic motivated lighting, precise geometric framing, atmospheric haze, restrained palette with emotional depth",
            "cinematography by Emmanuel Lubezki, long takes, natural light, immersive": "pure natural light, immersive wide-angle perspective, ethereal luminosity, spiritual fluid movement feel",
            "cinematography by Hoyte van Hoytema, IMAX, desaturated palette, epic scale": "IMAX large-format clarity, desaturated cool palette, epic monumental scale, tactile film grain texture",
            "cinematography by Robert Richardson, high contrast, bold color, dynamic lighting": "aggressive high-contrast lighting, bold expressive color, dramatic rim lights, kinetic visual energy",
            "cinematography by Bradford Young, low-key lighting, rich shadows, warm undertones": "low-key intimate lighting, rich layered shadows, warm amber undertones, textured underexposed beauty",
            "cinematography by Janusz Kaminski, overexposed highlights, bleach bypass": "overexposed blown highlights, bleach bypass silver tones, diffused backlight halos, raw documentary feel",
            "cinematography by Vittorio Storaro, painterly light, rich color symbolism": "painterly Renaissance lighting, rich symbolic color storytelling, warm-to-cool emotional transitions, operatic grandeur",
            "cinematography by Greig Fraser, anamorphic, moody atmosphere, teal and orange": "anamorphic lens distortion, moody atmospheric haze, teal-and-orange grade, modern epic texture",
            "cinematography by Linus Sandgren, warm nostalgic tones, golden light, film grain": "warm nostalgic golden tones, classic Hollywood glamour, visible film grain, romantic soft focus",
            "cinematography by Ari Wegner, textured natural light, intimate framing, muted palette": "textured available-light naturalism, intimate observational framing, muted period-authentic palette",
            "directed by Denis Villeneuve, vast scale, muted desaturated palette, atmospheric silence, epic compositions": "vast monumental scale, muted desaturated palette, atmospheric silence and negative space, geometric epic compositions",
            "directed by Wes Anderson, symmetrical framing, pastel color palette, whimsical miniature aesthetic": "obsessively symmetrical framing, curated pastel palette, whimsical dollhouse aesthetic, centered compositions",
            "directed by Christopher Nolan, IMAX large format, desaturated blue tones, practical effects, epic scope": "IMAX large-format grandeur, desaturated cool blue tones, grounded practical realism, epic cerebral scope",
            "directed by David Fincher, dark muted palette, precise framing, cold blue-green tones, clinical aesthetic": "dark muted palette, mathematically precise framing, cold blue-green undertones, clinical sterile aesthetic",
            "directed by Ridley Scott, atmospheric haze, painterly compositions, epic historical grandeur": "atmospheric haze and smoke, painterly Renaissance compositions, epic historical grandeur, chiaroscuro depth",
            "directed by Quentin Tarantino, bold saturated colors, dynamic angles, retro grindhouse aesthetic": "bold oversaturated retro colors, dynamic low-angle shots, vintage grindhouse grain, pop-culture pastiche",
            "directed by Greta Gerwig, warm natural light, soft pastels, intimate handheld framing, nostalgic warmth": "warm natural window light, soft nostalgic pastels, intimate handheld framing, gentle feminine warmth",
            "directed by Jordan Peele, unsettling suburban beauty, vivid colors, horror tension, surreal undertones": "unsettling suburban uncanny beauty, vivid hyper-real colors, creeping horror tension, surreal social undertones",
            "directed by Bong Joon-ho, social contrast, sharp compositions, dark humor, class division visual metaphor": "sharp architectural compositions, visual class-division metaphors, dark satirical tone, spatial contrast storytelling",
            "directed by Chloe Zhao, golden hour landscapes, natural light, documentary intimacy, vast American West": "golden hour vast landscape, purely natural light, documentary intimate realism, poetic frontier beauty"
          };
          // =============================================
          // BUILD PROMPT ‚Äî FLAT (universal, recommended)
          // =============================================
          function buildFlatPrompt() {
            const headers = [];
            const parts = [];

            // 1. Headers (Metadata)
            // Aspect ratio & resolution ‚Äî prepend as metadata tags
            if (state.aspectRatio) headers.push(`[Aspect: ${state.aspectRatio}]`);
            if (state.resolution) headers.push(`[Resolution: ${state.resolution}]`);

            // 2. Styles & Parameters
            // Skip quality keywords for MJ (uses --q parameter instead)
            if (state.quality && state.aiModel !== "midjourney") parts.push(state.quality);
            if (state.purpose) parts.push(state.purpose);

            // Format
            if (state.format) {
              // Skip "photorealistic" if purpose already implies it (Photography, Cinematic Still)
              const skipPhotoreal = state.format === "photorealistic" && ["Photography", "Cinematic Still", "Product Photography"].includes(state.purpose);
              if (!skipPhotoreal) parts.push(state.format);
            }

            // Medium (NEW)
            if (state.medium) parts.push(state.medium);

            // NOTE: Main Subject is handled separately below

            // FIX: Quick Style Overlay Logic
            // If Quick Style is active, ignore Camera, Lighting, and Materials
            if (!state.quickStyle) {
              // Camera
              if (state.cameraBody) parts.push(state.cameraBody);
              if (state.lens) parts.push(state.lens);
              if (state.focalLength) parts.push(state.focalLength);
              if (state.aperture) parts.push(state.aperture);
              if (state.filmStock && FILM_STOCKS[state.filmStock]) parts.push(FILM_STOCKS[state.filmStock]);

              // Explicitly ignore Angle and Composition in G4 mode (variations handle this)
              if (!state.generateFourMode) {
                if (state.shotSize) parts.push(state.shotSize); // NEW
                if (state.angle) parts.push(state.angle);
                if (state.composition) parts.push(state.composition);
              }

              // Lighting ‚Äî flat, no curly braces
              if (state.lightType.primary) parts.push(state.lightType.primary);
              if (state.lightType.accent) parts.push(state.lightType.accent);
              if (state.timeOfDay.primary) parts.push(state.timeOfDay.primary);
              if (state.timeOfDay.accent) parts.push(state.timeOfDay.accent);

              // Effects
              state.lightFX.forEach(fx => parts.push(fx));
              if (state.colorPalette) parts.push(state.colorPalette);
              if (state.mood) parts.push("Mood: " + state.mood); // NEW

              // Skin
              state.skinDetail.forEach(s => parts.push(s));
              state.hairDetail.forEach(h => parts.push(h));

              // Materials
              state.material.forEach(m => parts.push(m));
            } else {
              // Quick Style active: Allow only limited modifiers or let the style dominate
              // We might want to allow Composition/Angle if strictly needed, but per rule 18 they should be disabled.
              // We'll trust the conflict rule 18 disabling logic, but this double-check ensures clean prompts.
            }

            // Text
            if (state.textContent) parts.push(`text "${state.textContent}"`);
            state.typography.forEach(t => parts.push(t));

            // Modes
            // Styles ‚Äî ChatGPT: swap author names for descriptions
            var _cg = state.aiModel === "chatgpt-image";
            if (!state.quickStyle) {
              if (state.photoStyle) parts.push(_cg ? (CHATGPT_STYLE_MAP[state.photoStyle] || state.photoStyle) : state.photoStyle);
              if (state.cinemaStyle) parts.push(_cg ? (CHATGPT_STYLE_MAP[state.cinemaStyle] || state.cinemaStyle) : state.cinemaStyle);
              if (state.directorStyle) parts.push(_cg ? (CHATGPT_STYLE_MAP[state.directorStyle] || state.directorStyle) : state.directorStyle);
              if (state.artStyle && window.ART_STYLES_MAP && window.ART_STYLES_MAP[state.artStyle]) parts.push(window.ART_STYLES_MAP[state.artStyle]);
            }

            // Quick Style Preset
            if (state.quickStyle && QUICK_STYLES[state.quickStyle]) parts.push(QUICK_STYLES[state.quickStyle]);
            // Fashion & Food Style
            if (state.fashionFoodStyle && FASHION_FOOD_STYLES[state.fashionFoodStyle]) parts.push(FASHION_FOOD_STYLES[state.fashionFoodStyle]);

            // FIX: Cinematic Presets
            if (state.cinematicPreset && window.CINEMATIC_PRESETS_MAP && window.CINEMATIC_PRESETS_MAP[state.cinematicPreset]) parts.push(window.CINEMATIC_PRESETS_MAP[state.cinematicPreset]);

            // FIX: Audio ‚Äî Ambience, Foley, Cinematic FX
            if (state.ambience && typeof AMBIENCE !== 'undefined' && AMBIENCE[state.ambience]) parts.push(AMBIENCE[state.ambience]);
            if (state.foley && typeof FOLEY !== 'undefined' && FOLEY[state.foley]) parts.push(FOLEY[state.foley]);
            if (state.cinematicFx && typeof CINE_FX !== 'undefined' && CINE_FX[state.cinematicFx]) parts.push(CINE_FX[state.cinematicFx]);

            // Special modes
            if (state.beforeAfter) parts.push("before and after side-by-side comparison");
            if (state.seamlessPattern) parts.push("seamless tileable pattern");
            // Seed is passed as parameter, not in prompt text

            // 3. Construct Final String
            let finalPrompt = "Generate an image.\n";

            // Add Headers
            if (headers.length > 0) finalPrompt += headers.join(", ") + "\n";

            // Add Subject (on new line with prefix)
            if (state.mainSubject && state.mainSubject.trim()) {
              finalPrompt += `subject: ${state.mainSubject.trim()}\n`;
            }

            // EMOTION
            if (state.emotion && EMOTIONS[state.emotion]) {
              finalPrompt += `emotion: ${EMOTIONS[state.emotion]}\n`;
            }

            const modifiers = parts.filter(Boolean).join(", ");
            if (modifiers) finalPrompt += modifiers;

            // References note (not part of actual prompt, but informational)
            let refs = "";
            if (state.referenceImages.length) {
              refs += "\n\n--- Reference images ---\n";
              refs += `${state.referenceImages.length} image(s), weight: ${state.referenceWeight}%`;
              if (state.referenceType) refs += `, type: ${state.referenceType}`;
              state.referenceImages.forEach((img, i) => {
                if ((img.description || "").trim()) refs += `\nImage ${i + 1}: ${img.description.trim()}`;
              });
            }

            return (finalPrompt + refs).trim() || "Select parameters on the left...";
          }

          // =============================================
          // BUILD PROMPT ‚Äî STRUCTURED
          // =============================================
          function buildStructuredPrompt() {
            let out = "";

            if (state.aiModel) out += `[Model: ${state.aiModel}]\n`;
            if (state.aspectRatio) out += `[Aspect: ${state.aspectRatio}]`;
            if (state.resolution) out += ` [Resolution: ${state.resolution}]`;
            if (state.aspectRatio || state.resolution) out += "\n";
            out += "\n";

            // Main prompt
            const parts = [];
            if (state.quality && state.aiModel !== "midjourney") parts.push(state.quality);
            if (state.purpose) parts.push(state.purpose);

            if (state.format && !(state.format === "photorealistic" && ["Photography", "Cinematic Still", "Product Photography"].includes(state.purpose))) parts.push(state.format);

            if (state.medium) parts.push(state.medium); // NEW

            if (state.mainSubject) parts.push(state.mainSubject.trim());
            if (state.emotion) parts.push(`EMOTION: ${EMOTIONS[state.emotion]}`);
            out += parts.filter(Boolean).join(", ") + "\n\n";

            // Camera
            if (!state.quickStyle) { // FIX: Ignore camera in Quick Style mode
              if (state.cameraBody || state.lens || state.aperture || state.angle || state.composition || state.shotSize) {
                out += "CAMERA: ";
                const cam = [];
                if (state.cameraBody) cam.push(state.cameraBody);
                if (state.lens) cam.push(state.lens);
                if (state.shotSize) cam.push(state.shotSize); // NEW
                if (state.focalLength) cam.push(state.focalLength);
                if (state.aperture) cam.push(state.aperture);
                if (state.angle) cam.push(state.angle);
                if (state.composition) cam.push(state.composition);
                out += cam.join(", ") + "\n";
              }

              // Lighting
              const lightParts = [];
              if (state.lightType.primary) lightParts.push(state.lightType.primary);
              if (state.lightType.accent) lightParts.push(state.lightType.accent);
              if (state.timeOfDay.primary) lightParts.push(state.timeOfDay.primary);
              if (state.timeOfDay.accent) lightParts.push(state.timeOfDay.accent);
              if (lightParts.length) out += "LIGHTING: " + lightParts.join(", ") + "\n";

              if (state.lightFX.length) out += "EFFECTS: " + state.lightFX.join(", ") + "\n";
              if (state.colorPalette) out += "PALETTE: " + state.colorPalette + "\n";
              if (state.mood) out += "MOOD: " + state.mood + "\n"; // NEW

              if (state.skinDetail.length) out += "SKIN: " + state.skinDetail.join(", ") + "\n";
              if (state.hairDetail.length) out += "HAIR: " + state.hairDetail.join(", ") + "\n";
              if (state.material.length) out += "MATERIALS: " + state.material.join(", ") + "\n";
            }

            if (state.textContent) {
              out += `TEXT: "${state.textContent}"`;
              if (state.typography.length) out += ` [${state.typography.join(", ")}]`;
              out += "\n";
            }

            // Modes
            var _cgs = state.aiModel === "chatgpt-image";
            if (state.photoStyle) out += "STYLE: " + (_cgs ? (CHATGPT_STYLE_MAP[state.photoStyle] || state.photoStyle) : state.photoStyle) + "\n";
            if (state.cinemaStyle) out += "CINEMATOGRAPHY: " + (_cgs ? (CHATGPT_STYLE_MAP[state.cinemaStyle] || state.cinemaStyle) : state.cinemaStyle) + "\n";
            if (state.directorStyle) out += "DIRECTOR: " + (_cgs ? (CHATGPT_STYLE_MAP[state.directorStyle] || state.directorStyle) : state.directorStyle) + "\n";
            if (state.artStyle && window.ART_STYLES_MAP && window.ART_STYLES_MAP[state.artStyle]) out += "ART STYLE: " + window.ART_STYLES_MAP[state.artStyle] + "\n";
            if (state.quickStyle && QUICK_STYLES[state.quickStyle]) out += "STYLE PRESET: " + QUICK_STYLES[state.quickStyle] + "\n";
            if (state.fashionFoodStyle && FASHION_FOOD_STYLES[state.fashionFoodStyle]) out += "FASHION/FOOD STYLE: " + FASHION_FOOD_STYLES[state.fashionFoodStyle] + "\n";
            // FIX: Cinematic Preset
            if (state.cinematicPreset && window.CINEMATIC_PRESETS_MAP && window.CINEMATIC_PRESETS_MAP[state.cinematicPreset]) out += "CINEMATIC STYLE: " + window.CINEMATIC_PRESETS_MAP[state.cinematicPreset] + "\n";
            // FIX: Film Stock (was missing from structured format)
            if (state.filmStock && FILM_STOCKS[state.filmStock]) out += "FILM STOCK: " + FILM_STOCKS[state.filmStock] + "\n";
            // FIX: Audio layers
            if (state.ambience && typeof AMBIENCE !== 'undefined' && AMBIENCE[state.ambience]) out += "AMBIENCE: " + AMBIENCE[state.ambience] + "\n";
            if (state.foley && typeof FOLEY !== 'undefined' && FOLEY[state.foley]) out += "FOLEY: " + FOLEY[state.foley] + "\n";
            if (state.cinematicFx && typeof CINE_FX !== 'undefined' && CINE_FX[state.cinematicFx]) out += "CINEMATIC FX: " + CINE_FX[state.cinematicFx] + "\n";
            const modes = [];
            if (state.generateFourMode) modes.push("Generate 4 Variations");
            if (state.beforeAfter) modes.push("before/after");
            if (state.seamlessPattern) modes.push("seamless pattern");
            if (modes.length) out += "MODES: " + modes.join(", ") + "\n";
            if (state.seed) out += "SEED: " + state.seed + "\n";
            // Engine-specific params
            if (state.aiModel === "stable-diffusion") {
              out += `CFG: ${state.sdCfg} | Steps: ${state.sdSteps}\n`;
            }
            if (state.aiModel === "flux") {
              out += `Model: flux-${state.fluxModel} | Guidance: ${state.fluxGuidance} | Steps: ${state.fluxSteps}\n`;
            }
            if (state.aiModel === "dall-e-3") {
              out += `Style: ${state.dalleStyle} | Quality: ${state.dalleQuality}\n`;
            }

            // References
            if (state.referenceImages.length) {
              out += "\n--- REFERENCES ---\n";
              out += `Images: ${state.referenceImages.length}, Weight: ${state.referenceWeight}%`;
              if (state.referenceType) out += `, Type: ${state.referenceType}`;
              out += "\n";
              state.referenceImages.forEach((img, i) => {
                if ((img.description || "").trim()) out += `  #${i + 1}: ${img.description.trim()}\n`;
              });
            }

            return out.trim() || "Select parameters on the left...";
          }

          // =============================================
          // BUILD PROMPT ‚Äî MIDJOURNEY V7
          // =============================================
          function buildMidjourneyPrompt() {
            // MJ V7 best practice: natural language scene description, no quality spam
            // Structure: [scene/subject], [style cues], [technical], --params
            const desc = [];

            // Core scene
            if (state.mainSubject) desc.push(state.mainSubject.trim());
            if (state.emotion && EMOTIONS[state.emotion]) desc.push(EMOTIONS[state.emotion]);

            // Format/style (only if NOT photorealistic ‚Äî MJ defaults to photo)
            if (state.format && state.format !== "photorealistic") desc.push(state.format);

            if (state.medium) desc.push(state.medium); // NEW

            // Camera cues (MJ understands camera language well)
            if (state.cameraBody) {
              // Strip "shot on " prefix for cleaner MJ syntax
              desc.push(state.cameraBody.replace(/^shot on\s*/i, ""));
            }
            if (state.lens) desc.push(state.lens);
            if (state.shotSize) desc.push(state.shotSize); // NEW
            if (state.focalLength) desc.push(state.focalLength);
            if (state.aperture) {
              // Extract just f-number for MJ
              const fMatch = state.aperture.match(/f\/[\d.]+/);
              if (fMatch) desc.push(fMatch[0]);
            }
            if (state.filmStock && FILM_STOCKS[state.filmStock]) desc.push(FILM_STOCKS[state.filmStock]);
            if (state.angle) desc.push(state.angle);
            if (state.composition) desc.push(state.composition);

            // Lighting ‚Äî combine primary + accent naturally
            if (state.lightType.primary) desc.push(state.lightType.primary);
            if (state.lightType.accent) desc.push(state.lightType.accent);
            if (state.timeOfDay.primary) desc.push(state.timeOfDay.primary);
            if (state.timeOfDay.accent) desc.push(state.timeOfDay.accent);

            // Light FX (MJ handles these well)
            state.lightFX.forEach(fx => desc.push(fx));
            if (state.colorPalette) desc.push(state.colorPalette);
            if (state.mood) desc.push("Mood: " + state.mood); // FIX: consistent "Mood: " prefix across all formats

            // Materials & textures (compact)
            state.skinDetail.forEach(s => desc.push(s));
            state.hairDetail.forEach(h => desc.push(h));
            state.material.forEach(m => desc.push(m));

            // Text in image
            if (state.textContent) desc.push(`"${state.textContent}"`);
            state.typography.forEach(t => desc.push(t));

            // Artistic styles
            if (state.photoStyle) desc.push(state.photoStyle);
            if (state.cinemaStyle) desc.push(state.cinemaStyle);
            if (state.directorStyle) desc.push(state.directorStyle);
            if (state.artStyle && window.ART_STYLES_MAP && window.ART_STYLES_MAP[state.artStyle]) desc.push(window.ART_STYLES_MAP[state.artStyle]);
            if (state.quickStyle && QUICK_STYLES[state.quickStyle]) desc.push(QUICK_STYLES[state.quickStyle]);
            if (state.fashionFoodStyle && FASHION_FOOD_STYLES[state.fashionFoodStyle]) desc.push(FASHION_FOOD_STYLES[state.fashionFoodStyle]);

            // FIX: Cinematic Preset
            if (state.cinematicPreset && window.CINEMATIC_PRESETS_MAP && window.CINEMATIC_PRESETS_MAP[state.cinematicPreset]) desc.push(window.CINEMATIC_PRESETS_MAP[state.cinematicPreset]);

            // FIX: Audio (for video-gen models)
            if (state.ambience && typeof AMBIENCE !== 'undefined' && AMBIENCE[state.ambience]) desc.push(AMBIENCE[state.ambience]);
            if (state.foley && typeof FOLEY !== 'undefined' && FOLEY[state.foley]) desc.push(FOLEY[state.foley]);
            if (state.cinematicFx && typeof CINE_FX !== 'undefined' && CINE_FX[state.cinematicFx]) desc.push(CINE_FX[state.cinematicFx]);

            // Purpose as style hint
            if (state.purpose && state.purpose !== "Photography") desc.push(state.purpose);

            // Special modes
            if (state.beforeAfter) desc.push("before and after comparison");
            if (state.seamlessPattern) desc.push("seamless pattern");

            // Build prompt ‚Äî comma separated, clean
            let prompt = desc.filter(Boolean).join(", ");
            // Clean: remove double commas, trim
            prompt = prompt.replace(/,\s*,/g, ",").replace(/,\s*$/, "").trim();

            // === MJ PARAMETERS ===
            const params = [];

            // AR
            if (state.aspectRatio) params.push(`--ar ${state.aspectRatio}`);

            // Quality
            if (state.quality && state.quality.includes("8k")) params.push("--q 1");

            // Stylize
            params.push(`--s ${state.mjStylize}`);

            // Chaos
            if (state.mjChaos > 0) params.push(`--chaos ${state.mjChaos}`);

            // Weird
            if (state.mjWeird > 0) params.push(`--weird ${state.mjWeird}`);

            // Style raw
            if (state.mjStyle === "raw") params.push("--style raw");

            // Version
            params.push(`--v ${state.mjVersion}`);

            // Tile for seamless
            if (state.seamlessPattern) params.push("--tile");

            // Seed
            if (state.seed) params.push("--seed " + state.seed);

            if (params.length) prompt += " " + params.join(" ");

            // FIX: Removed image URL appending as per user request (Manual Upload workflow)

            return prompt.trim() || "Select parameters on the left...";
          }

          // =============================================
          // BUILD JSON
          // =============================================
          function buildJson() {
            return {
              schema: "vpe-prompt-builder-v2",
              model: state.aiModel || null,
              subject: state.mainSubject || "",
              prompt_flat: buildFlatPrompt(),
              prompt_midjourney: state.aiModel === "midjourney" ? buildMidjourneyPrompt() : undefined,
              technical: {
                aspect_ratio: state.aspectRatio || null,
                resolution: state.resolution || null
              },
              parameters: {
                purpose: state.purpose || null,
                format: state.format || null,
                medium: state.medium || null, // NEW
                mood: state.mood || null, // NEW
                camera: {
                  body: state.cameraBody || null,
                  lens: state.lens || null,
                  shot_size: state.shotSize || null, // NEW
                  focal_length: state.focalLength || null,
                  aperture: state.aperture || null,
                  angle: state.angle || null,
                  composition: state.composition || null
                },
                lighting: {
                  type: { primary: state.lightType.primary || null, accent: state.lightType.accent || null },
                  time: { primary: state.timeOfDay.primary || null, accent: state.timeOfDay.accent || null },
                  effects: state.lightFX,
                  palette: state.colorPalette || null
                },
                materials: { skin: state.skinDetail, hair: state.hairDetail, objects: state.material },
                text: state.textContent ? { content: state.textContent, style: state.typography } : null,
                quality: state.quality || null,
                photo_style: state.photoStyle || null,
                cinema_style: state.cinemaStyle || null,
                director_style: state.directorStyle || null,
                art_style: state.artStyle || null,
                film_stock: state.filmStock || null,
                quick_style: state.quickStyle || null,
                fashion_food_style: state.fashionFoodStyle || null,
                emotion: state.emotion || null,
                cinematic_preset: state.cinematicPreset || null,
                audio: {
                  ambience: state.ambience || null,
                  foley: state.foley || null,
                  cinematic_fx: state.cinematicFx || null
                }
              },
              modes: { generateFour: state.generateFourMode, grid3x3: state.grid3x3Mode, maxConsistency: state.maxConsistency, before_after: state.beforeAfter, seamless_pattern: state.seamlessPattern },
              renderBoost: { skin: state.skinRenderBoost, hair: state.hairRenderBoost },
              seed: state.seed || null,
              engine_params: (function () {
                const m = state.aiModel;
                if (m === "midjourney") return { version: state.mjVersion, style: state.mjStyle || "default", stylize: state.mjStylize, chaos: state.mjChaos, weird: state.mjWeird };
                if (m === "stable-diffusion") return { cfg_scale: state.sdCfg, steps: state.sdSteps };
                if (m === "flux") return { model: "flux-" + state.fluxModel, guidance: state.fluxGuidance, steps: state.fluxSteps };
                if (m === "dall-e-3") return { style: state.dalleStyle, quality: state.dalleQuality };
                return null;
              })(),
              references: {
                type: (state.referenceType || null),
                weight: state.referenceWeight,
                images: state.referenceImages.map((img, i) => ({
                  name: img.name, size: img.size, description: img.description || "", extract: img.extract || [],
                  role: state.aiModel === "midjourney" ? (i === 0 ? "omni-reference" : "style-reference") : undefined
                }))
              },
              negative: (state.negativePrompt || "").trim() || ""
            };
          }

          // =============================================
          // ACTIVE TAGS
          // =============================================
          function updateActiveTags() {
            const area = $("activeTags");
            area.innerHTML = "";

            const addTag = (label, value, type, onRemove) => {
              const tag = document.createElement("span");
              tag.className = `tag-item ${type || ""}`.trim();
              tag.innerHTML = `<span>${esc(label)}: <b>${esc(value)}</b></span><span class="remove">√ó</span>`;
              tag.querySelector(".remove").addEventListener("click", onRemove);
              area.appendChild(tag);
            };

            // Singles
            // Singles
            ["aiModel", "cameraBody", "aspectRatio", "resolution", "purpose", "format", "medium", "lens", "shotSize", "focalLength", "aperture", "angle", "composition", "quality", "colorPalette", "mood", "referenceType", "photoStyle", "cinemaStyle", "directorStyle", "artStyle", "filmStock", "quickStyle", "fashionFoodStyle", "emotion", "cinematicPreset", "ambience", "foley", "cinematicFx"].forEach(k => {
              if (state[k]) {
                addTag(k, state[k], "", () => {
                  state[k] = "";
                  syncGroup(k);
                  if (k === "aspectRatio") { state.resolution = ""; rebuildResolution(); syncGroup("resolution"); }
                  if (k === "aiModel") updateModelHint();
                  updateAll();
                });
              }
            });

            // PA
            ["lightType", "timeOfDay"].forEach(k => {
              const v = state[k] || { primary: "", accent: "" };
              if (v.primary) addTag(k, v.primary, "primary", () => { state[k].primary = ""; syncPAUI(k); updateAll(); });
              if (v.accent) addTag(k, v.accent, "accent", () => { state[k].accent = ""; syncPAUI(k); updateAll(); });
            });

            // Multi
            ["lightFX", "skinDetail", "hairDetail", "material", "typography"].forEach(k => {
              (state[k] || []).forEach(val => {
                addTag(k, val, "", () => { state[k] = state[k].filter(x => x !== val); syncGroup(k); updateAll(); });
              });
            });

            // Modes
            if (state.generateFourMode) addTag("mode", "Generate 4", "", () => { $("generateFourMode").checked = false; state.generateFourMode = false; updateAll(); });
            if (state.grid3x3Mode) addTag("mode", "3√ó3 Contact Sheet", "", () => { $("grid3x3Mode").checked = false; state.grid3x3Mode = false; updateAll(); });
            if (state.maxConsistency) addTag("mode", "üîí Consistency", "", () => { $("maxConsistency").checked = false; state.maxConsistency = false; updateAll(); });
            // Engine params tags
            if (state.aiModel === "midjourney") {
              if (state.mjStyle === "raw") addTag("engine", "--style raw", "", () => { state.mjStyle = ""; syncGroup("mjStyle"); updateAll(); });
              if (state.mjChaos > 0) addTag("engine", "--chaos " + state.mjChaos, "");
              if (state.mjWeird > 0) addTag("engine", "--weird " + state.mjWeird, "");
            }
            if (state.aiModel === "dall-e-3") {
              addTag("engine", state.dalleStyle, "");
              addTag("engine", state.dalleQuality, "");
            }
            if (state.skinRenderBoost) addTag("render", "Skin Boost", "", () => { $("skinRenderBoost").checked = false; state.skinRenderBoost = false; updateAll(); });
            if (state.hairRenderBoost) addTag("render", "Hair Boost", "", () => { $("hairRenderBoost").checked = false; state.hairRenderBoost = false; updateAll(); });
            if (state.beforeAfter) addTag("mode", "before/after", "", () => { $("beforeAfter").checked = false; state.beforeAfter = false; updateAll(); });
            if (state.seamlessPattern) addTag("mode", "seamless", "", () => { $("seamlessPattern").checked = false; state.seamlessPattern = false; updateAll(); });
            if (state.seed) addTag("seed", "seed: " + state.seed, "", () => { $("seedInput").value = ""; state.seed = ""; updateAll(); });

            if (state.referenceImages.length) {
              addTag("refs", `${state.referenceImages.length} image(s)`, "", () => {
                state.referenceImages = []; $("referenceImages").value = "";
                $("imagePreviewContainer").style.display = "none";
                $("referenceOptions").style.display = "none";
                $("referenceWeight").style.display = "none";
                updateAll();
              });
            }

            // FIX: Hide Active Tags section if empty
            const tagSection = area.closest(".section");
            if (tagSection) {
              tagSection.style.display = area.children.length === 0 ? "none" : "block";
            }
          }

          // =============================================
          // COUNT PARAMS
          // =============================================
          function countParams() {
            let c = 0;
            ["aiModel", "cameraBody", "aspectRatio", "resolution", "purpose", "format", "medium", "lens", "shotSize", "focalLength", "aperture", "angle", "composition", "quality", "referenceType", "photoStyle", "cinemaStyle", "directorStyle", "artStyle", "filmStock", "quickStyle", "fashionFoodStyle", "emotion", "mood", "cinematicPreset", "ambience", "foley", "cinematicFx"].forEach(k => { if (state[k]) c++; });
            ["lightFX", "skinDetail", "hairDetail", "material", "typography"].forEach(k => { if ((state[k] || []).length) c++; });
            if (state.colorPalette) c++;
            if (state.lightType.primary) c++;
            if (state.lightType.accent) c++;
            if (state.timeOfDay.primary) c++;
            if (state.timeOfDay.accent) c++;
            if ((state.mainSubject || "").trim()) c++;
            if ((state.textContent || "").trim()) c++;
            if ((state.negativePrompt || "").trim()) c++;
            if (state.generateFourMode) c++;
            if (state.grid3x3Mode) c++;
            if (state.maxConsistency) c++;
            if (state.skinRenderBoost) c++;
            if (state.hairRenderBoost) c++;
            if (state.mjStyle) c++;
            if (state.dalleStyle) c++;
            if (state.dalleQuality) c++;
            if (state.fluxModel) c++;
            if (state.beforeAfter) c++;
            if (state.seamlessPattern) c++;
            if (state.seed) c++;
            if (state.referenceImages.length) c++;
            return c;
          }

          // =============================================
          // UPDATE ALL
          // =============================================

          // =============================================
          // NEGATIVE ‚Äî always appended at the very end
          // =============================================
          function appendNegativeLast(text) {
            const negRaw = (state.negativePrompt || "").trim();
            if (!negRaw) return text;

            // Midjourney syntax: always last
            if (state.promptFormat === "midjourney" || state.aiModel === "midjourney") {
              const noWords = negRaw.replace(/,\s*/g, ", ");
              return (text.trim() + " --no " + noWords).trim();
            }

            if (state.promptFormat === "structured") {
              return (text.trim() + "\n\nNEGATIVE: " + negRaw).trim();
            }

            return (text.trim() + "\n\nNegative prompt: " + negRaw).trim();
          }

          // =============================================
          // BUILD G4 PROMPT ‚Äî NANO BANANA PRO
          // =============================================
          function buildG4ForNBP(basePromptText) {
            // ---- –°–æ–±–∏—Ä–∞–µ–º base_scene –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ state ----
            const cam = [state.cameraBody, state.lens, state.aperture].filter(Boolean).join(", ");

            const lightParts = [];
            if (state.lightType.primary) lightParts.push(state.lightType.primary + " as key light");
            if (state.lightType.accent) lightParts.push(state.lightType.accent + " as accent");
            if (state.timeOfDay.primary) lightParts.push(state.timeOfDay.primary);
            state.lightFX.forEach(fx => lightParts.push(fx));
            const lighting = lightParts.join(", ") || "natural lighting";

            const colorParts = [];
            if (state.colorPalette) colorParts.push(state.colorPalette);
            if (state.filmStock && FILM_STOCKS[state.filmStock]) colorParts.push(FILM_STOCKS[state.filmStock]);
            const color = colorParts.join(". ") || "";

            const skinParts = state.skinDetail.length ? state.skinDetail.join(", ") : "";
            const styleParts = [state.photoStyle, state.cinemaStyle, state.directorStyle, (state.artStyle && window.ART_STYLES_MAP ? window.ART_STYLES_MAP[state.artStyle] : "")].filter(Boolean).join(", ");

            let stylePreset = "";
            if (state.quickStyle && QUICK_STYLES[state.quickStyle]) stylePreset = QUICK_STYLES[state.quickStyle];
            if (state.fashionFoodStyle && FASHION_FOOD_STYLES[state.fashionFoodStyle]) stylePreset = FASHION_FOOD_STYLES[state.fashionFoodStyle];

            const ar = state.aspectRatio || "16:9";
            const res = state.resolution || "4K";
            const subject = state.mainSubject || "the subject";
            const emotion = state.emotion && EMOTIONS[state.emotion] ? EMOTIONS[state.emotion] : "";

            // ---- Negative: –≤—Å—Ç—Ä–æ–µ–Ω –≤ base_scene, –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–º –±–ª–æ–∫–æ–º ----
            const neg = state.negativePrompt
              ? state.negativePrompt
              : "No blurred faces, no plastic skin, no extra fingers";

            // ---- –§–æ—Ä–º–∏—Ä—É–µ–º JSON-–æ–±—ä–µ–∫—Ç ----
            const g4 = {
              task: "GENERATE_SCENE_VARIATIONS",
              instruction: "STRICT REQUIREMENT: Generate 4 SEPARATE, INDIVIDUAL images. Do NOT create a grid or collage. Execute the image generation tool 4 separate times.",
              identity_lock: state.maxConsistency
                ? "The subject's face, bone structure, skin tone, and all physical features MUST remain 100% identical across all 4 images. The uploaded reference photo is the absolute source of facial identity. Zero deviation."
                : "Maintain consistent character appearance across all variations.",
              base_scene: {
                subject: subject,
                emotion: emotion || null,
                camera: cam || null,
                lighting: lighting,
                color: color || null,
                skin: skinParts || null,
                style: styleParts || null,
                style_preset: stylePreset || null,
                negative: neg
              },
              global_settings: {
                aspect_ratio: ar,
                resolution: res,
                consistency: "Maintain identical character, wardrobe, accessories. Only camera angle, framing, and environment change."
              },
              variations: [
                {
                  id: 1,
                  shot_type: "Low angle",
                  angle: "Camera low, looking up at subject from the right",
                  framing: "Medium-full body, subject powerful against sky",
                  direction: "Emphasize industrial architecture above." + (cam ? " " + cam + "." : ""),
                  environment_note: "Add new environmental details not in base scene."
                },
                {
                  id: 2,
                  shot_type: "Cowboy shot",
                  angle: "Eye level, facing subject",
                  framing: "Mid-thigh up",
                  direction: "Subject walks toward camera. Shallow depth of field. Compression feel.",
                  environment_note: "Add new environmental details not in base scene."
                },
                {
                  id: 3,
                  shot_type: "Dutch angle",
                  angle: "Tilted 15¬∞, eye level",
                  framing: "Medium shot, waist up",
                  direction: "Subject mid-action ‚Äî show the next story beat. Diagonal tension.",
                  environment_note: "Add new environmental details not in base scene."
                },
                {
                  id: 4,
                  shot_type: "Three-quarter from left",
                  angle: "Behind-left of subject, looking over shoulder",
                  framing: "Three-quarter body with environment",
                  direction: "Wide angle 24mm feel. Environmental storytelling.",
                  environment_note: "Add new environmental details not in base scene."
                }
              ]
            };

            // –£–±–∏—Ä–∞–µ–º null-–ø–æ–ª—è –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã
            Object.keys(g4.base_scene).forEach(k => {
              if (!g4.base_scene[k]) delete g4.base_scene[k];
            });

            return JSON.stringify(g4, null, 2);
          }

          function buildG4FlatForNBP(basePromptText) {
            const subject = state.mainSubject || "the subject";
            const cam = [state.cameraBody, state.lens, state.focalLength, state.aperture].filter(Boolean).join(", ");
            const ar = state.aspectRatio || "16:9";
            const res = state.resolution || "4K";

            const lightParts = [];
            if (state.lightType.primary) lightParts.push(state.lightType.primary);
            if (state.lightType.accent) lightParts.push(state.lightType.accent);
            if (state.timeOfDay.primary) lightParts.push(state.timeOfDay.primary);
            state.lightFX.forEach(fx => lightParts.push(fx));
            const lighting = lightParts.join(", ") || "natural lighting";

            const colorParts = [];
            if (state.colorPalette) colorParts.push(state.colorPalette);
            if (state.filmStock && FILM_STOCKS[state.filmStock]) colorParts.push(FILM_STOCKS[state.filmStock]);
            const color = colorParts.join(". ");

            const skin = state.skinDetail.length ? state.skinDetail.join(", ") : "";
            const style = [state.photoStyle, state.cinemaStyle, state.directorStyle, (state.artStyle && window.ART_STYLES_MAP ? window.ART_STYLES_MAP[state.artStyle] : "")].filter(Boolean).join(". ");
            const neg = state.negativePrompt || "No blurred faces, no plastic skin, no extra fingers";
            const emotion = state.emotion && EMOTIONS[state.emotion] ? EMOTIONS[state.emotion] : "";

            const identity = state.maxConsistency
              ? "IDENTITY LOCK: The subject's face, bone structure, skin tone, and all physical features must remain 100% identical across all 4 images. Reference photo is the absolute source of identity.\\n\\n"
              : "";

            let flat = `GENERATE 4 SCENE VARIATIONS

You must generate 4 separate, individual images. Do NOT create a grid or collage. Execute the image generation tool 4 separate times.

${identity}BASE SCENE: ${subject}.`;

            if (emotion) flat += ` Emotion: ${emotion}.`;
            if (cam) flat += ` Photographed on ${cam}.`;
            flat += ` ${lighting}.`;
            if (color) flat += ` ${color}.`;
            if (skin) flat += ` ${skin}.`;
            if (style) flat += ` ${style}.`;
            flat += ` ${ar} aspect ratio, ${res}. ${neg}.`;

            flat += `\\nMaintain character and wardrobe across all shots.

--- VARIATION 1: LOW ANGLE ---
Low angle shot, camera looking up at the subject from the right side. Subject appears powerful against the sky.${cam ? " " + cam + "." : ""} Reframe with new environmental details.

--- VARIATION 2: COWBOY SHOT ---
Cowboy shot framing (mid-thigh up). Subject walks toward camera. Shallow depth of field. Compression feel. Reframe with new environmental details.

--- VARIATION 3: DUTCH ANGLE ---
Dutch angle, tilted 15¬∞. Subject mid-action ‚Äî show the next story beat. Dynamic diagonal tension. Reframe with new environmental details.

--- VARIATION 4: THREE-QUARTER FROM LEFT ---
Three-quarter body from the left. Subject turns, looking over shoulder. Wide angle 24mm feel, environmental storytelling. Reframe with new environmental details.`;

            return flat;
          }


          function updateAll() {
            // Sync inputs to state
            state.mainSubject = $("mainSubject").value || "";
            state.textContent = $("textContent").value || "";
            state.negativePrompt = $("negativePrompt").value || "";
            state.generateFourMode = $("generateFourMode").checked;
            // Sync engine-specific button groups
            // (mjVersion, mjStyle, dalleStyle, dalleQuality, fluxModel are synced via handleSelect)
            state.grid3x3Mode = $("grid3x3Mode").checked;
            state.maxConsistency = $("maxConsistency").checked;
            state.beforeAfter = $("beforeAfter").checked;
            state.skinRenderBoost = $("skinRenderBoost").checked;
            state.hairRenderBoost = $("hairRenderBoost").checked;
            state.seamlessPattern = $("seamlessPattern").checked;
            state.seed = $("seedInput").value || "";

            // Normalize mutually exclusive state combinations (legacy presets / stale state).
            if (state.quickStyle && state.fashionFoodStyle) {
              state.fashionFoodStyle = "";
              syncGroup("fashionFoodStyle");
            }
            if (state.generateFourMode && state.grid3x3Mode) {
              state.grid3x3Mode = false;
              $("grid3x3Mode").checked = false;
            }
            if (state.beforeAfter && state.seamlessPattern) {
              state.seamlessPattern = false;
              $("seamlessPattern").checked = false;
            }
            if (state.cinematicPreset) {
              state.cinematicPreset = "";
              syncGroup("cinematicPreset");
            }

            // Sync PA UI
            syncPAUI("lightType");
            syncPAUI("timeOfDay");

            // === Update engine-specific panels ===
            updateRefUI();
            updateGenParamsUI();

            // Auto-switch prompt format when Midjourney selected
            if (state.aiModel === "midjourney" && state.promptFormat !== "midjourney") {
              setPromptFormat("midjourney");
            }
            // Return to flat format when Midjourney is deselected
            if (state.aiModel !== "midjourney" && state.promptFormat === "midjourney") {
              setPromptFormat("flat");
            }

            // === Generate 4 Mode: disable lens section ===
            // === Generate 4 Mode: lens stays enabled (G4 variations use camera params) ===
            // FIX: Only remove disabled-section if 3x3 is not also active
            if (state.generateFourMode && !state.grid3x3Mode) {
              $("lensSectionV2").classList.remove("disabled-section");
            } else if (!state.grid3x3Mode) {
              $("lensSectionV2").classList.remove("disabled-section");
            }

            // === 3x3 Mode: disable lens, aperture, angle, composition (overridden by contact sheet) ===
            if (state.grid3x3Mode) {
              $("lensSectionV2").classList.add("disabled-section");
            }

            // === CONFLICT DISABLING SYSTEM ===
            applyConflictRules();

            // Resolution
            rebuildResolution();

            // Tags
            updateActiveTags();

            // Build prompt based on format
            let promptText;
            if (state.promptFormat === "midjourney") promptText = buildMidjourneyPrompt();
            else if (state.promptFormat === "structured") promptText = buildStructuredPrompt();
            else promptText = buildFlatPrompt();

            // === RENDER BOOST CONFIGS ‚Äî append after main prompt ===
            if (state.skinRenderBoost) {
              promptText += "\n\n" + SKIN_RENDER_CONFIG;
            }
            if (state.hairRenderBoost) {
              promptText += "\n\n" + HAIR_RENDER_CONFIG;
            }

            // === SPECIAL MODE WRAPPING ===

            // Max Consistency ‚Äî prepend identity lock protocol (most effective at the very start)
            if (state.maxConsistency) {
              promptText = MAX_CONSISTENCY_PREFIX + "\n" + promptText;
              // FIX: --cw 100 is a Midjourney-only parameter
              if (state.aiModel === "midjourney") {
                promptText = promptText.trimEnd() + " --cw 100";
              }
            }

            // 3x3 Contact Sheet ‚Äî prepend the block to the beginning of the prompt
            if (state.grid3x3Mode) {
              promptText = GRID_3X3_PREFIX + promptText;
            }

            // Generate 4 ‚Äî dynamic block based on selected model
            if (state.generateFourMode) {
              const isNBP = ["nano-banana-pro", "nano-banana", "gemini-imagen"].includes(state.aiModel);

              if (isNBP) {
                // NBP: –≤—ã–±–∏—Ä–∞–µ–º —Ñ–æ—Ä–º–∞—Ç ‚Äî JSON –µ—Å–ª–∏ structured, flat –µ—Å–ª–∏ flat
                if (state.promptFormat === "structured") {
                  promptText = buildG4ForNBP(promptText);
                } else {
                  promptText = buildG4FlatForNBP(promptText);
                  // –í flat-—Ä–µ–∂–∏–º–µ base prompt —É–∂–µ –≤–Ω—É—Ç—Ä–∏ G4 –±–ª–æ–∫–∞, –Ω–µ –¥—É–±–ª–∏—Ä—É–µ–º
                }
              } else {
                // Standard Legacy Logic for other models
                let g4block = GENERATE_FOUR_PREFIX;
                if (state.mainSubject && state.mainSubject.trim()) {
                  g4block = g4block.replace(/of a subject/g, "of " + state.mainSubject.trim());
                  g4block = g4block.replace(/the Subject/g, state.mainSubject.trim());
                }
                // Reference AR Logic (Legacy)
                if (state.referenceImages.length && state.referenceImages[0].width && state.referenceImages[0].height) {
                  const w = state.referenceImages[0].width;
                  const h = state.referenceImages[0].height;
                  const ratio = w / h;
                  const standardARs = [
                    { label: "1:1", val: 1 }, { label: "16:9", val: 16 / 9 }, { label: "21:9", val: 21 / 9 }, { label: "2:3", val: 2 / 3 }, { label: "9:16", val: 9 / 16 }
                  ];
                  let closest = standardARs[0];
                  let minDiff = Math.abs(ratio - closest.val);
                  for (const ar of standardARs) {
                    const diff = Math.abs(ratio - ar.val);
                    if (diff < minDiff) { minDiff = diff; closest = ar; }
                  }
                  const refAR = closest.label;
                  if (refAR !== "21:9") {
                    g4block = g4block.replace(/"aspect_ratio": "21:9"/g, '"aspect_ratio": "' + refAR + '"');
                    g4block = g4block.replace(/in a 21:9 format/g, "in a " + refAR + " format");
                  }
                }
                promptText = g4block + "\n\n" + promptText;
              }
            }

            // Ensure NEGATIVE block is always the very last part of the final prompt (Skip for NBP G4)
            const isNBPG4 = state.generateFourMode && ["nano-banana-pro", "nano-banana", "gemini-imagen"].includes(state.aiModel);
            if (!isNBPG4) {
              promptText = appendNegativeLast(promptText);
            }

            const outBox = $("promptOutput");
            outBox.textContent = promptText;
            outBox.classList.toggle("empty", promptText.includes("Select parameters"));

            // Stats
            $("charCount").textContent = String(promptText.length);
            $("wordCount").textContent = String(wordCount(promptText));
            $("paramCount").textContent = String(countParams());

            // JSON
            $("jsonOutput").textContent = JSON.stringify(buildJson(), null, 2);

            // Check conflicts
            checkConflicts();
          }

          // =============================================
          // CONFLICT RULES ‚Äî disables incompatible buttons
          // =============================================
          function applyConflictRules() {
            // Reset all conflict-disabled buttons first
            document.querySelectorAll(".option-btn.conflict-disabled").forEach(b => {
              b.disabled = false;
              b.classList.remove("conflict-disabled");
              b.title = "";
            });

            // Reset disabled-section overlay from previous Quick Style evaluation
            document.querySelectorAll(".left-panel > .section.disabled-section").forEach(sec => {
              sec.classList.remove("disabled-section");
            });

            // Lock Quick Style if Standard Preset is active
            if (state.isStandardPresetActive) {
              const qs = $("quickStyleSection");
              if (qs) qs.classList.add("disabled-section");
            }

            // Helper: disable all buttons in a group
            function disableGroup(group, reason) {
              document.querySelectorAll(`[data-group="${group}"]`).forEach(b => {
                if (!b.classList.contains("active")) {
                  b.disabled = true;
                  b.classList.add("conflict-disabled");
                  b.title = reason;
                }
              });
            }

            // Helper: disable specific buttons by value substring match
            function disableByValue(group, valuePart, reason) {
              document.querySelectorAll(`[data-group="${group}"]`).forEach(b => {
                const v = b.dataset.value || "";
                if (v.toLowerCase().includes(valuePart.toLowerCase()) && !b.classList.contains("active")) {
                  b.disabled = true;
                  b.classList.add("conflict-disabled");
                  b.title = reason;
                }
              });
            }

            // Helper: disable specific buttons by exact value
            function disableExact(group, value, reason) {
              document.querySelectorAll(`[data-group="${group}"]`).forEach(b => {
                if (b.dataset.value === value && !b.classList.contains("active")) {
                  b.disabled = true;
                  b.classList.add("conflict-disabled");
                  b.title = reason;
                }
              });
            }

            // Helper: disable/enable a toggle checkbox
            function disableToggle(id, reason) {
              const cb = $(id);
              if (cb && !cb.checked) {
                cb.disabled = true;
                const lbl = cb.closest(".toggle-label");
                if (lbl) { lbl.title = reason; lbl.style.opacity = "0.4"; }
              }
            }
            function enableToggle(id) {
              const cb = $(id);
              if (cb) {
                cb.disabled = false;
                const lbl = cb.closest(".toggle-label");
                if (lbl) { lbl.title = ""; lbl.style.opacity = ""; }
              }
            }

            const fmt = state.format;
            const purpose = state.purpose;
            const isArtistic = ["oil painting", "pencil sketch", "pixel art", "watercolor", "anime style", "vector illustration"].includes(fmt);
            const isAbstract = ["Logo Design", "UI Design", "Infographic"].includes(purpose);

            // =========================================
            // RULE 0a: Generate 4 ‚Üî 3x3 ‚Äî mutual exclusion
            // =========================================
            if (state.generateFourMode) {
              disableToggle("grid3x3Mode", "–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å Generate 4");
            } else {
              enableToggle("grid3x3Mode");
            }
            if (state.grid3x3Mode) {
              disableToggle("generateFourMode", "–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å 3√ó3 Contact Sheet");
            } else {
              if (!state.grid3x3Mode) enableToggle("generateFourMode");
            }

            // =========================================
            // RULE 0b: 3x3 Contact Sheet ‚Üí disable lens, aperture, angle, composition
            // (the contact sheet defines its own 9 shot types, camera, and aperture)
            // =========================================
            if (state.grid3x3Mode) {
              const reason3x3 = "–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ 3√ó3 Contact Sheet";
              disableGroup("lens", reason3x3);
              disableGroup("aperture", reason3x3);
              disableGroup("angle", reason3x3);
              disableGroup("composition", reason3x3);
            }

            // =========================================
            // RULE 0c: Generate 4 ‚Üí disable lens (already handled by disabled-section on lensSectionV2)
            // Also disable angle and composition since variations define their own shots
            // =========================================
            if (state.generateFourMode) {
              const reasonG4 = "–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ Generate 4 Variations";
              disableGroup("angle", reasonG4);
              disableGroup("composition", reasonG4);
            }

            // =========================================
            // RULE 0d: Generate 4 / 3x3 ‚Üî beforeAfter, seamlessPattern ‚Äî mutually exclusive with grid modes
            // =========================================
            if (state.generateFourMode || state.grid3x3Mode) {
              disableToggle("beforeAfter", "–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å —Ä–µ–∂–∏–º–æ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏");
              disableToggle("seamlessPattern", "–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å —Ä–µ–∂–∏–º–æ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏");
            }

            // RULE 1: Artistic format ‚Üí camera body, lens, aperture non-selectable
            if (isArtistic) {
              const reason = `–§–æ—Ä–º–∞—Ç ¬´${fmt}¬ª –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞–º–µ—Ä—É/–æ–ø—Ç–∏–∫—É`;
              disableGroup("cameraBody", reason);
              disableGroup("lens", reason);
              disableGroup("aperture", reason);
            }

            // RULE 1b: TimeOfDay ‚Äî conflicting combinations
            // Night cannot be combined with midday/golden hour
            const nightValues = ["night, artificial lighting"];
            const dayValues = ["bright midday sun", "golden hour warm sunlight", "overcast diffused light"];
            if (state.timeOfDay.primary) {
              const isPrimNight = nightValues.some(v => state.timeOfDay.primary.includes(v));
              const isPrimDay = dayValues.some(v => state.timeOfDay.primary.includes(v));
              document.querySelectorAll('[data-group="timeOfDay"]').forEach(b => {
                if (b.classList.contains("active")) return;
                const val = b.dataset.value || "";
                const isNight = nightValues.some(v => val.includes(v));
                const isDay = dayValues.some(v => val.includes(v));
                if ((isPrimNight && isDay) || (isPrimDay && isNight)) {
                  b.disabled = true;
                  b.classList.add("conflict-disabled");
                  b.title = isPrimNight ? "–ù–æ—á—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å –¥–Ω–µ–≤–Ω—ã–º —Å–≤–µ—Ç–æ–º" : "–î–Ω–µ–≤–Ω–æ–π —Å–≤–µ—Ç –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –Ω–æ—á—å—é";
                }
              });
            }

            // RULE 2: Pixel art / anime ‚Üí skin detail & hair detail non-selectable
            if (fmt === "pixel art" || fmt === "anime style") {
              const reason = `–§–æ—Ä–º–∞—Ç ¬´${fmt}¬ª –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–æ—Ç–æ-–¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é`;
              disableGroup("skinDetail", reason);
              disableGroup("hairDetail", reason);
              // Also disable render boost checkboxes
              disableToggle("skinRenderBoost", reason);
              disableToggle("hairRenderBoost", reason);
            } else {
              if (!isAbstract) { enableToggle("skinRenderBoost"); enableToggle("hairRenderBoost"); }
            }

            // RULE 3: Logo / UI / Infographic ‚Üí skin, hair, aperture, styles non-selectable
            if (isAbstract) {
              const reason = `–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ ¬´${purpose}¬ª –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç—Ä–µ—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏`;
              disableGroup("skinDetail", reason);
              disableGroup("hairDetail", reason);
              disableToggle("skinRenderBoost", reason);
              disableToggle("hairRenderBoost", reason);
              disableGroup("photoStyle", reason);
              disableGroup("cinemaStyle", reason);
              disableGroup("directorStyle", reason);
              disableGroup("aperture", reason);
            }

            // RULE 4: Macro lens + wide compositions
            if (state.lens && (state.lens.includes("Macro") || state.lens.includes("105mm"))) {
              disableByValue("composition", "wide shot", "–ú–∞–∫—Ä–æ-–æ–±—ä–µ–∫—Ç–∏–≤ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å —à–∏—Ä–æ–∫–∏–º –ø–ª–∞–Ω–æ–º");
              disableByValue("composition", "extreme wide", "–ú–∞–∫—Ä–æ-–æ–±—ä–µ–∫—Ç–∏–≤ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –¥–∞–ª—å–Ω–∏–º –ø–ª–∞–Ω–æ–º");
            }

            // RULE 5: Ultra-wide lens + extreme close-up
            if (state.lens && (state.lens.includes("14mm") || state.lens.includes("14-24mm") || state.lens.includes("15-35mm"))) {
              disableByValue("composition", "extreme close-up", "–£–ª—å—Ç—Ä–∞-—à–∏—Ä–æ–∫–∏–π –æ–±—ä–µ–∫—Ç–∏–≤ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å —ç–∫—Å—Ç—Ä. –∫—Ä—É–ø–Ω—ã–º –ø–ª–∞–Ω–æ–º");
            }

            // RULE 6: Flat lay ‚Üí only top-down angles
            if (state.composition && state.composition.includes("flat lay")) {
              const reason = "Flat Lay ‚Äî —Ç–æ–ª—å–∫–æ –≤–∏–¥ —Å–≤–µ—Ä—Ö—É";
              ["extreme low angle", "low angle shot", "slightly low angle", "eye level", "dutch angle", "over-the-shoulder", "POV first person"].forEach(v => {
                disableByValue("angle", v, reason);
              });
            }

            // RULE 7: Drone ‚Üí disable studio lighting
            if (state.angle && state.angle.includes("drone")) {
              disableByValue("lightType", "studio three-point", "–°—Ç—É–¥–∏–π–Ω—ã–π —Å–≤–µ—Ç –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –¥—Ä–æ–Ω-—Å—ä—ë–º–∫–æ–π");
              disableByValue("lightType", "softbox", "Softbox –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –¥—Ä–æ–Ω-—Å—ä—ë–º–∫–æ–π");
              disableByValue("lightType", "clamshell", "Clamshell –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –¥—Ä–æ–Ω-—Å—ä—ë–º–∫–æ–π");
              disableByValue("lightType", "butterfly", "Butterfly –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –¥—Ä–æ–Ω-—Å—ä—ë–º–∫–æ–π");
              disableByValue("lightType", "Rembrandt", "–†–µ–º–±—Ä–∞–Ω–¥—Ç –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –¥—Ä–æ–Ω-—Å—ä—ë–º–∫–æ–π");
              disableByValue("lightType", "split lighting", "–°–ø–ª–∏—Ç –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –¥—Ä–æ–Ω-—Å—ä—ë–º–∫–æ–π");
              disableByValue("lightType", "broad lighting", "Broad light –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –¥—Ä–æ–Ω-—Å—ä—ë–º–∫–æ–π");
            }

            // RULE 8: Studio lighting ‚Üí disable drone
            if (state.lightType.primary && (
              state.lightType.primary.includes("studio") || state.lightType.primary.includes("softbox") ||
              state.lightType.primary.includes("clamshell") || state.lightType.primary.includes("butterfly") ||
              state.lightType.primary.includes("Rembrandt") || state.lightType.primary.includes("split") ||
              state.lightType.primary.includes("broad")
            )) {
              disableByValue("angle", "drone", "–î—Ä–æ–Ω –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å–æ —Å—Ç—É–¥–∏–π–Ω—ã–º —Å–≤–µ—Ç–æ–º");
            }

            // RULE 9: B&W style ‚Üí disable neon
            if (state.photoStyle && state.photoStyle.includes("black and white")) {
              disableByValue("lightType", "neon", "–ù–µ–æ–Ω –Ω–µ –≤–∏–¥–µ–Ω –≤ —á/–± —Å—Ç–∏–ª–µ");
            }

            // RULE 10: Neon ‚Üí disable B&W styles
            if ((state.lightType.primary && state.lightType.primary.includes("neon")) ||
              (state.lightType.accent && state.lightType.accent.includes("neon"))) {
              document.querySelectorAll(`[data-group="photoStyle"]`).forEach(b => {
                if ((b.dataset.value || "").includes("black and white") && !b.classList.contains("active")) {
                  b.disabled = true;
                  b.classList.add("conflict-disabled");
                  b.title = "–ß/–± —Å—Ç–∏–ª—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –Ω–µ–æ–Ω–æ–≤—ã–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º";
                }
              });
            }

            // RULE 11: beforeAfter ‚Üî seamlessPattern ‚Äî mutual exclusion
            if (state.beforeAfter) {
              disableToggle("seamlessPattern", "–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å Before/After");
            } else if (!state.generateFourMode && !state.grid3x3Mode) {
              enableToggle("seamlessPattern");
            }
            if (state.seamlessPattern) {
              disableToggle("beforeAfter", "–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å Seamless Pattern");
            } else if (!state.generateFourMode && !state.grid3x3Mode) {
              enableToggle("beforeAfter");
            }

            // RULE 12: f/1.2 ‚Üí disable extreme wide
            if (state.aperture && state.aperture.includes("f/1.2")) {
              disableByValue("composition", "extreme wide shot", "f/1.2 –Ω–µ—Ç–∏–ø–∏—á–Ω–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–≥–æ –ø–ª–∞–Ω–∞ (–Ω—É–∂–Ω–∞ f/8+)");
            }

            // RULE 13: Extreme wide ‚Üí disable f/1.2
            if (state.composition && state.composition.includes("extreme wide shot")) {
              disableByValue("aperture", "f/1.2", "–î–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω –Ω–µ—Ç–∏–ø–∏—á–µ–Ω —Å f/1.2 (–Ω—É–∂–Ω–∞ f/8+)");
            }

            // RULE 14: Anamorphic ‚Üí only cinema/advertising
            if (state.lens && state.lens.includes("Anamorphic")) {
              document.querySelectorAll(`[data-group="purpose"]`).forEach(b => {
                const v = b.dataset.value || "";
                if (!["Cinematic Still", "Advertising campaign"].includes(v) && !b.classList.contains("active")) {
                  b.disabled = true;
                  b.classList.add("conflict-disabled");
                  b.title = "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫–∏–Ω–æ/—Ä–µ–∫–ª–∞–º–µ";
                }
              });
            }

            // RULE 15: Character Sheet + seamless pattern
            if (state.purpose === "Character Sheet") {
              disableToggle("seamlessPattern", "Seamless –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å Character Sheet");
            }

            // RULE 16: One author style per category, BUT allow known collaborations
            // Known director-cinematographer pairs that worked together:
            const COLLABS = {
              // Director ‚Üí array of compatible cinematographer value substrings
              "Denis Villeneuve": ["Roger Deakins", "Greig Fraser"],
              "Christopher Nolan": ["Hoyte van Hoytema"],
              "Quentin Tarantino": ["Robert Richardson"],
              "Ridley Scott": ["Vittorio Storaro"],
              "David Fincher": ["Roger Deakins"],   // The Killer (2023)
              "Greta Gerwig": ["Linus Sandgren"],   // FIX: Barbie (2023)
              "Jordan Peele": ["Hoyte van Hoytema"], // FIX: Nope (2022)
              "Chloe Zhao": ["Bradford Young"],      // FIX: Approximate ‚Äî both naturalistic styles
            };
            // Photo style always conflicts with cinema/director (different domains)
            if (state.photoStyle) {
              disableGroup("cinemaStyle", "–°—Ç–∏–ª—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å—Ç–∏–ª–µ–π");
              disableGroup("directorStyle", "–°—Ç–∏–ª—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å—Ç–∏–ª–µ–π");
            }

            // Cinema + Director: allow if they are a known collaboration pair
            if (state.cinemaStyle && state.directorStyle) {
              // Both selected ‚Äî check if compatible
              let isCollab = false;
              for (const [dir, cins] of Object.entries(COLLABS)) {
                if (state.directorStyle.includes(dir) && cins.some(c => state.cinemaStyle.includes(c))) {
                  isCollab = true; break;
                }
              }
              if (!isCollab) {
                // Not a known pair ‚Äî just show warning but don't disable (they're already selected)
              }
            } else if (state.cinemaStyle) {
              // Cinema selected, allow only compatible directors
              disableGroup("photoStyle", "–°—Ç–∏–ª—å –∫–∏–Ω–æ–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å—Ç–∏–ª–µ–π");
              document.querySelectorAll('[data-group="directorStyle"]').forEach(b => {
                if (b.classList.contains("active")) return;
                const val = b.dataset.value || "";
                let compatible = false;
                for (const [dir, cins] of Object.entries(COLLABS)) {
                  if (val.includes(dir) && cins.some(c => state.cinemaStyle.includes(c))) {
                    compatible = true; break;
                  }
                }
                if (!compatible) {
                  b.disabled = true;
                  b.classList.add("conflict-disabled");
                  b.title = "–ù–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö —Ä–∞–±–æ—Ç —Å —ç—Ç–∏–º –∫–∏–Ω–æ–æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º";
                }
              });
            } else if (state.directorStyle) {
              // Director selected, allow only compatible cinematographers
              disableGroup("photoStyle", "–°—Ç–∏–ª—å —Ä–µ–∂–∏—Å—Å—ë—Ä–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å—Ç–∏–ª–µ–π");
              document.querySelectorAll('[data-group="cinemaStyle"]').forEach(b => {
                if (b.classList.contains("active")) return;
                const val = b.dataset.value || "";
                let compatible = false;
                for (const [dir, cins] of Object.entries(COLLABS)) {
                  if (state.directorStyle.includes(dir) && cins.some(c => val.includes(c))) {
                    compatible = true; break;
                  }
                }
                if (!compatible) {
                  b.disabled = true;
                  b.classList.add("conflict-disabled");
                  b.title = "–ù–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö —Ä–∞–±–æ—Ç —Å —ç—Ç–∏–º —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–º";
                }
              });
            }

            // RULE 18: Quick Style ‚Äî BLANKET DISABLE
            // Quick Style presets define complete visual language (camera, lens, lighting, color, texture).
            // When ANY preset is selected, ALL menus are disabled except: Aspect Ratio, Resolution, AI Model, and Quick Style itself.
            if (state.quickStyle) {
              const reason = "–°—Ç–∏–ª–µ–≤–æ–π –ø—Ä–µ—Å–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –°–Ω–∏–º–∏—Ç–µ –ø—Ä–µ—Å–µ—Ç –¥–ª—è —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.";

              // Disable ALL parameter groups except aspectRatio, resolution, aiModel, quickStyle
              const blanketDisableGroups = [
                "purpose", "format", "medium", "quality", "cameraBody", "lens", "focalLength", "shotSize", "aperture",
                "angle", "composition", "lightType", "timeOfDay", "lightFX",
                "colorPalette", "mood", "skinDetail", "hairDetail", "material",
                "photoStyle", "cinemaStyle", "directorStyle", "artStyle", "filmStock", "typography",
                "referenceType", "emotion"
              ];
              blanketDisableGroups.forEach(g => disableGroup(g, reason));

              // Disable all toggle checkboxes
              disableToggle("skinRenderBoost", reason);
              disableToggle("hairRenderBoost", reason);
              // disableToggle("generateFourMode", reason);
              // disableToggle("grid3x3Mode", reason);
              // disableToggle("maxConsistency", reason);
              // disableToggle("beforeAfter", reason);
              // disableToggle("seamlessPattern", reason);

              // Allow Fashion/Food style to coexist? No, Quick Style overrides everything.
              disableGroup("fashionFoodStyle", reason);

              // Visually disable all sections except quickStyle and aspectRatio
              document.querySelectorAll(".left-panel > .section").forEach(sec => {
                const id = sec.id || "";
                // Keep quickStyleSection and aspectRatioSection enabled
                if (id === "quickStyleSection" || id === "aspectRatioSection" || id === "generationModeSection") return;
                // Keep AI Model section enabled (needed to switch output format)
                if (sec.querySelector('[data-group="aiModel"]')) return;
                // Keep Scene Description enabled (user still needs to describe the subject)
                if (sec.querySelector('#mainSubject')) return;
                sec.classList.add("disabled-section");
              });
            }
            if (state.photoStyle || state.cinemaStyle || state.directorStyle || state.artStyle) {
              disableGroup("quickStyle", "–ê–≤—Ç–æ—Ä—Å–∫–∏–π —Å—Ç–∏–ª—å —É–∂–µ –≤—ã–±—Ä–∞–Ω ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å–æ —Å—Ç–∏–ª–µ–≤—ã–º –ø—Ä–µ—Å–µ—Ç–æ–º");
            }

            if (state.fashionFoodStyle) {
              const reason = "Fashion/Food —Å—Ç–∏–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.";
              const blanketDisableGroups = [
                "purpose", "format", "medium", "quality", "cameraBody", "lens", "focalLength", "shotSize", "aperture",
                "angle", "composition", "lightType", "timeOfDay", "lightFX",
                "colorPalette", "mood", "skinDetail", "hairDetail", "material",
                "photoStyle", "cinemaStyle", "directorStyle", "artStyle", "filmStock", "typography",
                "referenceType", "emotion", "quickStyle" // Disable Quick Style too
              ];
              blanketDisableGroups.forEach(g => disableGroup(g, reason));
              disableToggle("skinRenderBoost", reason);
              disableToggle("hairRenderBoost", reason);

              // Visually disable all sections except fashion/food presets and aspectRatio
              document.querySelectorAll(".left-panel > .section").forEach(sec => {
                const id = sec.id || "";
                if (id === "fashionFoodSection" || id === "foodCommercialSection" || id === "aspectRatioSection" || id === "generationModeSection") return;
                if (sec.querySelector('[data-group="aiModel"]')) return;
                if (sec.querySelector('#mainSubject')) return;
                sec.classList.add("disabled-section");
              });
            }

            // RULE 17: Seamless pattern ‚Üí only flat lay composition
            if (state.seamlessPattern) {
              document.querySelectorAll(`[data-group="composition"]`).forEach(b => {
                const v = b.dataset.value || "";
                if (!v.includes("flat lay") && !b.classList.contains("active")) {
                  b.disabled = true;
                  b.classList.add("conflict-disabled");
                  b.title = "–ë–µ—Å—à–æ–≤–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å Flat Lay";
                }
              });
            }
          }

          // =============================================
          // PRESETS
          // =============================================
          function applyPreset(index) {
            state.isStandardPresetActive = true;
            const p = presets[index];
            if (!p) return;
            const v = deepClone(p.values);
            if (window.expandRelatedSections) window.expandRelatedSections(v);

            // Reset all selectable state
            ["aiModel", "cameraBody", "aspectRatio", "resolution", "purpose", "format", "medium", "lens", "focalLength", "shotSize", "aperture", "angle", "composition", "quality", "colorPalette", "mood", "referenceType", "photoStyle", "cinemaStyle", "directorStyle", "artStyle", "filmStock", "quickStyle", "fashionFoodStyle", "emotion", "cinematicPreset", "ambience", "foley", "cinematicFx"].forEach(k => state[k] = "");
            state.lightType = { primary: "", accent: "" };
            state.timeOfDay = { primary: "", accent: "" };
            state.lightFX = []; state.colorPalette = ""; state.skinDetail = []; state.hairDetail = []; state.material = []; state.typography = [];

            // Apply from preset
            Object.entries(v).forEach(([k, val]) => {
              if (k === "lightType" || k === "timeOfDay") {
                state[k] = val && typeof val === "object" ? val : { primary: "", accent: "" };
                return;
              }
              if (!groupConfig[k]) return;
              const mode = groupConfig[k].mode;
              if (mode === "single") state[k] = val || "";
              if (mode === "multi") state[k] = Array.isArray(val) ? val : [];
            });

            // Backward compatibility: legacy presets stored shot-size in `composition`.
            if (!state.shotSize && state.composition) {
              const c = state.composition.toLowerCase();
              if (
                c.includes("close-up") ||
                c.includes("head and shoulders") ||
                c.includes("waist up") ||
                c.includes("full body") ||
                c.includes("extreme wide") ||
                c.includes("wide shot") ||
                c.includes("flat lay") ||
                c.includes("silhouette")
              ) {
                state.shotSize = state.composition;
              }
            }

            // Validate AR exists in buttons
            if (state.aspectRatio && !resolutionMap[state.aspectRatio]) {
              state.aspectRatio = ""; state.resolution = "";
              notify("AR –∏–∑ –ø—Ä–µ—Å–µ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–±—Ä–æ—à–µ–Ω", "warn");
            } else {
              state.resolution = "";
            }

            // Sync all UI buttons
            Object.keys(groupConfig).forEach(syncGroup);
            updateModelHint();
            rebuildResolution();
            updateAll();
            notify("–ü—Ä–µ—Å–µ—Ç ¬´" + p.name.replace(/[^\w\s–∞-—è—ë–ê-–Ø–Å]/gi, "").trim() + "¬ª –ø—Ä–∏–º–µ–Ω—ë–Ω");
          }

          // =============================================
          // ACTIONS
          // =============================================
          // Reference extract handling
          const REF_EXTRACT_OPTIONS = ["–õ–∏—Ü–æ", "–ü–∞–ª–∏—Ç—Ä—É", "–ü–æ–∑—É", "–°—Ç–∏–ª—å", "–¢–µ–∫—Å—Ç—É—Ä—É"];

          // Conflict checking
          function checkConflicts() {
            const warnings = [];
            const isArtistic = ["oil painting", "pencil sketch", "pixel art", "watercolor", "anime style", "vector illustration"].includes(state.format);
            // photoStyle + cinemaStyle + directorStyle + artStyle simultaneously
            const styleCount = [state.photoStyle, state.cinemaStyle, state.directorStyle, state.artStyle].filter(Boolean).length;
            if (state.quickStyle && styleCount > 0) warnings.push("–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∏–ª–µ–≤–æ–π –ø—Ä–µ—Å–µ—Ç + –∞–≤—Ç–æ—Ä—Å–∫–∏–π —Å—Ç–∏–ª—å ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Å—Ç–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ –æ–¥–Ω–æ.");
            if (state.quickStyle && state.fashionFoodStyle) warnings.push("–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–±—Ä–∞–Ω—ã ¬´–ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–µ—Å–µ—Ç—ã¬ª –∏ ¬´Fashion/Food¬ª ‚Äî –æ—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–µ–∂–∏–º.");
            if (state.quickStyle && (state.cameraBody || state.lens)) warnings.push("–°—Ç–∏–ª–µ–≤–æ–π –ø—Ä–µ—Å–µ—Ç —É–∂–µ –∑–∞–¥–∞—ë—Ç –∫–∞–º–µ—Ä—É/–æ–ø—Ç–∏–∫—É ‚Äî –≤–∞—à –≤—ã–±–æ—Ä –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å.");
            if (styleCount > 1) warnings.push("–í—ã–±—Ä–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä—Å–∫–∏—Ö —Å—Ç–∏–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Å—Ç–∞–≤–∏—Ç—å –æ–¥–∏–Ω.");
            // Negative prompt with DALL-E/Flux
            if ((state.negativePrompt || "").trim() && (state.aiModel === "dall-e-3" || state.aiModel === "flux")) warnings.push("DALL¬∑E 3 –∏ Flux –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã ‚Äî –æ–Ω–∏ –±—É–¥—É—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω—ã.");
            // Macro lens + wide composition
            if (state.lens && (state.lens.includes("Macro") || state.lens.includes("105mm")) && state.composition && (state.composition.includes("wide shot") || state.composition.includes("extreme wide"))) warnings.push("–ú–∞–∫—Ä–æ-–æ–±—ä–µ–∫—Ç–∏–≤ + —à–∏—Ä–æ–∫–∏–π/–¥–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω ‚Äî –Ω–µ—Ç–∏–ø–∏—á–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è.");
            // Ultra-wide + close-up
            if (state.lens && (state.lens.includes("14mm") || state.lens.includes("14-24mm") || state.lens.includes("15-35mm")) && state.composition && state.composition.includes("extreme close-up")) warnings.push("–£–ª—å—Ç—Ä–∞-—à–∏—Ä–æ–∫–∏–π –æ–±—ä–µ–∫—Ç–∏–≤ + —ç–∫—Å—Ç—Ä. –∫—Ä—É–ø–Ω—ã–π –ø–ª–∞–Ω ‚Äî –≤–æ–∑–º–æ–∂–Ω—ã —Å–∏–ª—å–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è.");
            // Anamorphic without cinema purpose
            if (state.lens && state.lens.includes("Anamorphic") && state.purpose && !["Cinematic Still", "Advertising campaign"].includes(state.purpose)) warnings.push("–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω–∞—è –æ–ø—Ç–∏–∫–∞ –Ω–µ—Ç–∏–ø–∏—á–Ω–∞ –¥–ª—è ¬´" + state.purpose + "¬ª.");
            // B&W photographer style + neon lighting
            if (state.photoStyle && state.photoStyle.includes("black and white") && ((state.lightType.primary && state.lightType.primary.includes("neon")) || (state.lightType.accent && state.lightType.accent.includes("neon")))) warnings.push("–ß/–± —Å—Ç–∏–ª—å + –Ω–µ–æ–Ω–æ–≤–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ ‚Äî –Ω–µ–æ–Ω –Ω–µ –≤–∏–¥–µ–Ω –≤ —á/–±.");
            // Text in MJ/SD
            if ((state.textContent || "").trim() && (state.aiModel === "midjourney" || state.aiModel === "stable-diffusion")) warnings.push("Midjourney –∏ Stable Diffusion –ø–ª–æ—Ö–æ —Ä–µ–Ω–¥–µ—Ä—è—Ç —Ç–µ–∫—Å—Ç. –î–ª—è —Ç–µ–∫—Å—Ç–∞ –ª—É—á—à–µ Ideogram –∏–ª–∏ DALL¬∑E 3.");
            // Artistic format + camera/lens
            if (["oil painting", "pencil sketch", "pixel art", "watercolor", "anime style", "vector illustration"].includes(state.format) && (state.cameraBody || state.lens)) warnings.push(`–§–æ—Ä–º–∞—Ç ¬´${state.format}¬ª + –∫–∞–º–µ—Ä–∞/–æ–±—ä–µ–∫—Ç–∏–≤ ‚Äî –Ω–µ—Ç–∏–ø–∏—á–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è.`);
            // Pixel art + skin/hair detail
            if ((state.format === "pixel art" || state.format === "anime style") && (state.skinDetail.length || state.hairDetail.length)) warnings.push(`–§–æ—Ä–º–∞—Ç ¬´${state.format}¬ª + —Ñ–æ—Ç–æ-–¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–∂–∏/–≤–æ–ª–æ—Å ‚Äî –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ.`);
            // Abstract purpose + portrait settings
            if (["Logo Design", "UI Design", "Infographic"].includes(state.purpose) && (state.skinDetail.length || state.hairDetail.length || state.photoStyle)) warnings.push(`–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ ¬´${state.purpose}¬ª + –ø–æ—Ä—Ç—Ä–µ—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äî –Ω–µ—Ç–∏–ø–∏—á–Ω–æ.`);
            // Flat lay + wrong angle
            if (state.composition && state.composition.includes("flat lay") && state.angle && !state.angle.includes("drone") && !state.angle.includes("high angle") && !state.angle.includes("slightly high")) warnings.push("Flat Lay –æ–±—ã—á–Ω–æ —Å–Ω–∏–º–∞–µ—Ç—Å—è —Å–≤–µ—Ä—Ö—É ‚Äî —Ç–µ–∫—É—â–∏–π —É–≥–æ–ª –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º.");
            // Drone + studio light
            if (state.angle && state.angle.includes("drone") && state.lightType.primary && (state.lightType.primary.includes("studio") || state.lightType.primary.includes("softbox") || state.lightType.primary.includes("clamshell"))) warnings.push("–î—Ä–æ–Ω + —Å—Ç—É–¥–∏–π–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ ‚Äî –Ω–µ—Ç–∏–ø–∏—á–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è.");
            // Night + day conflict
            const todP = state.timeOfDay.primary || "";
            const todA = state.timeOfDay.accent || "";
            const hasNight = todP.includes("night") || todA.includes("night");
            const hasDay = todP.includes("midday") || todA.includes("midday") || todP.includes("golden") || todA.includes("golden") || todP.includes("overcast") || todA.includes("overcast");
            if (hasNight && hasDay) warnings.push("–ù–æ—á—å + –¥–Ω–µ–≤–Ω–æ–π —Å–≤–µ—Ç ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è.");
            // f/1.2 + extreme wide
            if (state.aperture && state.aperture.includes("f/1.2") && state.composition && state.composition.includes("extreme wide")) warnings.push("f/1.2 + –¥–∞–ª—å–Ω–∏–π –ø–ª–∞–Ω ‚Äî –Ω–µ—Ç–∏–ø–∏—á–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è (–æ–±—ã—á–Ω–æ f/8-f/16).");
            // beforeAfter + seamlessPattern
            if (state.beforeAfter && state.seamlessPattern) warnings.push("Before/After + Seamless Pattern ‚Äî –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ —Ä–µ–∂–∏–º—ã.");
            // Generate4 + 3x3
            if (state.generateFourMode && state.grid3x3Mode) warnings.push("Generate 4 + 3√ó3 Contact Sheet ‚Äî –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ —Ä–µ–∂–∏–º—ã.");
            // Skin/Hair boost with non-portrait formats
            if (state.skinRenderBoost && isArtistic) warnings.push("–£—Å–∏–ª–µ–Ω–Ω–∞—è –ø—Ä–æ—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–∂–∏ –Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å —Ñ–æ—Ä–º–∞—Ç–æ–º ¬´" + state.format + "¬ª.");
            if (state.hairRenderBoost && isArtistic) warnings.push("–£—Å–∏–ª–µ–Ω–Ω–∞—è –ø—Ä–æ—Ä–∏—Å–æ–≤–∫–∞ –≤–æ–ª–æ—Å –Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å —Ñ–æ—Ä–º–∞—Ç–æ–º ¬´" + state.format + "¬ª.");
            // Consistency without reference images
            if (state.maxConsistency && !state.referenceImages.length) warnings.push("üîí –ú–∞–∫—Å. –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ –≤—Å–µ–≥–æ —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏.");
            // 3x3 + custom lens/angle/composition (if somehow still set)
            if (state.grid3x3Mode && (state.lens || state.angle || state.composition || state.aperture)) warnings.push("3√ó3 Contact Sheet –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç–∏–≤, —É–≥–æ–ª, –ø–ª–∞–Ω –∏ –¥–∏–∞—Ñ—Ä–∞–≥–º—É ‚Äî –≤–∞—à –≤—ã–±–æ—Ä –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω.");
            // Generate4/3x3 + beforeAfter/seamless
            if ((state.generateFourMode || state.grid3x3Mode) && (state.beforeAfter || state.seamlessPattern)) warnings.push("–†–µ–∂–∏–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å Before/After –∏ Seamless Pattern.");

            const box = $("conflictWarnings");
            if (warnings.length) { box.style.display = "block"; box.innerHTML = "‚ö†Ô∏è <b>–í–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã:</b><br>" + warnings.map(w => "‚Ä¢ " + w).join("<br>") }
            else box.style.display = "none";
          }

          // FIX: safeCopy with visual feedback and fallback
          function safeCopy(text, label, btn) {
            const originalText = btn ? btn.innerHTML : "";
            const success = () => {
              notify(label + " —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω");
              if (btn) {
                btn.innerHTML = "‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!";
                setTimeout(() => btn.innerHTML = originalText, 2000);
              }
            };

            if (navigator.clipboard && window.isSecureContext) {
              navigator.clipboard.writeText(text).then(success).catch(function () {
                fallbackCopy(text, label, btn, success);
              });
            } else {
              fallbackCopy(text, label, btn, success);
            }
          }

          // FIX: Robust fallback copy
          function fallbackCopy(text, label, btn, onSuccess) {
            var ta = document.createElement("textarea");
            ta.value = text;
            ta.style.position = "fixed";
            ta.style.left = "-9999px";
            ta.style.top = "0"; // avoid scrolling to bottom
            document.body.appendChild(ta);
            ta.focus();
            ta.select();
            try {
              document.execCommand("copy");
              if (onSuccess) onSuccess();
              else notify(label + " —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω");
            } catch (e) {
              notify("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è", "err");
            }
            document.body.removeChild(ta);
          }

          function copyPrompt() {
            var text = $("promptOutput").textContent || "";
            if (!text.trim() || text.indexOf("Select parameters") >= 0 || text.indexOf("–í—ã–±–µ—Ä–∏—Ç–µ") >= 0) {
              notify("–°–Ω–∞—á–∞–ª–∞ —Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–º–ø—Ç", "warn"); return;
            }
            safeCopy(text, "–ü—Ä–æ–º–ø—Ç", this);
          }

          function copyJson() {
            try {
              var jsonData = buildJson();
              var text = JSON.stringify(jsonData, null, 2);
              if (!text || text === "{}" || text === "null") { notify("JSON –ø—É—Å—Ç", "warn"); return; }
              safeCopy(text, "JSON", this);
            } catch (e) {
              notify("–û—à–∏–±–∫–∞ JSON: " + e.message, "err");
            }
          }

          window.updatePrompt = updatePrompt; // Expose for verification
          function updatePrompt() {
            const flat = buildFlatPrompt();
            $("promptOutput").textContent = flat;
            $("jsonOutput").textContent = JSON.stringify(buildJson(), null, 2);
            checkConflicts();
          }

          function savePrompt() {
            const text = $("promptOutput").textContent || "";
            if (!text.trim() || text.includes("Select parameters") || text.includes("–í—ã–±–µ—Ä–∏—Ç–µ")) { notify("–ù–µ—á–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å", "warn"); return; }
            const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url; a.download = "vpe-prompt-" + Date.now() + ".txt"; a.click();
            URL.revokeObjectURL(url);
            notify("–§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—ë–Ω");
          }

          function resetAll() {
            // Reset state
            ["aiModel", "cameraBody", "aspectRatio", "resolution", "purpose", "format", "medium", "lens", "focalLength", "shotSize", "aperture", "angle", "composition", "quality", "colorPalette", "mood", "referenceType", "photoStyle", "cinemaStyle", "directorStyle", "artStyle", "filmStock", "quickStyle", "fashionFoodStyle", "mainSubject", "textContent", "negativePrompt", "emotion", "cinematicPreset", "ambience", "foley", "cinematicFx"].forEach(k => state[k] = "");
            state.lightType = { primary: "", accent: "" };
            state.timeOfDay = { primary: "", accent: "" };
            state.lightFX = []; state.colorPalette = ""; state.skinDetail = []; state.hairDetail = []; state.material = []; state.typography = [];
            state.generateFourMode = false; state.grid3x3Mode = false; state.maxConsistency = false; state.beforeAfter = false; state.seamlessPattern = false; state.seed = "";
            state.mjVersion = "7"; state.mjStyle = ""; state.mjStylize = 250; state.mjChaos = 0; state.mjWeird = 0;
            state.sdCfg = 7; state.sdSteps = 25;
            state.fluxModel = "dev"; state.fluxGuidance = 3.5; state.fluxSteps = 28;
            state.dalleStyle = "vivid"; state.dalleQuality = "hd";
            state.skinRenderBoost = false; state.hairRenderBoost = false;
            state.referenceImages = []; state.referenceWeight = 50;
            state.promptFormat = "flat";
            state.isStandardPresetActive = false;

            // Reset inputs
            $("mainSubject").value = "";
            $("textContent").value = "";
            $("negativePrompt").value = "";
            $("generateFourMode").checked = false;
            $("grid3x3Mode").checked = false;
            $("maxConsistency").checked = false;
            $("skinRenderBoost").checked = false;
            $("hairRenderBoost").checked = false;
            $("lensSectionV2").classList.remove("disabled-section");
            $("beforeAfter").checked = false;
            $("beforeAfter").disabled = false;
            $("seamlessPattern").checked = false;
            $("seamlessPattern").disabled = false;
            $("generateFourMode").disabled = false;
            $("grid3x3Mode").disabled = false;
            $("maxConsistency").disabled = false;
            $("skinRenderBoost").disabled = false;
            $("hairRenderBoost").disabled = false;
            $("seedInput").value = "";
            // Reset engine param sliders
            $("mjStylizeSlider").value = 250; $("mjStylizeVal").textContent = "250";
            $("mjChaosSlider").value = 0; $("mjChaosVal").textContent = "0";
            $("mjWeirdSlider").value = 0; $("mjWeirdVal").textContent = "0";
            $("sdCfgSlider").value = 7; $("sdCfgVal").textContent = "7";
            $("sdStepsSlider").value = 25; $("sdStepsVal").textContent = "25";
            $("fluxGuidanceSlider").value = 3.5; $("fluxGuidanceVal").textContent = "3.5";
            $("fluxStepsSlider").value = 28; $("fluxStepsVal").textContent = "28";
            $("referenceImages").value = "";
            $("refWeightSlider").value = 50;
            $("weightValue").textContent = "50";

            // FIX: Reset all range sliders explicitly
            document.querySelectorAll('input[type="range"]').forEach(slider => {
              const def = slider.getAttribute('value') || slider.getAttribute('data-default') || slider.min || 0;
              slider.value = def;
              // Try to update sibling display if exists (usually id + "Val")
              const disp = document.getElementById(slider.id.replace("Slider", "Val"));
              if (disp) disp.textContent = def;
            });

            $("imagePreviewContainer").style.display = "none";
            $("referenceOptions").style.display = "none";
            $("referenceWeight").style.display = "none";
            $("imagePreviews").innerHTML = "";
            $("modelHint").style.display = "none";

            // Clear UI ‚Äî buttons, conflict states, toggle labels
            document.querySelectorAll(".option-btn[data-group]").forEach(b => {
              b.classList.remove("active", "conflict-disabled");
              b.disabled = false;
              b.title = "";
              b.querySelectorAll(".slot-tag").forEach(t => t.remove());
            });
            document.querySelectorAll(".toggle-label").forEach(l => {
              l.classList.remove("checked");
              l.style.opacity = "";
              l.title = "";
            });
            // FIX: Also reset disabled-section on all left-panel sections
            document.querySelectorAll(".left-panel > .section.disabled-section").forEach(sec => {
              sec.classList.remove("disabled-section");
            });

            $("resolutionInfo").style.display = "block";
            $("resolutionOptions").style.display = "none";
            $("resolutionOptions").innerHTML = "";

            updateAll();
            notify("–í—Å—ë —Å–±—Ä–æ—à–µ–Ω–æ");
          }

          // =============================================
          // AI ENHANCE LOGIC
          // =============================================

          async function enhancePrompt() {
            const ta = document.getElementById('mainSubject');
            const text = ta.value.trim();
            if (!text) { ta.placeholder = '–°–Ω–∞—á–∞–ª–∞ –≤–≤–µ–¥–∏—Ç–µ –∏–¥–µ—é...'; return; }

            const btn = document.getElementById('enhanceBtn');
            const originalContent = btn.innerHTML;
            btn.classList.add('loading');
            btn.innerHTML = '<span>‚è≥</span> –£–ª—É—á—à–∞—é...';
            btn.disabled = true;

            try {
              let improvedText = "";
              // System prompt construction
              const currentModel = state.aiModel || "General";
              const systemPrompt = `You are a professional video prompt engineer.
Expand this scene description into a detailed visual prompt.
Structure: [Subject/Character details] + [Environment/Location] + [Lighting/Atmosphere] + [Action/Pose].
Keep it concise but vivid (under 150 words). Write ONLY the improved prompt.
Target Model: ${currentModel}
Original idea: "${text}"`;

              // Always use Groq with embedded key for simplicity
              const keyToUse = "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";
              improvedText = await callGroq(systemPrompt, keyToUse);

              if (improvedText) {
                ta.value = improvedText.trim();
                // trigger simple input event to update counts if existing
                if (window.handleInput) window.handleInput();
                notify("–ü—Ä–æ–º–ø—Ç —É–ª—É—á—à–µ–Ω");
              }
            } catch (e) {
              console.error(e);
              alert("AI Error: " + e.message);
            }

            btn.classList.remove('loading');
            btn.innerHTML = originalContent;
            btn.disabled = false;
          }

          async function callGemini(prompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${state.apiKey}`;
            const response = await fetch(url, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                contents: [{ parts: [{ text: prompt }] }]
              })
            });
            const data = await response.json();
            if (data.error) throw new Error(data.error.message);
            return data.candidates?.[0]?.content?.parts?.[0]?.text || "";
          }

          async function callGroq(prompt, key) {
            const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
              method: 'POST',
              headers: {
                'Authorization': `Bearer ${key}`,
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                model: "llama-3.3-70b-versatile",
                messages: [{ role: "user", content: prompt }],
                temperature: 0.7,
                max_tokens: 1000
              })
            });
            const data = await response.json();
            if (data.error) throw new Error(data.error.message);
            return data.choices?.[0]?.message?.content || "";
          }
        </script>
        <div class="notification success" id="notification">–í—Å—ë —Å–±—Ä–æ—à–µ–Ω–æ</div>


      </div>
    </div>









    <script>
      // === COLLAPSIBLE LOGIC v3 (Strict + Quick Style Support) ===
      (function () {
        const SECTION_MAP = {
          "aiModel": "aiModelSection",
          "cameraBody": "cameraSectionV2",
          "lens": "lensSectionV2",
          "focalLength": "apertureSection",
          "shotSize": "apertureSection",
          "medium": "artStyleSectionV2",
          "aperture": "apertureSection",
          "angle": "apertureSection",
          "composition": "compositionSectionV2",
          "filmStock": "filmStockSection",
          "lighting": "lightingSectionV2",
          "timeOfDay": "lightingSectionV2",
          "lightFX": "lightingSectionV2",
          "colorPalette": "paletteSectionV2",
          "mood": "moodSectionV2",
          "skinDetail": "skinDetailSection",
          "hairDetail": "hairDetailSection",
          "material": "materialSection",
          "typography": "typographySection",
          "photoStyle": "photoStyleSection",
          "cinemaStyle": "cinemaStyleSection",
          "directorStyle": "directorStyleSection",
          "format": "formatSection",
          "purpose": "purposeSection",
          "referenceImages": "referencesSection",
          "negativePrompt": "negativeSection",
          "emotion": "emotionSection",
          "ambience": "audioSectionV2",
          "foley": "audioSectionV2",
          "cinematicFx": "audioSectionV2",
          "artStyle": "artStyleSectionV2"
        };

        function toggleSection(header, forceState = null) {
          const section = header.parentElement;
          if (!section) return;

          if (forceState !== null) {
            if (forceState === true) section.classList.remove('collapsed'); // Open
            else section.classList.add('collapsed'); // Close
          } else {
            section.classList.toggle('collapsed');
          }
        }

        function initCollapsible() {
          const sections = document.querySelectorAll('.section');

          // STRICT INITIAL STATE: 
          // Open: Quick Presets, Presets. 
          // Closed: Everything else.

          sections.forEach(sec => {
            const header = sec.querySelector('.section-header');
            if (!header) return;

            // Bind click robustly even if HTML already contains data-bound="true".
            // Some saved HTML snapshots persist this attribute and otherwise block binding.
            if (header.__vpeCollapseHandler) {
              header.removeEventListener('click', header.__vpeCollapseHandler);
            }
            header.__vpeCollapseHandler = (e) => {
              if (e.target.closest('.help-tip') || e.target.closest('.mode-badge') || e.target.closest('input') || e.target.closest('button')) return;
              toggleSection(header);
            };
            header.addEventListener('click', header.__vpeCollapseHandler);
            header.dataset.bound = "true";

            // Initial State
            // FIX: Removed jsonSection from default open list
            if (sec.id === 'quickStyleSection' || sec.id === 'presetsSection' || sec.id === 'generationModeSection' || sec.id === 'promptSection') {
              sec.classList.remove('collapsed');
            } else {
              sec.classList.add('collapsed');
            }
          });
          console.log('VPE: Strict collapsible state applied.');
        }

        // Expose: Expand related sections for PRESETS
        window.expandRelatedSections = function (presetValues) {
          // 1. Collapse all param sections (keep nav sections open)
          document.querySelectorAll('.section').forEach(sec => {
            if (sec.id === 'quickStyleSection' || sec.id === 'presetsSection' || sec.id === 'generationModeSection') return;
            sec.classList.add('collapsed');
          });

          // 2. Open Related
          const keys = Object.keys(presetValues);

          // Always open Core
          document.getElementById('aiModelSection')?.classList.remove('collapsed');
          document.getElementById('descriptionSection')?.classList.remove('collapsed');

          keys.forEach(k => {
            if (SECTION_MAP[k]) {
              const el = document.getElementById(SECTION_MAP[k]);
              if (el && presetValues[k]) el.classList.remove('collapsed');
            }
            // LightType special
            if (k === 'lightType' && (presetValues[k].primary || presetValues[k].accent)) {
              document.getElementById('lightingSection')?.classList.remove('collapsed');
            }
          });
        };

        // Expose: Expand for QUICK STYLE
        window.expandSectionsForQuickStyle = function (isActive) {
          if (!isActive) return; // If unselected, do nothing or user preference? Let's leave as is.

          // When Quick Style is Active:
          // Open: Quick Style, AI Model, Aspect Ratio, Resolution, Generation Mode.
          // Close: All artistic controls (Camera, Lighting, Styles, etc) as they are disabled/locked.

          const keepOpen = [
            'quickStyleSection',
            'aiModelSection',
            'aspectRatioSection',
            'descriptionSection',
            'generationModeSection',
            'promptSection',
            'jsonSection'
          ];

          document.querySelectorAll('.section').forEach(sec => {
            if (keepOpen.includes(sec.id)) {
              sec.classList.remove('collapsed');
            } else {
              sec.classList.add('collapsed');
            }
          });
        };

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initCollapsible);
        } else {
          initCollapsible();
        }
        window.resetAll = resetAll; // Expose for verification
        window.buildStructuredPrompt = buildStructuredPrompt; // Expose for verification

      })();
    </script>



    <script id="doc-sync-v1">
      (() => {
        if (window.__docSyncV1) return;
        window.__docSyncV1 = true;

        const CINEMATIC_PRESETS = {
          "–•–æ–ª–æ–¥–Ω—ã–π —à–ø–∏–æ–Ω—Å–∫–∏–π –Ω—É–∞—Ä": "Cold desaturated palette, green-cyan color bias, slate grey shadows, muted olive tones, soft side lighting, moody atmosphere",
          "–ù–µ–æ–Ω–æ–≤—ã–π –∫–∏–±–µ—Ä-–≥–æ—Ä–æ–¥": "Cyberpunk aesthetic, neon pink and cyan lighting, deep crushed blacks, wet street reflections, volumetric fog, teal and orange grading",
          "–ü—É—Å—Ç—ã–Ω—è —ç–ø–∏–∫ (–î—é–Ω–∞)": "Monochromatic spice sand palette, beige and muted gold, hazy atmosphere, bleached sky, overexposed highlights, epic scale",
          "–ü–∞—Å—Ç–µ–ª—å–Ω–∞—è —Å–∏–º–º–µ—Ç—Ä–∏—è": "Pastel color palette, soft pink and baby blue hues, high key lighting, flat symmetrical composition, whimsical atmosphere",
          "–ì—Ä—è–∑–Ω–∞—è –≤–æ–µ–Ω–Ω–∞—è –¥—Ä–∞–º–∞": "Bleach bypass effect, desaturated colors, high contrast, metallic grain, mud and steel tones, handheld camera vibe",
          "–ó–æ–ª–æ—Ç–æ–π –Ω—É–∞—Ä": "Warm tungsten lighting, deep mahogany shadows, rich gold and black tones, Rembrandt lighting, classic film aesthetic",
          "–ú–∞—Ç—Ä–∏—Ü–∞ (–ó–µ–ª–µ–Ω—ã–π —Ç–∏–Ω—Ç)": "Sickly green tint, digital rain atmosphere, high contrast black leather tones, fluorescent green highlights, unnatural lighting",
          "–ë–µ–∑—É–º–Ω—ã–π –ú–∞–∫—Å (Teal & Orange)": "Hyper-saturated Teal and Orange, scorched earth, vibrant blue sky contrast, rusty metal textures, high octane action"
        };

        const ART_STYLES = {
          "–§–æ—Ç–æ—Ä–µ–∞–ª–∏–∑–º": "photorealistic, ultra-detailed, sharp focus, natural skin texture, 8K resolution",
          "–ö–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–π": "cinematic film still, anamorphic lens flare, shallow DOF, color graded",
          "–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è": "digital illustration, clean vector-like linework, cel-shaded, vibrant flat colors",
          "–ú–∞—Å–ª–æ (–ö–∞—Ä—Ç–∏–Ω–∞)": "oil painting on linen canvas, visible impasto brushstrokes, layered glazing, rich pigment",
          "–ê–∫–≤–∞—Ä–µ–ª—å": "watercolor on cold-pressed paper, wet-on-wet blending, granulating pigment, white paper showing through",
          "–ê–Ω–∏–º–µ": "anime cel animation style, bold outlines, flat color fills, dramatic speed lines, large expressive eyes",
          "–ö–æ–Ω—Ü–µ–ø—Ç-–∞—Ä—Ç": "concept art, painterly digital rendering, environment design, matte painting technique, atmospheric perspective",
          "–§–ª—ç—Ç / –í–µ–∫—Ç–æ—Ä": "flat vector design, solid color fills, no gradients, geometric shapes, scalable clean edges",
          "–ö–∞—Ä–∞–Ω–¥–∞—à–Ω—ã–π —Å–∫–µ—Ç—á": "graphite pencil sketch on textured paper, cross-hatching shading, visible paper grain, HB to 6B range",
          "–ü–∏–∫—Å–µ–ª—å-–∞—Ä—Ç": "pixel art, 16-bit retro palette, dithering, anti-aliased edges, limited color count",
          "–ö–æ–º–∏–∫—Å": "comic book style, bold ink outlines, Ben-Day dot halftone shading, dynamic panel layout",
          "3D –†–µ–Ω–¥–µ—Ä (–û–∫—Ç–∞–Ω)": "3D render, Octane render engine, subsurface scattering, PBR materials, global illumination",
          "–í–∏–Ω—Ç–∞–∂ / –†–µ—Ç—Ä–æ": "vintage retro style, Kodak Portra 400 film emulation, grain, faded warm tones, light leaks",
          "–ú–∏–Ω–∏–º–∞–ª–∏–∑–º": "minimalist style, ample negative space, single focal point, muted two-tone palette, clean geometry",
          "–ò–º–ø—Ä–µ—Å—Å–∏–æ–Ω–∏–∑–º": "Impressionist painting, short visible brushstrokes, en plein air, shifting natural light, Monet-inspired palette",
          "–≠–∫—Å–ø—Ä–µ—Å—Å–∏–æ–Ω–∏–∑–º": "Expressionist style, distorted angular forms, intense saturated colors, emotional raw brushwork, Kirchner-inspired",
          "–°—é—Ä—Ä–µ–∞–ª–∏–∑–º": "surrealist painting, impossible architecture, melting forms, Dali-inspired dreamscape, juxtaposed scale",
          "–ú–æ–¥–µ—Ä–Ω (–ê—Ä-–Ω—É–≤–æ)": "Art Nouveau style, sinuous organic whiplash curves, floral motifs, Mucha-inspired decorative border",
          "–ê—Ä-–¥–µ–∫–æ": "Art Deco style, geometric chevron patterns, gold and black palette, chrome accents, 1920s glamour",
          "–ë–∞—Ä–æ–∫–∫–æ": "Baroque painting, Caravaggio-style tenebrism, rich velvet textures, dramatic chiaroscuro, gilded details",
          "–†–µ–Ω–µ—Å—Å–∞–Ω—Å": "Renaissance painting, sfumato technique, classical proportion, linear perspective, tempera-like matte finish",
          "–ü–æ–ø-–∞—Ä—Ç": "Pop Art style, Warhol-inspired screen print, bold primary colors, repeated motifs, halftone overlay",
          "–ö–∏–±–µ—Ä–ø–∞–Ω–∫": "cyberpunk style, neon-drenched rain-slicked streets, holographic HUD overlays, teal-magenta palette",
          "–°—Ç–∏–º–ø–∞–Ω–∫": "steampunk style, brass clockwork mechanisms, Victorian riveted iron, steam vents, sepia-copper palette",
          "–§—ç–Ω—Ç–µ–∑–∏": "epic fantasy art, magical particle effects, enchanted glow, mythical creatures, rich saturated palette",
          "–ì–æ—Ç–∏–∫–∞": "Gothic art style, pointed arch architecture, stained glass light, dark stone textures, blood-red accents",
          "–í–µ–π–ø–æ—Ä–≤–µ–π–≤": "vaporwave aesthetic, pastel neon pink-cyan gradient, Roman bust, VHS scanlines, retro grid floor",
          "–ò–∑–æ–º–µ—Ç—Ä–∏—è": "isometric 3D illustration, 30-degree projection, no perspective distortion, clean edges, dimetric view",
          "–õ–æ—É-–ø–æ–ª–∏": "low poly 3D art, flat-shaded triangular facets, limited polygon count, geometric minimalism",
          "–£–∫–∏—ë-—ç": "ukiyo-e woodblock print, flat perspective, bold black outlines, limited earth-tone palette, Hokusai-inspired",
          "–ë–∞—É—Ö–∞—É—Å": "Bauhaus design, primary color triad, geometric sans-serif typography, functional grid layout",
          "–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è": "abstract non-representational art, bold gestural marks, color field composition, Rothko-inspired luminous layers",
          "–ì—É–∞—à—å": "gouache painting, opaque matte pigment, flat even coverage, posterized tonal range",
          "–ü—É–∞–Ω—Ç–∏–ª–∏–∑–º": "pointillism style, composed entirely of small distinct dots, Seurat-inspired optical mixing",
          "–ö—É–±–∏–∑–º": "Cubist style, simultaneous multiple viewpoints, fragmented geometric planes, muted browns and grays",
          "–ù–µ–æ-–ù—É–∞—Ä": "neo-noir style, high-contrast side lighting, wet reflective streets, venetian blind shadows, desaturated teal",
          "–ì—Ä–∞—Ñ—Ñ–∏—Ç–∏": "graffiti street art, spray paint texture, drip marks, wildstyle lettering, concrete wall background",
          "–ú–∞–Ω–≥–∞": "manga style, screentone shading, dynamic panel composition, speed lines, detailed ink linework",
          "–ß–∏–±–∏": "chibi style, 2:1 head-to-body ratio, round simplified features, cute exaggerated expressions",
          "–î–≤–æ–π–Ω–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è": "double exposure effect, two overlapping silhouette layers, forest-inside-portrait, blended transparency",
          "–ì–ª–∏—Ç—á-–∞—Ä—Ç": "glitch art, RGB channel shift, pixel sorting artifacts, data moshing, corrupted scanlines",
          "–í–∏—Ç—Ä–∞–∂": "stained glass art, lead came divisions, backlit translucent jewel-tone panels, Gothic rose window",
          "–ë—É–º–∞–∂–Ω—ã–π –∞—Ä—Ç": "paper cut-out art, layered paper depth, cast shadows between layers, torn textured edges",
          "–ü–ª–∞—Å—Ç–∏–ª–∏–Ω (Claymation)": "claymation style, visible fingerprint clay texture, stop-motion frame, handcrafted imperfections",
          "–ß–µ—Ä—Ç–µ–∂ (Blueprint)": "technical blueprint schematic, white lines on navy background, annotation labels, cross-section view"
        };
        window.ART_STYLES_MAP = ART_STYLES;

        const MEDIUM_OPTIONS = [
          ["–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è", "photograph, DSLR capture, natural grain, accurate color reproduction"],
          ["–¶–∏—Ñ—Ä–æ–≤–æ–π –∞—Ä—Ç", "digital art, Wacom tablet rendering, smooth blending, crisp edges"],
          ["–ú–∞—Å–ª–æ –Ω–∞ —Ö–æ–ª—Å—Ç–µ", "oil on canvas, thick impasto texture, layered glazing, visible weave"],
          ["–ê–∫–≤–∞—Ä–µ–ª—å", "watercolor on Arches cold-pressed paper, wet-on-wet bleeds, pigment granulation"],
          ["–ß–µ—Ä–Ω–∏–ª—å–Ω—ã–π —Ä–∏—Å—É–Ω–æ–∫", "ink drawing on vellum, Micron pen linework, high-contrast stippling"],
          ["–£–≥–æ–ª—å", "compressed charcoal on toned paper, smudged soft gradients, gritty texture"],
          ["–ê–∫—Ä–∏–ª", "acrylic painting, quick-dry matte finish, bold opaque coverage, palette knife marks"],
          ["–ú–∏–∫—Å-–º–µ–¥–∏–∞", "mixed media collage, layered paper textures, paint splatter, found objects"],
          ["–°–∫—É–ª—å–ø—Ç—É—Ä–∞", "marble sculpture, carved chisel marks, smooth polished surface, directional studio light"],
          ["–ö–æ–ª–ª–∞–∂", "collage artwork, torn magazine cutouts, visible glue edges, overlapping layers"],
          ["–ì—É–∞—à—å", "gouache on illustration board, opaque matte finish, flat even coats"],
          ["–ü–∞—Å—Ç–µ–ª—å", "soft pastel on Mi-Teintes paper, powdery blended strokes, visible tooth texture"],
          ["–ì—Ä–∞—Ñ–∏—Ç (–ö–∞—Ä–∞–Ω–¥–∞—à)", "graphite pencil 2B‚Äì6B range, fine cross-hatching, subtle tonal gradation"],
          ["–¶–≤–µ—Ç–Ω—ã–µ –∫–∞—Ä–∞–Ω–¥–∞—à–∏", "Prismacolor colored pencil, burnished layered strokes, waxy smooth blending"],
          ["–í–æ—Å–∫–æ–≤—ã–µ –º–µ–ª–∫–∏", "wax crayon on construction paper, childlike strokes, heavy texture lines"],
          ["–°–ø—Ä–µ–π-–∞—Ä—Ç", "Montana spray paint on concrete, aerosol overspray halo, drip textures"],
          ["–§—Ä–µ—Å–∫–∞", "buon fresco on wet lime plaster, muted mineral pigments, craquelure aging"],
          ["–ú–æ–∑–∞–∏–∫–∞", "Byzantine mosaic, gold smalti tesserae, visible grout lines, fixed frontal pose"],
          ["–ì—Ä–∞–≤—é—Ä–∞ (–î–µ—Ä–µ–≤–æ)", "woodcut relief print, carved parallel lines, visible wood grain, bold black ink"],
          ["–õ–∏–Ω–æ–≥—Ä–∞–≤—é—Ä–∞", "linocut print, crisp carved edges, flat ink coverage, two-color registration"],
          ["–û—Ñ–æ—Ä—Ç", "copper plate etching, fine aquatint tones, cross-hatched shadows, acid-bitten lines"],
          ["–®–µ–ª–∫–æ–≥—Ä–∞—Ñ–∏—è", "Warhol-style screen print, layered flat CMYK inks, slight registration offset"],
          ["–≠–Ω–∫–∞—É—Å—Ç–∏–∫–∞", "encaustic painting, melted beeswax pigment, translucent layered depth, textured surface"],
          ["–¢–µ–º–ø–µ—Ä–∞", "egg tempera on wood panel, fine hatched brushwork, luminous matte glow"],
          ["–ë–∞—Ç–∏–∫", "batik wax-resist dyed fabric, crackle vein pattern, indigo and earth tones"],
          ["–í—ã—à–∏–≤–∫–∞", "embroidered textile art, visible thread stitching, satin and chain stitch detail"],
          ["–°—Ç–µ–∫–ª–æ–¥—É–≤–Ω–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ", "blown glass art, translucent organic forms, internal bubble inclusions, Murano-style"],
          ["–ë—Ä–æ–Ω–∑–æ–≤–æ–µ –ª–∏—Ç—å–µ", "lost-wax bronze cast, green verdigris patina, polished highlight ridges"]
        ];

        const MOOD_OPTIONS = [
          ["–ë–µ–∑–º—è—Ç–µ–∂–Ω–æ—Å—Ç—å", "serene peaceful atmosphere, still water reflection, soft pastel dawn sky, gentle breeze implied"],
          ["–î—Ä–∞–º–∞", "dramatic intense atmosphere, storm clouds, high-contrast lighting, emotional peak moment"],
          ["–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å", "mysterious enigmatic mood, obscured details, fog-shrouded, half-hidden subject, cool muted tones"],
          ["–†–∞–¥–æ—Å—Ç—å", "cheerful bright mood, sunlit warm palette, open airy space, golden light, joyful energy"],
          ["–ú–µ–ª–∞–Ω—Ö–æ–ª–∏—è", "melancholic contemplative mood, overcast gray sky, muted desaturated tones, solitary figure"],
          ["–≠–ø–∏—á–Ω–æ—Å—Ç—å", "epic grand scale, awe-inspiring vista, massive clouds, tiny figure for scale, orchestral energy"],
          ["–≠—Ñ–∏—Ä–Ω–æ—Å—Ç—å", "ethereal dreamy atmosphere, soft glow, light mist, delicate transparency, otherworldly luminance"],
          ["–ì—Ä–∏—Ç—Ç–∏ (–ñ–µ—Å—Ç–∫–æ—Å—Ç—å)", "gritty raw urban atmosphere, concrete textures, grain, desaturated, unflinching realism"],
          ["–†–æ–º–∞–Ω—Ç–∏–∫–∞", "romantic soft intimate mood, warm candlelight glow, shallow DOF, blush and peach tones"],
          ["–§—É—Ç—É—Ä–∏–∑–º", "futuristic sci-fi atmosphere, holographic displays, sleek reflective surfaces, cool blue accent lighting"],
          ["–ù–æ—Å—Ç–∞–ª—å–≥–∏—è", "nostalgic vintage warmth, film grain, faded color edges, memory-like soft vignette"],
          ["–£–≥—Ä–æ–∑–∞", "ominous foreboding, dark gathering clouds, deep shadows, desaturated greens, impending dread"],
          ["–ü—Ä–∏—á—É–¥–ª–∏–≤–æ—Å—Ç—å", "whimsical playful fantasy, floating elements, impossible physics, candy-colored, childlike wonder"],
          ["–ú—Ä–∞—á–Ω–æ—Å—Ç—å", "somber subdued atmosphere, heavy silence, muted monochrome, still motionless air, grief"],
          ["–≠–π—Ñ–æ—Ä–∏—è", "euphoric ecstatic energy, lens flare burst, vibrant saturated colors, dynamic motion blur"],
          ["–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ", "tense suspenseful thriller mood, tight framing, shallow DOF, desaturated with single color accent"],
          ["–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ", "tranquil undisturbed stillness, mirror-flat water, pastel predawn sky, absolute calm"],
          ["–•–∞–æ—Å", "chaotic frenzied energy, overlapping elements, motion blur, fragmented composition, overwhelm"],
          ["–ê–Ω—Ç–∏—É—Ç–æ–ø–∏—è", "dystopian post-apocalyptic, rusted metal, crumbling concrete, toxic smog, oppressive gray-green"],
          ["–£—Ç–æ–ø–∏—è", "utopian idyllic harmony, pristine nature, crystal-clear water, golden sunlight, perfect balance"],
          ["–ü—Ä–∏–∑—Ä–∞–∫", "haunting ghostly unease, translucent figure, pale desaturated, lingering mist, cold light"],
          ["–£—é—Ç (–•—é–≥–≥–µ)", "cozy hygge atmosphere, warm fireplace glow, knit textures, steaming mug, soft amber 2500K"],
          ["–í–µ–ª–∏—á–∏–µ", "majestic regal grandeur, gilded architecture, volumetric light shafts, awe-inspiring scale"],
          ["–ñ—É—Ç—å", "eerie unsettling mood, slightly wrong proportions, uncanny valley, dim flickering light"],
          ["–ñ–∏–≤–æ—Å—Ç—å", "vibrant lively energy, bustling crowd, saturated warm colors, motion implied, street life"],
          ["–û–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ", "lonely isolated solitude, vast empty landscape, single tiny figure, overwhelming negative space"],
          ["–°–≤—è—Ç–æ—Å—Ç—å", "sacred spiritual ambiance, divine crepuscular light rays, cathedral scale, reverent hush"],
          ["–ò–Ω–¥–∞—Å—Ç—Ä–∏–∞–ª", "industrial atmosphere, steel beams, welding sparks, steam vents, concrete and rust textures"],
          ["–ü–æ–¥ –≤–æ–¥–æ–π", "underwater atmosphere, deep blue-green gradient, dancing caustic light patterns, floating particles"],
          ["–ö–æ—Å–º–æ—Å", "celestial cosmic atmosphere, star field nebula, infinite depth, aurora borealis glow, vast silence"]
        ];

        const LIGHTING_OPTIONS = [
          ["–ó–æ–ª–æ—Ç–æ–π —á–∞—Å", "golden hour lighting, warm soft sun low in the sky, long shadows, rim lighting, 2500K temperature"],
          ["–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–µ—Ç", "soft natural overcast light, diffused shadows, even illumination, window light quality"],
          ["–°—Ç—É–¥–∏–π–Ω—ã–π —Å–≤–µ—Ç", "studio lighting, 3-point setup, key light, fill light, hair light, controlled contrast, professional look"],
          ["–ö–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–π", "cinematic lighting, motivated light sources, atmospheric haze, volumetric shafts, teal and orange contrast"],
          ["–†–µ–º–±—Ä–∞–Ω–¥—Ç", "Rembrandt lighting, chiaroscuro, single light source, signature triangle on cheek, dramatic mood"],
          ["–ù–µ–æ–Ω–æ–≤—ã–π (–ö–∏–±–µ—Ä–ø–∞–Ω–∫)", "neon lighting, pink and cyan gel lights, dark background, wet reflections, futuristic club atmosphere"],
          ["–ñ–µ—Å—Ç–∫–∏–π —Å–≤–µ—Ç", "hard sunlight, high noon, sharp distinct shadows, high contrast, crisp details"],
          ["–ù–∏–∑–∫–∏–π –∫–ª—é—á (Low Key)", "low key lighting, predominantly dark tones, silhouette, rim light only, mysterious mood"],
          ["–í—ã—Å–æ–∫–∏–π –∫–ª—é—á (High Key)", "high key lighting, predominantly white tones, overexposed background, optimistic ethereal mood"],
          ["–°–≤–µ—Ç –æ—Ç —Å–≤–µ—á–∏", "candlelight, flickering warm orange glow, deep shadows, intimate atmosphere, low lux"],
          ["–ë–∏–æ–ª—é–º–∏–Ω–µ—Å—Ü–µ–Ω—Ü–∏—è", "bioluminescent lighting, glowing organic blue-green light, underwater or alien forest vibe, mysterious glow"],
          ["–ë–æ–∫–µ", "bokeh background lighting, city lights blur, depth of field bubbles, festive atmosphere"],
          ["–ì–æ–±–æ (–¢–µ–Ω—å)", "gobo lighting pattern, window blind shadows, tree leaf shadows, dappled light effect"],
          ["–í—Å–ø—ã—à–∫–∞ (90-–µ)", "direct camera flash, harsh shadows, red-eye aesthetic, vintage polaroid feel, disposable camera"],
          ["–°–∏–Ω–∏–π —á–∞—Å", "blue hour lighting, pre-dawn/post-sunset, deep blue sky, cool ambient light, melancholic feel"],
          ["–û–±—ä–µ–º–Ω—ã–π —Å–≤–µ—Ç", "volumetric lighting, god rays, light shafts through dust/smoke, breathable atmosphere"],
          ["–ö–æ–ª—å—Ü–µ–≤–∞—è –ª–∞–º–ø–∞", "ring light, distinct circular catchlight in eyes, even flat facial lighting, beauty vlog aesthetic"],
          ["–ò–Ω—Ñ—Ä–∞–∫—Ä–∞—Å–Ω—ã–π", "infrared photography, surreal false color foliage, white grass, dark black sky, dreamlike"],
          ["–£–ª—å—Ç—Ä–∞—Ñ–∏–æ–ª–µ—Ç", "blacklight UV, fluorescent paint glowing, purple haze, club atmosphere"],
          ["–°–≤–µ—Ç –æ—Ç —ç–∫—Ä–∞–Ω–∞", "screen glow, cool blue light from below face, dark room, digital obsession mood"]
        ];

        const COMPOSITION_OPTIONS = [
          ["–ü—Ä–∞–≤–∏–ª–æ —Ç—Ä–µ—Ç–µ–π", "rule of thirds composition, subject on grid intersection, balanced negative space"],
          ["–¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ", "centered composition, Wes Anderson symmetry, direct confrontation, stable frame"],
          ["–ó–æ–ª–æ—Ç–æ–µ —Å–µ—á–µ–Ω–∏–µ", "golden ratio spiral composition, natural organic flow, divine proportion aesthetic"],
          ["–í–µ–¥—É—â–∏–µ –ª–∏–Ω–∏–∏", "leading lines, perspective depth, converging geometry drawing eye to subject"],
          ["–§—Ä–µ–π–º–∏–Ω–≥", "frame within a frame, looking through window/arch, depth layering, voyeuristic feel"],
          ["–ù–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ", "massive negative space, minimalism, isolation, subject in corner, vast emptiness"],
          ["–î–∏–∞–≥–æ–Ω–∞–ª–∏", "diagonal composition, dynamic tension, movement direction, energetic imbalance"],
          ["–°–∏–º–º–µ—Ç—Ä–∏—è", "perfect horizontal symmetry, reflection, mirror image, balanced stability"],
          ["–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–¥—Ä–∞", "fill the frame, no background, pattern texture focus, claustrophobic intensity"]
        ];

        const COLOR_PALETTE_OPTIONS = [
          ["Teal & Orange", "teal and orange cinematic color grade, Hollywood blockbuster LUT, skin warm + shadow cool"],
          ["Jewel Tones", "jewel tones, emerald #046307, ruby #9B111E, sapphire #0F52BA, amethyst #9966CC, rich deep saturation"],
          ["Candy", "candy bubblegum colors, hot pink, electric mint, lemon yellow, playful high-key palette"],
          ["Autumn", "autumn palette, burnt orange, crimson red, goldenrod yellow, chestnut brown, dry leaf texture"],
          ["Ocean", "ocean aquatic palette, deep navy, turquoise, seafoam green, pearl white, underwater caustic tint"],
          ["Sunset Gradient", "sunset gradient, horizon band orange->coral->magenta->violet->indigo, warm-to-cool transition"],
          ["Nordic", "Nordic Scandinavian palette, muted dove white, steel blue-gray, pale birch, minimal warm accent"],
          ["Film Negative", "inverted film negative colors, complementary reversal, eerie unnatural chromatic shift"],
          ["Cross-Processed", "cross-processed film, E-6 in C-41 chemistry, unexpected green-magenta shift, heavy contrast"]
        ];

        const CAMERA_OPTIONS = [
          ["ARRI Alexa 35", "shot on ARRI Alexa 35, digital cinema, organic textures, high dynamic range", "–ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –∫–∏–Ω–æ, 17 —Å—Ç–æ–ø–æ–≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞"],
          ["Panavision Panaflex Gold II", "shot on Panavision Panaflex Gold II, 35mm film, classic film look, organic grain", "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è 35–º–º –∫–∞–º–µ—Ä–∞ –ì–æ–ª–ª–∏–≤—É–¥–∞"],
          ["IMAX MKIV", "shot on IMAX MKIV, imax 70mm, 15/70mm film, massive resolution, expansive scale", "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 15/70–º–º –¥–ª—è –∏–º–º–µ—Ä—Å–∏–≤–Ω–æ–≥–æ –∫–∏–Ω–æ"],
          ["Sony Venice 2", "shot on Sony Venice 2, full frame, dual base iso, rich colors", "–ü–æ–ª–Ω–æ–∫–∞–¥—Ä–æ–≤–∞—è, –æ—Ç–ª–∏—á–Ω–∞—è —Ü–≤–µ—Ç–æ–ø–µ—Ä–µ–¥–∞—á–∞ (Top Gun: Maverick)"],
          ["RED V-RAPTOR", "shot on RED V-RAPTOR, 8k resolution, high frame rate, sharp detail", "8K VV —Å–µ–Ω—Å–æ—Ä, –≤—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤"],
          ["BMD URSA Mini Pro 12K", "shot on Blackmagic URSA Mini Pro 12K, 12k raw, film-like color science", "12K RAW, –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω–∞—è —Ü–≤–µ—Ç–æ–ø–µ—Ä–µ–¥–∞—á–∞"],
          ["Aaton XTR Prod", "shot on Aaton XTR Prod, super 16mm, organic film grain, vintage aesthetic", "–ö–ª–∞—Å—Å–∏–∫–∞ Super 16–º–º, –≤–∏–Ω—Ç–∞–∂–Ω–∞—è —ç—Å—Ç–µ—Ç–∏–∫–∞"],
          ["Technicolor 3-Strip", "shot on Technicolor 3-Strip, 1930s cinema, saturated colors, vibrant palette", "–í–∏–Ω—Ç–∞–∂ 1930-—Ö, –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞"],
          ["Bolex H16", "shot on Bolex H16, 16mm film, mechanical feel, vintage home movie", "–ö—É–ª—å—Ç–æ–≤–∞—è 16–º–º, –∞–≤–∞–Ω–≥–∞—Ä–¥–Ω—ã–π –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ"],
          ["Super 8", "shot on Super 8 film, nostalgic, heavy grain, warm tones", "–ù–æ—Å—Ç–∞–ª—å–≥–∏—è, –∫—Ä—É–ø–Ω–æ–µ –∑–µ—Ä–Ω–æ, —Ç—ë–ø–ª—ã–µ —Ç–æ–Ω–∞"],
          ["Mitchell BNC", "shot on Mitchell BNC, golden age hollywood, classic cinema", "–†–∞–±–æ—á–∞—è –ª–æ—à–∞–¥–∫–∞ –ó–æ–ª–æ—Ç–æ–≥–æ –≤–µ–∫–∞ –ì–æ–ª–ª–∏–≤—É–¥–∞"],
          ["Panavision System 65", "shot on Panavision System 65, 65mm film, epic vistas, extreme detail", "65–º–º –ø–ª—ë–Ω–∫–∞, —ç–ø–∏—á–µ—Å–∫–∏–µ –ø–∞–Ω–æ—Ä–∞–º—ã"],
          ["ARRIFLEX 765", "shot on ARRIFLEX 765, 65mm film, visual clarity, shallow depth of field", "–°–∫–æ—Ä–æ—Å—Ç–Ω–∞—è 65–º–º, –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è —á—ë—Ç–∫–æ—Å—Ç—å"],
          ["GoPro HERO 12", "shot on GoPro HERO 12, action camera, ultra wide, pov, fisheye distortion", "–≠–∫—à–Ω-–∫–∞–º–µ—Ä–∞, —É–ª—å—Ç—Ä–∞-—à–∏—Ä–æ–∫–∏–π —É–≥–æ–ª, POV"],
          ["iPhone 15 Pro Log", "shot on iPhone 15 Pro Log, mobile cinematography, sharp digital look", "–ú–æ–±–∏–ª—å–Ω–∞—è –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—è, Log-–ø—Ä–æ—Ñ–∏–ª—å"],
          ["Panasonic Lumix GH6", "shot on Panasonic Lumix GH6, mft sensor, cinematic micro four thirds", "Micro Four Thirds, –æ—Ç–ª–∏—á–Ω–∞—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è"],
          ["Canon K35 Look", "shot through Canon K35 look, vintage glass, soft highlights, warm flares", "–í–∏–Ω—Ç–∞–∂–Ω—ã–π —Å—Ç–∏–ª—å 70-—Ö, –º—è–≥–∫–∏–µ –±–ª–∏–∫–∏"],
          ["Cooke S4 Look", "shot through Cooke S4 look, the cooke look, dimensional images, smooth falloff", "–ó–Ω–∞–º–µ–Ω–∏—Ç—ã–π 'Cooke Look', –æ–±—ä—ë–º –∏ –º—è–≥–∫–æ—Å—Ç—å"]
        ];

        const LENS_SYSTEMS = [
          ["Panavision Primo Primes", "shot on Panavision Primo Primes, rich color saturation, smooth focus roll-off, hollywood blockbuster look, high fidelity texture", "–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –°—Ç–∞–Ω–¥–∞—Ä—Ç –∏–Ω–¥—É—Å—Ç—Ä–∏–∏, –∫—Ä–µ–º–æ–≤–æ–µ –±–æ–∫–µ"],
          ["Arri Signature Primes", "shot on Arri Signature Primes, velvety bokeh, magnetic skin tones, ultra-smooth background separation, warm and natural atmosphere", "–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –¢—ë–ø–ª—ã–µ —Ç–æ–Ω–∞, –±–∞—Ä—Ö–∞—Ç–Ω–æ–µ –±–æ–∫–µ"],
          ["Cooke S4/i", "Shot on Cooke S4/i prime lens, The Cooke Look, warm cinematic color tone, extremely pleasing skin tones, smooth focus falloff, spherical lens, gentle contrast", "–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –ó–Ω–∞–º–µ–Ω–∏—Ç—ã–π 'Cooke Look'"],
          ["Panavision Primo Anamorphic", "Shot on Panavision Primo Anamorphic lenses, 2x squeeze, horizontal blue lens flares, high contrast, sharp resolution, negligible distortion, oval bokeh", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –°–∏–Ω–∏–µ –±–ª–∏–∫–∏, –æ–≤–∞–ª—å–Ω–æ–µ –±–æ–∫–µ"],
          ["Panavision C-Series", "shot on Panavision C-Series Anamorphic, vintage sci-fi aesthetic, distinct blue streak flares, oval bokeh shapes, soft edges, organic imperfections", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –í–∏–Ω—Ç–∞–∂, —Å–∏–Ω–∏–µ –ø–æ–ª–æ—Å—ã"],
          ["Atlas Orion Anamorphic", "Shot on Atlas Orion Anamorphic lenses, distinctive blue streak lens flares, organic barrel distortion, painterly watercolor bokeh, 2x anamorphic squeeze", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ñ–∏–≤–æ–ø–∏—Å–Ω–æ–µ –±–æ–∫–µ, –±–æ—á–∫–æ–æ–±—Ä–∞–∑–Ω–∞—è –¥–∏—Å—Ç–æ—Ä—Å–∏—è"],
          ["Panavision E-Series", "shot on Panavision E-Series Anamorphic, classic 80s action movie look, sharp but organic, controlled horizontal flares, elegant depth of field", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ö–ª–∞—Å—Å–∏–∫–∞ 80-—Ö"],
          ["Zeiss Master Anamorphics", "shot on Zeiss Master Anamorphics, distortion-free wide screen, futuristic clean look, precise blue lens flares, sharp corner-to-corner", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ë–µ–∑ –¥–∏—Å—Ç–æ—Ä—Å–∏–∏, —Ñ—É—Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π"],
          ["Hawk Class-X", "shot on Hawk Class-X Anamorphic, retro crystal clear look, punchy contrast, distinctive anamorphic character", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –†–µ—Ç—Ä–æ, –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç"],
          ["Canon K-35", "shot on Canon K-35 vintage lenses, dreamy golden halation, soft glowing highlights, low contrast vintage vibe, warm retro color palette", "–í–∏–Ω—Ç–∞–∂–Ω—ã–µ / –ó–æ–ª–æ—Ç–∞—è –≥–∞–ª–∞—Ü–∏—è, –º—è–≥–∫–∏–µ –±–ª–∏–∫–∏ 70-—Ö"],
          ["Laowa Macro Probe", "shot on Laowa Probe lens, bug-eye perspective, extreme close-up macro, unusual wide angle depth, immersive texture details", "–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ / –ú–∞–∫—Ä–æ-–∑–æ–Ω–¥, —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π –º–∞–∫—Ä–æ"],
          ["Lensbaby", "shot on Lensbaby, selective focus sweet spot, heavy radial blur, dreamlike distorted atmosphere, miniature effect tilt-shift", "–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ / –¢–∏–ª—Ç-—à–∏—Ñ—Ç, –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–æ–∫—É—Å"],
          ["Arri ALFA", "shot on Arri ALFA lenses, textured cinematic image, dreamy atmosphere, soft edges, unique large format character", "–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ / –¢–µ–∫—Å—Ç—É—Ä–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∫—Ä—É–ø–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞"],
          ["Panavision H-Series", "shot on Panavision H-Series Anamorphic, glamorous soft focus, warm cinematic tones, organic film-like texture, restrained flares", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ì–ª–∞–º—É—Ä–Ω–∞—è –º—è–≥–∫–æ—Å—Ç—å, –≤–∏–Ω—Ç–∞–∂–Ω–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞"],
          ["Panavision Ultra Vista", "shot on Panavision Ultra Vista, ultra-wide anamorphic format, expansive cinematic scope, soft lighting gradients, high resolution details", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –£–ª—å—Ç—Ä–∞-—à–∏—Ä–æ–∫–∏–π —Ñ–æ—Ä–º–∞—Ç"],
          ["Panavision T-Series", "shot on Panavision T-Series Anamorphic, huge oval lens flares, high speed cinematic look, rich color saturation, modern anamorphic clarity", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –û–≥—Ä–æ–º–Ω—ã–µ –æ–≤–∞–ª—å–Ω—ã–µ –±–ª–∏–∫–∏"],
          ["Hawk Vantage One", "shot on Hawk Vantage One, ultra-shallow depth of field, T1.0 aperture look, soft vintage coating, creamy background separation", "–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / T1.0, —É–ª—å—Ç—Ä–∞-–º–∞–ª–∞—è –ì–†–ò–ü"],
          ["Zeiss Super Speed", "shot on Zeiss Super Speed, 70s grit aesthetic, glowing light sources, soft but detailed sharpness, iconic fast lens character", "–í–∏–Ω—Ç–∞–∂–Ω—ã–µ / –°—Ç–∏–ª—å '–¢–∞–∫—Å–∏—Å—Ç–∞', —Ç—Ä–µ—É–≥–æ–ª—å–Ω–æ–µ –±–æ–∫–µ"],
          ["Panavision Primo Zooms", "shot on Panavision Primo Zooms, high-end blockbuster look, punchy contrast, crisp details, 90s/00s feature film texture", "–ó—É–º / –ì–æ–ª–ª–∏–≤—É–¥—Å–∫–∏–π –±–ª–æ–∫–±–∞—Å—Ç–µ—Ä"],
          ["Sigma Cine Lenses", "shot on Sigma Cine Lenses, clinical sharpness, modern digital clarity, neutral color palette, technical precision", "–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –ö–ª–∏–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∑–∫–æ—Å—Ç—å, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞"],
          ["Panavision Primo 70", "shot on Panavision Primo 70, ultra-clean digital rendering, edge-to-edge sharpness, high contrast, perfect for 8K sensors", "–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –î–ª—è 8K —Å–µ–Ω—Å–æ—Ä–æ–≤, –∞–±—Å–æ–ª—é—Ç–Ω–∞—è —Ä–µ–∑–∫–æ—Å—Ç—å"],
          ["Zeiss Ultra Prime", "shot on Zeiss Ultra Prime, distortion-free wide angle, perfect geometric lines, high micro-contrast, clinical yet cinematic precision", "–°—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–µ / –ë—Ä—É—Ç–∞–ª—å–Ω–∞—è —á–µ—Å—Ç–Ω–æ—Å—Ç—å, —Å—Ç–∞–Ω–¥–∞—Ä—Ç VFX"],
          ["Hawk V-Lite", "shot on Hawk V-Lite Anamorphic, intimate bokeh character, natural and realistic colors, classic 2x squeeze, compact cinematic feel", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ò–Ω—Ç–∏–º–Ω–æ–µ –±–æ–∫–µ, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞"],
          ["JDC Xtal Xpress", "shot on JDC Xtal Xpress Anamorphic, heavy barrel distortion, intense golden flares, thick cinematic texture, gritty 80s character", "–ê–Ω–∞–º–æ—Ä—Ñ–æ—Ç–Ω—ã–µ / –ó–æ–ª–æ—Ç—ã–µ –±–ª–∏–∫–∏, —Ö–∞—Ä–∞–∫—Ç–µ—Ä 80-—Ö"]
        ];

        const FILM_STOCK_PATCH = {
          "Kodak Vision3 500T": "shot on Kodak Vision3 500T 5219 film stock, visible film grain, red halation around highlights, tungsten color balance, cinematic texture, deep shadows",
          "Kodak Vision3 250D": "shot on Kodak Vision3 250D 5207 film stock, fine grain structure, true-to-life colors, rich daylight saturation, organic skin tones",
          "Kodak Vision3 50D": "shot on Kodak Vision3 50D film stock, virtually grain-free, hyper-vivid colors, extreme detail retention, pristine film quality",
          "Fujifilm Eterna 500T": "shot on Fujifilm Eterna 500T, low contrast, soft pastel color palette, cinematic greenish shadows, smooth tonal transitions",
          "Kodak Tri-X 400": "shot on Kodak Tri-X 400 Black and White film, heavy contrast, gritty film grain, noir aesthetic, monochromatic",
          "Kodachrome 64": "shot on vintage Kodachrome 64, nostalgic warm colors, deeply saturated reds and yellows, 1970s magazine look",
          "ARRI Alexa 35 Sensor": "shot on ARRI Alexa 35, REVEAL Color Science, extreme dynamic range, creamy highlight roll-off, noise-free shadows",
          "RED V-Raptor / Monstro": "shot on RED V-Raptor 8K VV, hyper-realistic detail, razor sharp, deep crushed blacks, digital precision",
          "Sony Venice 2": "shot on Sony Venice 2, exceptional low light performance, clean vibrant colors, modern full-frame aesthetic",
          "VHS / MiniDV": "shot on VHS camcorder, 1990s home video style, tracking errors, chromatic aberration, low resolution, scanlines"
        };
        const FILM_STOCK_DESCRIPTIONS = {
          "Kodak Vision3 500T": "–°—Ç–∞–Ω–¥–∞—Ä—Ç –Ω–æ—á–Ω–æ–π —Å—ä—ë–º–∫–∏, –∑–µ—Ä–Ω–∏—Å—Ç–æ—Å—Ç—å, –≤–æ–ª—å—Ñ—Ä–∞–º–æ–≤—ã–π –±–∞–ª–∞–Ω—Å",
          "Kodak Vision3 250D": "–î–Ω–µ–≤–Ω–∞—è –ø–ª—ë–Ω–∫–∞, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞, –∏–¥–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å",
          "Kodak Vision3 50D": "–ß–∏—Å—Ç–µ–π—à–∞—è –ø–ª—ë–Ω–∫–∞, –ø–æ—á—Ç–∏ –±–µ–∑ –∑–µ—Ä–Ω–∞, –æ—á–µ–Ω—å —è—Ä–∫–∏–µ —Ü–≤–µ—Ç–∞",
          "Fujifilm Eterna 500T": "–ú—è–≥–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –ø–∞—Å—Ç–µ–ª—å–Ω—ã–µ —Ç–æ–Ω–∞, —Ç–µ–Ω–∏ –≤ –∑–µ–ª—ë–Ω—ã–π",
          "Kodak Tri-X 400": "–ß/–± –∫–ª–∞—Å—Å–∏–∫–∞, –≤—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –∑–µ—Ä–Ω–∏—Å—Ç–∞—è –¥—Ä–∞–º–∞",
          "Kodachrome 64": "–†–µ—Ç—Ä–æ 60-70-–µ, –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ reds/yellows, National Geographic",
          "ARRI Alexa 35 Sensor": "–¶–∏—Ñ—Ä–æ–≤–æ–π –∫–æ—Ä–æ–ª—å, –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–π –î–î, –º—è–≥–∫–∏–µ —Ö–∞–π–ª–∞–π—Ç—ã",
          "RED V-Raptor / Monstro": "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∑–∫–æ—Å—Ç—å, –≥–∏–ø–µ—Ä—Ä–µ–∞–ª–∏–∑–º, –≥–ª—É–±–æ–∫–∏–µ —Ç–µ–Ω–∏",
          "Sony Venice 2": "–û—Ç–ª–∏—á–Ω–∞—è –≤ —Å–ª–∞–±–æ–º —Å–≤–µ—Ç–µ (Dual ISO), —á–∏—Å—Ç—ã–µ —Ç–æ–Ω–∞",
          "VHS / MiniDV": "–≠—Å—Ç–µ—Ç–∏–∫–∞ 90-—Ö: –≥–ª–∏—Ç—á–∏, —Å–∫–∞–Ω-–ª–∏–Ω–∏–∏, —Ö—Ä–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–±–µ—Ä—Ä–∞—Ü–∏–∏"
        };

        const AMBIENCE = { dead_silence: "Audio: dead silence, eerie room tone, subtle high-frequency ringing, absolute quiet, claustrophobic atmosphere", heavy_rain: "Audio: immersive spatial audio, heavy rain pouring on concrete, distant rolling thunder, low-frequency rumble, water splashing", cyberpunk_city: "Audio: futuristic city soundscape, heavy neon buzzing, distant flying vehicle hum, digital billboards, wet street ambience", nature_forest: "Audio: rich forest ambience, crisp bird calls, wind rustling through dense leaves, distant stream flowing, organic natural soundscape" };
        const AMBIENCE_LABELS = { dead_silence: "–ú—ë—Ä—Ç–≤–∞—è —Ç–∏—à–∏–Ω–∞", heavy_rain: "–ü—Ä–æ–ª–∏–≤–Ω–æ–π –¥–æ–∂–¥—å", cyberpunk_city: "–ö–∏–±–µ—Ä–ø–∞–Ω–∫ –ì–æ—Ä–æ–¥", nature_forest: "–ñ–∏–≤–æ–π –ª–µ—Å" };
        const FOLEY = { footsteps_gravel: "Audio: crisp close-miked foley, heavy boots crunching on gravel, clear transient detail, isolated sync sound", cloth_leather: "Audio: detailed cloth foley, heavy leather creaking, fabric rustling, close-mic intimacy", metal_clank: "Audio: sharp metallic clank, heavy steel impact, mechanical clicking, resonant metallic tail, high-fidelity transient", glass_shatter: "Audio: sudden glass shattering, crystalline high-frequency debris scattering, sharp impact, wide stereo spread" };
        const FOLEY_LABELS = { footsteps_gravel: "–®–∞–≥–∏ (–ì—Ä–∞–≤–∏–π)", cloth_leather: "–®—É—Ä—à–∞–Ω–∏–µ –∫–æ–∂–∏", metal_clank: "–õ—è–∑–≥ –º–µ—Ç–∞–ª–ª–∞", glass_shatter: "–†–∞–∑–±–∏—Ç–æ–µ —Å—Ç–µ–∫–ª–æ" };
        const CINE_FX = { tension_drone: "Audio: tense cinematic soundscape, deep ominous low-frequency drone, unsettling sub-bass rumble, psychological tension", braam_hit: "Audio: massive cinematic braam hit, Hans Zimmer style brass blast, sudden high-impact sub-drop, epic trailer sound design", slo_mo: "Audio: time-stretched sound design, extreme slow-motion audio, pitched down low-frequency sweep, muffled underwater effect", heartbeat: "Audio: isolated human heartbeat, deep thumping chest resonance, rising tempo, claustrophobic psychoacoustic effect" };
        const CINE_FX_LABELS = { tension_drone: "–¢—Ä–µ–≤–æ–∂–Ω—ã–π –≥—É–ª", braam_hit: "–≠–ø–∏—á–Ω—ã–π —É–¥–∞—Ä (Braam)", slo_mo: "–°–ª–æ—É-–º–æ —ç—Ñ—Ñ–µ–∫—Ç", heartbeat: "–°—Ç—É–∫ —Å–µ—Ä–¥—Ü–∞" };

        function addSectionAfter(afterId, html) { const a = document.getElementById(afterId); if (!a) return; const t = document.createElement('template'); t.innerHTML = html.trim(); a.insertAdjacentElement('afterend', t.content.firstElementChild); }
        function fillOptionGroup(groupId, dataGroup, options) {
          const group = document.getElementById(groupId);
          if (!group) return;
          options.forEach(([label, fragment]) => {
            const b = document.createElement('button');
            b.className = 'option-btn';
            b.dataset.group = dataGroup;
            b.dataset.value = fragment;
            b.textContent = label;
            b.title = fragment;
            group.appendChild(b);
          });
        }

        function ensureConfig() {
          if (typeof state !== 'object' || typeof groupConfig !== 'object') return;
          ['cinematicPreset', 'artStyle', 'ambience', 'foley', 'cinematicFx'].forEach(g => { if (!groupConfig[g]) groupConfig[g] = { mode: 'single' }; });
          if (!('cinematicPreset' in state)) state.cinematicPreset = '';
          if (!('artStyle' in state)) state.artStyle = '';
          if (!('ambience' in state)) state.ambience = '';
          if (!('foley' in state)) state.foley = '';
          if (!('cinematicFx' in state)) state.cinematicFx = '';

          // FIX: Build ART_STYLES_MAP so buildFlatPrompt/buildStructuredPrompt/buildMidjourneyPrompt can use it
          if (typeof ART_STYLES !== 'undefined' && !window.ART_STYLES_MAP) {
            window.ART_STYLES_MAP = {};
            Object.keys(ART_STYLES).forEach(name => {
              window.ART_STYLES_MAP[name] = ART_STYLES[name];
            });
          }

          // FIX: Build CINEMATIC_PRESETS_MAP for prompt output
          if (typeof CINEMATIC_PRESETS !== 'undefined' && !window.CINEMATIC_PRESETS_MAP) {
            window.CINEMATIC_PRESETS_MAP = {};
            Object.keys(CINEMATIC_PRESETS).forEach(name => {
              window.CINEMATIC_PRESETS_MAP[name] = CINEMATIC_PRESETS[name];
            });
          }
        }

        function injectNewSections() {
          // === CAMERA BODIES ===
          if (!document.getElementById('cameraSectionV2')) {
            addSectionAfter('qualitySection', `<div class="section collapsed" id="cameraSectionV2"><div class="section-header"><h2><span class="icon icon-blue">üì∑</span> –ö–∞–º–µ—Ä–∞ <span class="help-tip">?<span class="tip-text">–í—ã–±–æ—Ä –∫–∞–º–µ—Ä—ã –∑–∞–¥–∞—ë—Ç —Ç–µ–≥–∏ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ/–ø–ª—ë–Ω–æ—á–Ω–æ–≥–æ –∫–∏–Ω–æ–±–æ–¥–∏, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —Ç–µ–∫—Å—Ç—É—Ä—É, –∑–µ—Ä–Ω–æ –∏ —Ü–≤–µ—Ç.</span></span></h2><span class="mode-badge">single</span></div><div class="section-content"><div class="option-group" id="cameraBodyGroup"></div></div></div>`);
            const g = document.getElementById('cameraBodyGroup');
            if (g) CAMERA_OPTIONS.forEach(([name, value, desc]) => {
              const b = document.createElement('button'); b.className = 'option-btn'; b.dataset.group = 'cameraBody'; b.dataset.value = value; b.textContent = name; b.title = desc || ''; g.appendChild(b);
            });
          }

          // === LENS SYSTEMS ===
          if (!document.getElementById('lensSectionV2')) {
            addSectionAfter('cameraSectionV2', `<div class="section collapsed" id="lensSectionV2"><div class="section-header"><h2><span class="icon icon-blue">üî≠</span> –û–±—ä–µ–∫—Ç–∏–≤ / –û–ø—Ç–∏–∫–∞ <span class="help-tip">?<span class="tip-text">–õ–∏–Ω–∑–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –±–æ–∫–µ, –±–ª–∏–∫–∏, –¥–∏—Å—Ç–æ—Ä—Å–∏—é, —Ü–≤–µ—Ç–æ–ø–µ—Ä–µ–¥–∞—á—É.</span></span></h2><span class="mode-badge">single</span></div><div class="section-content"><div class="option-group" id="lensSystemGroup"></div></div></div>`);
            const g = document.getElementById('lensSystemGroup');
            if (g) LENS_SYSTEMS.forEach(([name, value, desc]) => {
              const b = document.createElement('button'); b.className = 'option-btn'; b.dataset.group = 'lens'; b.dataset.value = value; b.textContent = name; b.title = desc || ''; g.appendChild(b);
            });
          }

          // === ART STYLES ===
          if (!document.getElementById('artStyleSectionV2')) {
            addSectionAfter('resolutionSection', `<div class="section collapsed" id="artStyleSectionV2"><div class="section-header"><h2><span class="icon icon-purple">üñºÔ∏è</span> –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ –º–µ–¥–∏—É–º</h2><span class="mode-badge">single</span></div><div class="section-content"><div class="option-group" id="artStyleGroup"></div></div></div>`);
            const g = document.getElementById('artStyleGroup');
            if (g) Object.keys(ART_STYLES).forEach(name => { const b = document.createElement('button'); b.className = 'option-btn'; b.dataset.group = 'artStyle'; b.dataset.value = name; b.textContent = name; b.title = ART_STYLES[name]; g.appendChild(b); });
          }

          // === MEDIUM ===
          if (!document.getElementById('mediumSectionV2')) {
            addSectionAfter('artStyleSectionV2', `<div class="section collapsed" id="mediumSectionV2"><div class="section-header"><h2><span class="icon icon-green">üß™</span> –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ–¥–∏—É–º</h2><span class="mode-badge">single</span></div><div class="section-content"><div class="option-group" id="mediumGroupV2"></div></div></div>`);
            fillOptionGroup('mediumGroupV2', 'medium', MEDIUM_OPTIONS);
          }

          // === COMPOSITION ===
          if (!document.getElementById('compositionSectionV2')) {
            addSectionAfter('apertureSection', `<div class="section collapsed" id="compositionSectionV2"><div class="section-header"><h2><span class="icon icon-blue">üìê</span> –ö–æ–º–ø–æ–∑–∏—Ü–∏—è</h2><span class="mode-badge">single</span></div><div class="section-content"><div class="option-group" id="compositionGroupV2"></div></div></div>`);
            fillOptionGroup('compositionGroupV2', 'composition', COMPOSITION_OPTIONS);
          }

          // === LIGHTING ===
          if (!document.getElementById('lightingSectionV2')) {
            addSectionAfter('compositionSectionV2', `<div class="section collapsed" id="lightingSectionV2"><div class="section-header"><h2><span class="icon icon-orange">üí°</span> –û—Å–≤–µ—â–µ–Ω–∏–µ</h2><span class="mode-badge">single</span></div><div class="section-content"><div class="option-group" id="lightingGroupV2"></div></div></div>`);
            fillOptionGroup('lightingGroupV2', 'lightType', LIGHTING_OPTIONS);
          }

          // === COLOR PALETTE ===
          if (!document.getElementById('paletteSectionV2')) {
            addSectionAfter('lightingSectionV2', `<div class="section collapsed" id="paletteSectionV2"><div class="section-header"><h2><span class="icon icon-pink">üé®</span> –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞</h2><span class="mode-badge">single</span></div><div class="section-content"><div class="option-group" id="paletteGroupV2"></div></div></div>`);
            fillOptionGroup('paletteGroupV2', 'colorPalette', COLOR_PALETTE_OPTIONS);
          }

          // === MOOD ===
          if (!document.getElementById('moodSectionV2')) {
            addSectionAfter('paletteSectionV2', `<div class="section collapsed" id="moodSectionV2"><div class="section-header"><h2><span class="icon icon-blue">üå´Ô∏è</span> Mood / Atmosphere</h2><span class="mode-badge">single</span></div><div class="section-content"><div class="option-group" id="moodGroupV2"></div></div></div>`);
            fillOptionGroup('moodGroupV2', 'mood', MOOD_OPTIONS);
          }

        }

        ensureConfig();
        injectNewSections();
        (function mergeArtAndMediumSections() {
          const artSection = document.getElementById('artStyleSectionV2');
          const mediumSection = document.getElementById('mediumSectionV2');
          if (!artSection || !mediumSection) return;

          const artContent = artSection.querySelector('.section-content');
          const artGroup = artContent ? artContent.querySelector('#artStyleGroup') : null;
          const mediumSource = mediumSection.querySelector('#mediumGroupV2');
          if (!artContent || !artGroup || !mediumSource) return;

          let mediumLabel = artContent.querySelector('#mergedMediumLabel');
          if (!mediumLabel) {
            mediumLabel = document.createElement('span');
            mediumLabel.id = 'mergedMediumLabel';
            mediumLabel.className = 'sub-label';
            mediumLabel.textContent = '–ú–µ–¥–∏—É–º';
            artContent.appendChild(mediumLabel);
          }

          let mediumGroup = artContent.querySelector('#mergedMediumGroup');
          if (!mediumGroup) {
            mediumGroup = document.createElement('div');
            mediumGroup.id = 'mergedMediumGroup';
            mediumGroup.className = 'option-group';
            artContent.appendChild(mediumGroup);
          }

          const normalize = (s) => (s || '').toLowerCase().replace(/\s+/g, ' ').trim();
          const mediumByLabel = new Map();
          mediumSource.querySelectorAll('.option-btn').forEach(btn => {
            const label = normalize(btn.textContent);
            const valLen = (btn.dataset.value || '').length;
            if (!mediumByLabel.has(label) || mediumByLabel.get(label) < valLen) mediumByLabel.set(label, valLen);
          });

          artGroup.querySelectorAll('.option-btn').forEach(btn => {
            const label = normalize(btn.textContent);
            const mediumLen = mediumByLabel.get(label);
            if (!mediumLen) return;
            const artLen = (btn.dataset.value || '').length;
            if (mediumLen > artLen) btn.remove();
          });

          const seenMedium = new Set();
          const appendMedium = (srcBtn) => {
            const key = normalize(srcBtn.textContent);
            if (seenMedium.has(key)) return;
            seenMedium.add(key);
            const b = srcBtn.cloneNode(true);
            b.dataset.group = 'medium';
            mediumGroup.appendChild(b);
          };
          mediumSource.querySelectorAll('.option-btn').forEach(appendMedium);

          const extras = [
            { label: '3D –†–µ–Ω–¥–µ—Ä', value: '3D render, physically based rendering (PBR), ray-traced global illumination, realistic materials, studio-grade reflections' },
            { label: '–í–µ–∫—Ç–æ—Ä–Ω–∞—è –≥—Ä–∞—Ñ–∏–∫–∞', value: 'vector illustration, clean bezier curves, infinite scalability, flat color blocks, print-ready crisp edges' }
          ];
          extras.forEach(item => {
            const key = normalize(item.label);
            if (seenMedium.has(key)) return;
            const b = document.createElement('button');
            b.className = 'option-btn';
            b.dataset.group = 'medium';
            b.dataset.value = item.value;
            b.textContent = item.label;
            b.title = item.value;
            mediumGroup.appendChild(b);
            seenMedium.add(key);
          });

          mediumSection.remove();
        })();
        (function moveCameraBlocksAfterResolution() {
          const resolution = document.getElementById('resolutionSection');
          const camera = document.getElementById('cameraSectionV2');
          const lens = document.getElementById('lensSectionV2');
          if (!resolution || !camera || !lens) return;
          resolution.insertAdjacentElement('afterend', camera);
          camera.insertAdjacentElement('afterend', lens);
        })();
      })();
    </script>





    <script>
      // =============================================
      // N8N INTEGRATION
      // =============================================
      document.getElementById("sendToN8nBtn").addEventListener("click", async () => {
        const webhookUrl = document.getElementById("n8nWebhookUrl").value.trim();
        if (!webhookUrl) {
          alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ URL –≤–µ–±—Ö—É–∫–∞ n8n.");
          return;
        }

        const btn = document.getElementById("sendToN8nBtn");
        const originalText = btn.innerHTML;
        btn.innerHTML = "‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...";
        btn.disabled = true;

        try {
          // Get current state
          const promptText = document.getElementById("promptOutput").innerText;
          const jsonPayload = buildJson();

          const payload = {
            timestamp: new Date().toISOString(),
            prompt: promptText,
            data: jsonPayload
          };

          const response = await fetch(webhookUrl, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
          });

          if (response.ok) {
            btn.innerHTML = "‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!";
            // Save webhook for next time
            localStorage.setItem("n8n_webhook_url", webhookUrl);
            setTimeout(() => {
              btn.innerHTML = originalText;
              btn.disabled = false;
            }, 2000);
          } else {
            throw new Error(`Status: ${response.status}`);
          }
        } catch (error) {
          console.error("N8N Error:", error);
          alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ n8n: " + error.message);
          btn.innerHTML = "‚ùå –û—à–∏–±–∫–∞";
          setTimeout(() => {
            btn.innerHTML = originalText;
            btn.disabled = false;
          }, 3000);
        }
      });

      // Load saved webhook URL
      const savedWebhookN8N = localStorage.getItem("n8n_webhook_url");
      if (savedWebhookN8N) {
        document.getElementById("n8nWebhookUrl").value = savedWebhookN8N;
      }

      // Auto-save on input
      document.getElementById("n8nWebhookUrl").addEventListener("input", (e) => {
        localStorage.setItem("n8n_webhook_url", e.target.value);
      });
    </script>
  </div>
</body>

</html>